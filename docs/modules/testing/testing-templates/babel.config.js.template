// babel.config.js Template
//
// Babel configuration for Jest testing
// Copy this file to your project root as 'babel.config.js' if you're using modern JavaScript features
//
// This is required for Jest to transform modern JavaScript syntax

module.exports = {
  presets: [
    [
      '@babel/preset-env',
      {
        targets: {
          node: 'current', // Target current Node.js version for Jest
        },
        modules: 'auto', // Let Babel decide module format
      },
    ],
    // Uncomment if using React
    // '@babel/preset-react',

    // Uncomment if using TypeScript
    // '@babel/preset-typescript',
  ],

  plugins: [
    // Common plugins for testing environment
    '@babel/plugin-proposal-class-properties',
    '@babel/plugin-proposal-optional-chaining',
    '@babel/plugin-proposal-nullish-coalescing-operator',

    // Uncomment if using async/await extensively
    // '@babel/plugin-transform-runtime',

    // Uncomment if using decorators
    // ['@babel/plugin-proposal-decorators', { legacy: true }],

    // Uncomment if using dynamic imports
    // '@babel/plugin-syntax-dynamic-import',
  ],

  env: {
    test: {
      presets: [
        [
          '@babel/preset-env',
          {
            targets: {
              node: 'current',
            },
            modules: 'commonjs', // Use CommonJS for Jest
          },
        ],
        // Test-specific presets
      ],
      plugins: [
        // Test-specific plugins

        // Uncomment for code coverage instrumentation
        // 'babel-plugin-istanbul',
      ],
    },

    development: {
      presets: [
        [
          '@babel/preset-env',
          {
            targets: {
              browsers: ['last 2 versions'],
            },
            modules: false, // Keep ES modules for tree shaking
          },
        ],
      ],
    },

    production: {
      presets: [
        [
          '@babel/preset-env',
          {
            targets: {
              browsers: ['> 0.25%', 'not dead'],
            },
            modules: false,
          },
        ],
      ],
      plugins: [
        // Production optimizations
        // '@babel/plugin-transform-remove-console',
      ],
    },
  },

  // Ignore patterns
  ignore: [
    'node_modules/**',
    'dist/**',
    'build/**',
  ],

  // Source maps for debugging
  sourceMaps: 'inline',
  retainLines: true,
};