{"ts":"2026-02-03T20:14:15.437Z","role":"ai","text":"\n\nI'll read all the specified files to conduct a thorough review.","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:14:15.438Z","role":"ai","text":"[tool:Read]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:14:15.632Z","role":"ai","text":"[tool:Read]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:14:15.834Z","role":"ai","text":"[tool:Read]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:14:16.046Z","role":"ai","text":"[tool:Read]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:14:16.280Z","role":"ai","text":"[tool:Read]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:14:16.471Z","role":"ai","text":"[tool:Read]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:14:20.437Z","role":"ai","text":"[tool:Read]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:14:20.664Z","role":"ai","text":"[tool:Read]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:14:20.840Z","role":"ai","text":"[tool:Read]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:14:21.020Z","role":"ai","text":"[tool:Read]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:14:20.406Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:14:32.359Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:14:24.494Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:14:28.312Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:14:36.653Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:14:44.224Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:14:40.738Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:14:54.410Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:14:50.968Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:15:01.352Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:15:07.743Z","role":"ai","text":"Now let me also check the existing builder registry and buoys builder to understand integration points.","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:15:13.305Z","role":"ai","text":"[tool:Glob]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:15:13.336Z","role":"ai","text":"[tool:Glob]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:15:13.360Z","role":"ai","text":"[tool:Glob]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:15:45.587Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:15:45.663Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:15:45.556Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:15:49.929Z","role":"ai","text":"[tool:Read]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:15:54.437Z","role":"ai","text":"[tool:Read]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:15:54.705Z","role":"ai","text":"[tool:Read]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:15:54.923Z","role":"ai","text":"[tool:Read]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:15:55.118Z","role":"ai","text":"[tool:Read]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:15:55.328Z","role":"ai","text":"[tool:Read]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:15:54.399Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:15:59.024Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:16:02.943Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:16:07.216Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:16:11.140Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:16:15.002Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:16:35.785Z","role":"ai","text":"Now let me also check for the `ModularModelGenerator` class and the legacy `OrcInstallation` to understand what's being absorbed.","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:16:35.786Z","role":"ai","text":"[tool:Glob]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:16:35.813Z","role":"ai","text":"[tool:Glob]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:16:35.853Z","role":"ai","text":"[tool:Grep]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:16:35.957Z","role":"ai","text":"[tool:Grep]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:17:02.342Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:17:02.463Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:17:02.522Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:17:02.574Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:17:10.045Z","role":"ai","text":"[tool:Read]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:17:10.294Z","role":"ai","text":"[tool:Read]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:17:10.509Z","role":"ai","text":"[tool:Read]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:17:18.727Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:17:22.679Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:17:26.818Z","role":"human","text":"[result]","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
{"ts":"2026-02-03T20:19:31.074Z","role":"ai","text":"I now have comprehensive visibility into the plan and the existing codebase. Here is my structured review.\n\n---\n\n## Google Gemini -- Cross-Review: WRK-032 Iteration 1\n\n### Reviewer: Google Gemini (simulated)\n### Date: 2026-02-03\n### Plan: \"Modular OrcaFlex Pipeline Installation Input with Parametric Campaign Support\"\n### Verdict: **Revisions Required**\n\n---\n\n### A. Technical Approach\n\n**A1. CampaignSpec wrapping ProjectInputSpec -- Fundamentally sound but has a deep-copy mutation problem.**\n\nThe pattern of `CampaignSpec.base: ProjectInputSpec` plus a `CampaignMatrix` that overrides per-run is a standard parametric sweep pattern. However, the plan calls for `generate_run_specs()` to deep-copy the base spec and then mutate fields on the copy. Pydantic v2 models are not designed for post-construction mutation by default (`model_config` has `frozen=False` by default, but no explicit statement about this is made in the plan). More critically, deep-copying Pydantic v2 models via `copy.deepcopy()` is significantly slower than using `model_copy(deep=True)` (Pydantic's native method). The plan references `copy (stdlib)` as a dependency but never mentions `model_copy()`. For a 96-combination matrix, this matters.\n\n**A2. The `SectionComposer` duplicates `ModularModelGenerator` responsibility.**\n\nThe existing `ModularModelGenerator.generate()` already iterates the `BuilderRegistry`, writes include files, and produces `master.yml`. The proposed `SectionComposer` does the same thing but with an additional variable substitution layer. The plan says `SectionComposer` \"wraps existing `ModularModelGenerator` for default generation\" but no concrete design shows how this wrapping works. Will `SectionComposer` instantiate a `ModularModelGenerator` internally? Will it call its methods? Or will it re-implement the same loop? This is the most under-specified part of the architecture and presents a real risk of code duplication.\n\n**A3. The `SectionRegistry` facade is redundant.**\n\nThe contract document defines a `SectionRegistry` class that maps `SectionType` to builder classes, then immediately notes it is \"a thin facade\" over `BuilderRegistry`. This is a second mapping that must be kept in sync with the existing registry. There is no mechanism proposed for ensuring `SectionType` enum values remain synchronized with `BuilderRegistry` entries. Adding a new builder to the registry but forgetting to update `SectionType` would silently break section-level overrides.\n\n**A4. Roller spacing assumes X-axis linearity.**\n\nThe `uniform()` factory on `RollerArrangement` only increments the X coordinate: `pos = [first_position[0] + i * spacing, first_position[1], first_position[2]]`. This assumption breaks for any non-linear pipeline route, curved laybarge stingers, or installations where rollers are spaced along a curved path. The plan does not acknowledge this limitation.\n\n**A5. Variable substitution is naive string replacement.**\n\nThe `resolve_template()` function does `template_content.replace(f\"${{{key}}}\", str(value))`. This has several issues:\n- No escaping mechanism. A YAML value that legitimately contains `${` will be incorrectly treated as a variable.\n- Replacement order dependency. If variable `a` resolves to `${b}`, a second pass could incorrectly resolve `b`. The plan says \"nested resolution not supported\" but does not prevent accidental chaining.\n- Floating-point formatting. `str(30.0)` produces `\"30.0\"` but OrcaFlex may expect `\"30\"` for integer water depths. No format specifier control is provided.\n\n**A6. `BuoysBuilder.should_generate()` returns `False` for S-lay.**\n\nThe existing builder skips entirely for S-lay models (`return not self.spec.is_s_lay()`). But the plan adds roller arrangements that apply to both S-lay and floating. The plan says nothing about how S-lay roller buoys would be generated if `BuoysBuilder` is skipped. This is a silent omission.\n\n---\n\n### B. Risk Assessment\n\n**Rating of existing risks:**\n\n| Risk | Plan Rating | My Rating | Comment |\n|------|-------------|-----------|---------|\n| Backward compat breakage | Medium/High | **High/High** | The `model_validator(mode=\"after\")` on `Equipment` mutates `roller_arrangement` during construction. If any downstream code serializes `Equipment` back to YAML, it will now include `roller_arrangement` even when the user only specified `rollers`. This is observable state change. |\n| Large campaign matrix disk | Low/Medium | **Low/Low** | Agree. Preview mitigates. |\n| Roller geometry errors | Medium/Medium | **Medium/High** | Impact should be High. Incorrect support geometry produces an OrcaFlex model that either fails to converge or produces physically wrong results. Downstream consequences are severe. |\n| Legacy OrcInstallation edge cases | Medium/Low | **Medium/Medium** | The legacy code has 3 different methods (`create_model_for_water_depth`, `create_installation_depth_model`, `create_installation_depth_model2`) with subtly different behavior. The plan only addresses `delta_elevations` conversion. The `create_installation_depth_model2` variant handles `intermediate_sling` being `None` differently. Impact should be Medium, not Low. |\n| Variable substitution breaks YAML | Low/High | **Medium/High** | Agree on impact. Likelihood is higher than Low because YAML has many special characters (`{`, `:`, `#`). A substituted value of `10:30` (a time string) would be parsed as a YAML mapping. |\n\n**New risks not identified:**\n\n| Risk | Likelihood | Impact | Details |\n|------|------------|--------|---------|\n| `CampaignGenerator` and `ModularModelGenerator` have incompatible master.yml formats | High | High | `ModularModelGenerator._write_master()` writes `- includefile:` format. `SectionComposer` contract shows `includefile:` (list under key). These are different YAML structures. No reconciliation is planned. |\n| Thread safety of `BuilderRegistry` class variable | Low | Medium | `BuilderRegistry._registry` is a class-level mutable dict. If campaign generation is ever parallelized (natural for independent runs), concurrent builder imports could corrupt state. |\n| `EnvironmentVariation` and `SoilVariation` do not include `seabed.slope` | Medium | Medium | The campaign matrix can vary `soils` (stiffness + friction) but not `seabed.slope`. For installation analyses where water depth varies, seabed slope typically co-varies. This is a missing parameter. |\n| No validation that `tensions` are only used with S-lay | Medium | Medium | The plan mentions \"tensions: S-lay only\" in comments but the `CampaignMatrix` model has no cross-validation with the base spec's installation type. A floating installation with tensions specified would silently generate invalid configs. |\n| Output naming collisions | Medium | High | The `output_naming` template `\"{base_name}_wd{water_depth}m_{environment}\"` does not include all varying parameters. If `soils` vary but are not in the naming template, multiple runs write to the same directory. The `validate()` method checks for duplicate names, but this check happens after the user has written their config. No schema-level enforcement. |\n| No `max_runs` guard at schema level | Low | Medium | The plan mentions `max_runs` as a mitigation but does not include it in any model or contract. It is aspirational only. |\n\n---\n\n### C. Feasibility and Integration\n\n**C1. Integration with `ModularModelGenerator` is poorly defined.**\n\nThe `CampaignGenerator.generate()` contract says it \"delegates to `ModularModelGenerator` for file generation\" (step 2f). But `ModularModelGenerator.__init__()` takes a `spec_file: Path` (a file path, not a `ProjectInputSpec` object). The campaign generator needs to pass a modified spec object, not a file path. This means either:\n- The campaign generator writes a temporary YAML file per combination, then passes the path to `ModularModelGenerator` (wasteful, fragile).\n- `ModularModelGenerator` needs a new constructor overload or a `from_spec()` classmethod.\n\nNeither option is addressed in the plan or tasks.\n\n**C2. `SectionComposer` has no integration test strategy with existing builders.**\n\nThe contract shows `SectionComposer.compose()` generating include files, but the builders have inter-dependencies via `BuilderContext`. If `SectionComposer` replaces some builders with template-based sections (via `InstallationSection.template`), the `BuilderContext` will have missing entries. For example, if the user overrides the buoys section with a custom template, no `buoy_names_6d` gets registered, and downstream `LinesBuilder` or `GroupsBuilder` will reference empty context lists. No mitigation is proposed.\n\n**C3. CLI entry point conflict.**\n\nThe plan adds a CLI via `__main__.py` in the campaign module, but the existing CLI is in `cli.py` within the same package. The existing CLI uses subcommands (`generate`, `validate`). The campaign CLI uses flags (`--campaign`, `--preview`). These two entry points are not unified, creating user confusion about which to use.\n\n**C4. The `from_legacy_config()` conversion is underspecified.**\n\nThe legacy `OrcInstallation` class depends on `assetutilities` (`ymlInput`, `saveDataYaml`, `add_cwd_to_filename`, `OrderedDumper`). The plan says the conversion classmethod accepts a \"legacy config dict\" but does not define the dict shape. The legacy class operates on OrcaFlex model files directly (6DBuoys, 3DBuoys, Lines keys), not on `ProjectInputSpec` YAML. Converting between these two formats requires a full model reverse-engineering step that is estimated as \"Medium\" complexity but is realistically \"High\".\n\n---\n\n### D. Missing Considerations\n\n**D1. No error recovery strategy for partial campaign generation.**\n\nIf run 47 of 96 fails, what happens? The contract says \"logs error, continues to next combination, records in `errors`.\" But there is no mechanism to resume a partially completed campaign. Users would need to re-generate all 96 runs. For large matrices, this is expensive.\n\n**D2. No consideration of current profile depth-dependence.**\n\nWhen `water_depth` changes across campaign runs, the `Current.profile` depth values should be adjusted proportionally. A profile defined for 8m depth (`[[0, 1.0], [8, 0.3]]`) becomes invalid at 60m depth. The plan does not address this.\n\n**D3. No idempotency guarantee.**\n\nRunning `CampaignGenerator.generate()` twice on the same output directory will overwrite files silently. No check-before-write, no `--force` flag, no timestamped output.\n\n**D4. Memory pressure for large matrices.**\n\nA 96-combination matrix creates 96 deep copies of `ProjectInputSpec`. If each spec is 50KB in memory, that is ~5MB total -- manageable. But the plan does not consider scenarios where custom section templates include large embedded data (vessel RAO tables, seabed profiles). A streaming/generator approach (yield one run at a time, write, discard) would be more robust than materializing all 96 specs upfront.\n\n**D5. No logging framework.**\n\nThe plan mentions \"logs error\" in the contract but uses no logging infrastructure. The existing CLI uses `print()` statements. For a campaign generating potentially hundreds of files, structured logging with severity levels would be essential for debugging.\n\n**D6. Windows path handling.**\n\nThe plan targets Windows exclusively (`platforms: [\"windows\"]`). Variable-substituted template paths and output directory paths should use `pathlib.Path` consistently. The `resolve_template()` function operates on raw strings. If a template contains a path like `${template_dir}/custom.yml`, the `/` will be wrong on Windows.\n\n**D7. No schema versioning.**\n\n`CampaignSpec` is a new top-level schema but has no `version` field. If the schema evolves (new campaign parameters, renamed fields), there is no mechanism for detecting or migrating old campaign YAML files.\n\n**D8. Seabed stiffness in `SoilVariation` vs `Environment`.**\n\n`SoilVariation` contains a `stiffness: SeabedStiffness` field and a `friction_coefficient`. But the existing `Environment.seabed` also has `stiffness` and `friction_coefficient`. The plan does not clarify whether `SoilVariation` replaces just `Environment.seabed.stiffness` and `Environment.seabed.friction_coefficient`, or the entire `Environment.seabed` object (which also has `slope`). If only partial replacement, the override logic needs to be per-field, not whole-object.\n\n---\n\n### E. Actionable Feedback\n\n1. **Define the `ModularModelGenerator` integration API explicitly.** Add a `ModularModelGenerator.from_spec(spec: ProjectInputSpec)` classmethod or refactor the constructor to accept either `Path` or `ProjectInputSpec`. Add this as a prerequisite task (T00) that T07 depends on.\n\n2. **Eliminate `SectionComposer` as a separate class.** Instead, extend `ModularModelGenerator` with a `generate_with_overrides(output_dir, sections, variables)` method. This avoids duplicating the builder loop and keeps a single code path for master YAML generation. The `VariableResolver` can remain standalone.\n\n3. **Remove `SectionRegistry`.** It adds a synchronization burden with no benefit. `SectionType` enum values should be derived from `BuilderRegistry` entries dynamically, or the enum should be eliminated in favor of string keys that match registry file names.\n\n4. **Use `model_copy(deep=True)` instead of `copy.deepcopy()`.** Update the plan to reference Pydantic's native copy mechanism for spec duplication. This is faster and preserves model validation.\n\n5. **Add cross-validation on `CampaignMatrix` for installation-type constraints.** A `model_validator` should verify that `tensions` is only set when the base spec is S-lay (`base.is_s_lay()`). Add this to T04.\n\n6. **Fix `BuoysBuilder.should_generate()` for S-lay roller support.** Either add roller generation to a separate builder for S-lay, or modify the condition to allow buoy generation when `roller_arrangement` is set regardless of installation type. Add this consideration to T05.\n\n7. **Address current profile depth-scaling.** When water depth changes, add logic to scale current profile depths proportionally to the new depth. Document this behavior or provide a configuration option to disable auto-scaling.\n\n8. **Add floating-point format control to `VariableResolver`.** Support format specifiers like `${water_depth:.0f}` for integer formatting, or at minimum convert `float` values that are whole numbers to `int` before stringification.\n\n9. **Add a `schema_version` field to `CampaignSpec`.** Start at `\"1.0\"`. Add migration logic for future versions.\n\n10. **Unify the CLI entry points.** Add `campaign` as a new subcommand in the existing `cli.py` rather than creating a separate `__main__.py` entry point. The subcommand should support `--preview` and `--output` flags.\n\n11. **Add `--force` and `--resume` flags to campaign generation.** `--force` overwrites existing output. `--resume` skips directories that already exist and contain a `master.yml`.\n\n12. **Implement streaming generation in `CampaignGenerator`.** Use a generator/iterator pattern: yield one `(name, spec)` pair at a time, generate files, then discard the spec before creating the next one. This keeps memory constant regardless of matrix size.\n\n13. **Add seabed slope to `SoilVariation` or create a `SeabedVariation` model.** For installation analysis, slope and soil properties are strongly correlated with water depth. Keeping them together in the campaign matrix is physically more correct.\n\n14. **Document the `RollerArrangement.uniform()` X-axis assumption.** Either add support for direction vectors (spacing along an arbitrary axis) or explicitly document that uniform spacing is only valid for straight-line routes. Add a `spacing_direction` field or rename to `uniform_along_x()`.\n\n15. **Add YAML post-substitution validation.** After `VariableResolver.resolve()` completes, parse the result as YAML and validate the structure. If the substituted values create invalid YAML (e.g., unquoted colons), raise a clear error.\n\n16. **Clarify `SoilVariation` override scope.** Explicitly state in the data model whether `SoilVariation` replaces `Environment.seabed.stiffness` and `Environment.seabed.friction_coefficient` only, or the entire `Seabed` object. Add this to the data model document.\n\n17. **Add structured logging.** Replace `print()` calls with Python `logging` module calls. Configure log level via CLI flag (`--verbose`/`--quiet`).\n\n18. **Add `output_naming` validation at schema level.** A `field_validator` on `CampaignSpec.output_naming` should verify that the template contains at least one reference to each varying parameter in the matrix. If `soils` varies but `{soil}` is not in the template, raise a `ValidationError`.\n\n---\n\n### Summary\n\nThe plan demonstrates a sound understanding of the domain and the existing codebase. The core decision to wrap `ProjectInputSpec` with a campaign layer is correct. However, the integration between `CampaignGenerator`, `SectionComposer`, and `ModularModelGenerator` is under-specified and risks code duplication. The variable substitution approach is fragile. Several edge cases around water depth co-variation (current profiles, seabed slope) are unaddressed. The legacy absorption is underestimated in complexity.\n\n**Recommendation**: Address items 1, 2, 3, 5, 6, 10, and 16 before proceeding to implementation. The remaining items can be tracked as follow-up improvements.","session":"ef48966e-5b14-4d9f-ae4f-6d8f30d68a2e"}
