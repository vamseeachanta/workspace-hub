---
name: openfoam
version: "1.0.0"
category: engineering
description: "OpenFOAM AI Interface Skill — case setup, CLI execution, output parsing, failure diagnosis, validation"
tags: [openfoam, cfd, simulation, meshing, solver, turbulence, multiphase, incompressible, parallel]
platforms: [linux]
invocation: openfoam
depends_on:
  - gmsh-meshing
capabilities: [input-generation, execution, output-parsing, failure-diagnosis, validation]
requires: []
see_also: [gmsh-meshing, mesh-utilities]
---

# OpenFOAM AI Interface Skill

```yaml
name: openfoam
version: 1.0.0
category: engineering/cfd
tags: [openfoam, cfd, cae, turbulence, multiphase, meshing, parallel, rans, vof]
created: 2026-02-23
updated: 2026-02-23
author: Claude
description: |
  Full AI-software interface skill for OpenFOAM v2312 (ESI release).
  Covers case setup, system dictionaries, boundary conditions, solver
  execution (serial + parallel), log parsing, post-processing, failure
  diagnosis, and validation against benchmark cases.
```

## When to Use This Skill

Use this skill when you need to:
- Set up an OpenFOAM CFD case from scratch (geometry, mesh, BCs, solver)
- Generate valid system dictionaries (controlDict, fvSchemes, fvSolution)
- Run solvers in serial or parallel (simpleFoam, pimpleFoam, interFoam)
- Parse solver logs for residuals, convergence, and Courant numbers
- Diagnose solver failures (FPE, divergence, mesh quality, BC mismatches)
- Validate results against known benchmarks (cavity, pitzDaily, damBreak)
- Convert results for visualization (foamToVTK for ParaView)

## Installation

OpenFOAM v2312 is installed at `/usr/lib/openfoam/openfoam2312/` via ESI apt repo.

```bash
# Source environment before any OpenFOAM command
source /usr/lib/openfoam/openfoam2312/etc/bashrc
```

---

## 1. INPUT GENERATION

### 1.1 Case Directory Structure

Every OpenFOAM case requires this minimum structure:

```
<case>/
    0/                          # Initial/boundary conditions
        U                       # Velocity (volVectorField)
        p                       # Pressure (volScalarField)
        k                       # Turbulent kinetic energy (if RAS/LES)
        epsilon | omega         # Dissipation (model-dependent)
        nut                     # Turbulent viscosity
    constant/
        transportProperties     # Fluid properties (nu, rho)
        turbulenceProperties    # Turbulence model selection
        polyMesh/               # Mesh (generated by blockMesh/snappyHexMesh)
    system/
        controlDict             # Run control (REQUIRED)
        fvSchemes               # Discretisation schemes (REQUIRED)
        fvSolution              # Solver settings (REQUIRED)
        blockMeshDict           # Structured mesh definition
        decomposeParDict        # Parallel decomposition
```

### 1.2 FoamFile Header

Every OpenFOAM file must begin with this header. The `class` and `object` fields must match the file type and filename.

```cpp
FoamFile
{
    version     2.0;
    format      ascii;
    class       dictionary;     // see class table below
    object      controlDict;    // must match filename
}
```

| File | class | object |
|------|-------|--------|
| controlDict, fvSchemes, fvSolution | `dictionary` | filename |
| transportProperties, turbulenceProperties | `dictionary` | filename |
| blockMeshDict, decomposeParDict | `dictionary` | filename |
| U (velocity) | `volVectorField` | `U` |
| p, k, epsilon, omega, nut | `volScalarField` | fieldname |

### 1.3 controlDict

**Steady-state (simpleFoam):**
```cpp
application     simpleFoam;
startFrom       startTime;
startTime       0;
stopAt          endTime;
endTime         2000;
deltaT          1;
writeControl    timeStep;
writeInterval   100;
purgeWrite      0;
writeFormat     ascii;
writePrecision  6;
writeCompression off;
timeFormat      general;
timePrecision   6;
runTimeModifiable true;

functions
{
    #includeFunc yPlus
    #includeFunc solverInfo
}
```

**Transient with adaptive timestep (pimpleFoam):**
```cpp
application     pimpleFoam;
startFrom       latestTime;
startTime       0;
stopAt          endTime;
endTime         10;
deltaT          0.001;
writeControl    adjustable;
writeInterval   0.1;
adjustTimeStep  yes;
maxCo           5;
runTimeModifiable yes;
```

**Multiphase (interFoam):**
```cpp
application     interFoam;
startFrom       startTime;
startTime       0;
stopAt          endTime;
endTime         1;
deltaT          0.001;
writeControl    adjustable;
writeInterval   0.05;
adjustTimeStep  yes;
maxCo           1;
maxAlphaCo      1;
maxDeltaT       1;
runTimeModifiable yes;
```

### 1.4 fvSchemes

**Steady-state RANS (simpleFoam):**
```cpp
ddtSchemes      { default steadyState; }
gradSchemes     { default Gauss linear; }
divSchemes
{
    default         none;
    div(phi,U)      bounded Gauss linearUpwind grad(U);
    turbulence      bounded Gauss limitedLinear 1;
    div(phi,k)      $turbulence;
    div(phi,epsilon) $turbulence;
    div(phi,omega)  $turbulence;
    div((nuEff*dev2(T(grad(U))))) Gauss linear;
}
laplacianSchemes { default Gauss linear corrected; }
interpolationSchemes { default linear; }
snGradSchemes   { default corrected; }
wallDist        { method meshWave; }
```

**Transient laminar (icoFoam):**
```cpp
ddtSchemes      { default Euler; }
gradSchemes     { default Gauss linear; }
divSchemes      { default none; div(phi,U) Gauss linear; }
laplacianSchemes { default Gauss linear orthogonal; }
interpolationSchemes { default linear; }
snGradSchemes   { default orthogonal; }
```

### 1.5 fvSolution

**SIMPLE (steady-state):**
```cpp
solvers
{
    p
    {
        solver          GAMG;
        tolerance       1e-06;
        relTol          0.1;
        smoother        GaussSeidel;
    }
    "(U|k|epsilon|omega|f|v2)"
    {
        solver          smoothSolver;
        smoother        symGaussSeidel;
        tolerance       1e-05;
        relTol          0.1;
    }
}
SIMPLE
{
    nNonOrthogonalCorrectors 0;
    consistent      yes;
    residualControl
    {
        p               1e-2;
        U               1e-3;
        "(k|epsilon|omega)" 1e-3;
    }
}
relaxationFactors
{
    equations
    {
        U               0.9;
        ".*"            0.9;
    }
}
```

**PIMPLE (transient):**
```cpp
solvers
{
    p     { solver GAMG; tolerance 1e-7; relTol 0.01; smoother DICGaussSeidel; }
    pFinal { $p; relTol 0; }
    "(U|k|epsilon)" { solver smoothSolver; smoother symGaussSeidel; tolerance 1e-05; relTol 0.1; }
    "(U|k|epsilon)Final" { $U; relTol 0; }
}
PIMPLE
{
    nNonOrthogonalCorrectors 0;
    nCorrectors         2;
}
```

**PISO (laminar transient):**
```cpp
solvers
{
    p     { solver PCG; preconditioner DIC; tolerance 1e-06; relTol 0.05; }
    pFinal { $p; relTol 0; }
    U     { solver smoothSolver; smoother symGaussSeidel; tolerance 1e-05; relTol 0; }
}
PISO
{
    nCorrectors     2;
    nNonOrthogonalCorrectors 0;
    pRefCell        0;
    pRefValue       0;
}
```

**Available linear solvers:** GAMG, PCG, PBiCGStab, smoothSolver.
**Available smoothers:** GaussSeidel, symGaussSeidel, DIC, DILU, DICGaussSeidel.

### 1.6 transportProperties and turbulenceProperties

**Single-phase incompressible:**
```cpp
// constant/transportProperties
transportModel  Newtonian;
nu              1e-05;          // kinematic viscosity [m^2/s]
```

**Turbulence model selection:**
```cpp
// constant/turbulenceProperties
simulationType      RAS;        // or laminar, LES
RAS
{
    RASModel        kEpsilon;   // kOmegaSST, realizableKE, SpalartAllmaras
    turbulence      on;
    printCoeffs     on;
}
```

**Required 0/ fields by turbulence model:**

| Model | Fields needed in 0/ |
|-------|---------------------|
| laminar | U, p |
| kEpsilon | U, p, k, epsilon, nut |
| kOmegaSST | U, p, k, omega, nut |
| SpalartAllmaras | U, p, nuTilda, nut |
| interFoam (add) | alpha.water, p_rgh |

### 1.7 Boundary Conditions

**Velocity (U) — dimensions [0 1 -1 0 0 0 0]:**

| Patch | BC type | Value |
|-------|---------|-------|
| Inlet (fixed) | `fixedValue` | `uniform (10 0 0)` |
| Outlet | `zeroGradient` | — |
| Wall (no-slip) | `noSlip` | — |
| 2D front/back | `empty` | — |
| Symmetry | `symmetry` | — |

**Pressure (p) — dimensions [0 2 -2 0 0 0 0] (kinematic):**

| Patch | BC type | Value |
|-------|---------|-------|
| Inlet | `zeroGradient` | — |
| Outlet (fixed) | `fixedValue` | `uniform 0` |
| Wall | `zeroGradient` | — |
| 2D front/back | `empty` | — |

**Turbulence fields — wall functions:**

| Field | Wall BC | Inlet BC | Outlet BC |
|-------|---------|----------|-----------|
| k | `kqRWallFunction` | `fixedValue` | `zeroGradient` |
| epsilon | `epsilonWallFunction` | `fixedValue` | `zeroGradient` |
| omega | `omegaWallFunction` | `fixedValue` | `zeroGradient` |
| nut | `nutkWallFunction` | `calculated` | `calculated` |

### 1.8 Dimension Vectors Reference

Format: `[kg m s K mol A cd]`

| Field | Dimensions |
|-------|-----------|
| U (velocity) | `[0 1 -1 0 0 0 0]` |
| p (kinematic) | `[0 2 -2 0 0 0 0]` |
| k | `[0 2 -2 0 0 0 0]` |
| epsilon | `[0 2 -3 0 0 0 0]` |
| omega | `[0 0 -1 0 0 0 0]` |
| nut, nu | `[0 2 -1 0 0 0 0]` |
| alpha.water | `[0 0 0 0 0 0 0]` |

### 1.9 blockMeshDict

```cpp
scale   1;
vertices
(
    (0 0 0)       // 0
    (1 0 0)       // 1
    (1 1 0)       // 2
    (0 1 0)       // 3
    (0 0 0.1)     // 4
    (1 0 0.1)     // 5
    (1 1 0.1)     // 6
    (0 1 0.1)     // 7
);
blocks
(
    hex (0 1 2 3 4 5 6 7) (20 20 1) simpleGrading (1 1 1)
);
boundary
(
    movingWall { type wall; faces ((3 7 6 2)); }
    fixedWalls { type wall; faces ((0 4 7 3) (1 2 6 5) (0 1 5 4)); }
    frontAndBack { type empty; faces ((0 3 2 1) (4 5 6 7)); }
);
```

### 1.10 decomposeParDict

```cpp
numberOfSubdomains 4;
method          scotch;         // automatic graph-based partitioning
```

Methods: `scotch` (automatic, recommended), `simple`/`hierarchical` (geometric, need `n (nx ny nz)`), `metis` (external lib).

---

## 2. EXECUTION

### 2.1 Environment Setup

```bash
source /usr/lib/openfoam/openfoam2312/etc/bashrc
```

### 2.2 Serial Workflow

```bash
# 1. Generate mesh
blockMesh

# 2. Check mesh quality
checkMesh
checkMesh -allTopology -allGeometry          # comprehensive

# 3. Initialize flow (optional, helps convergence)
potentialFoam -writephi

# 4. Run solver
simpleFoam > log.simpleFoam 2>&1             # steady-state
pimpleFoam > log.pimpleFoam 2>&1             # transient
interFoam > log.interFoam 2>&1               # multiphase
icoFoam > log.icoFoam 2>&1                   # laminar transient

# 5. Post-process
simpleFoam -postProcess -func yPlus -latestTime
foamToVTK -latestTime                        # export for ParaView
foamLog log.simpleFoam                       # extract residuals to logs/
```

### 2.3 Parallel Workflow

```bash
# 1. Decompose
decomposePar

# 2. Run in parallel
mpirun -np 4 simpleFoam -parallel > log.simpleFoam 2>&1

# 3. Reconstruct
reconstructPar -latestTime                   # latest time only
reconstructPar                               # all times

# 4. Cleanup processor directories (after reconstruction)
rm -rf processor*
```

### 2.4 Complex Geometry Workflow (snappyHexMesh)

```bash
surfaceFeatureExtract                        # extract feature edges from STL
blockMesh                                    # background mesh
decomposePar
mpirun -np 6 snappyHexMesh -overwrite -parallel
mpirun -np 6 potentialFoam -writephi -parallel
mpirun -np 6 simpleFoam -parallel > log.simpleFoam 2>&1
reconstructPar -latestTime
```

### 2.5 Multiphase Workflow (interFoam)

```bash
blockMesh
setFields                                    # initialize alpha field from setFieldsDict
interFoam > log.interFoam 2>&1
```

### 2.6 Solver Selection Guide

| Scenario | Solver | Algorithm |
|----------|--------|-----------|
| Steady incompressible RANS | simpleFoam | SIMPLE |
| Transient incompressible | pimpleFoam | PIMPLE |
| Transient laminar | icoFoam | PISO |
| VOF multiphase | interFoam | PIMPLE |
| Potential flow init | potentialFoam | — |
| Compressible | rhoSimpleFoam | SIMPLE |
| Buoyant convection | buoyantSimpleFoam | SIMPLE |

### 2.7 Key CLI Flags

| Flag | Purpose |
|------|---------|
| `-case <dir>` | Specify case directory |
| `-parallel` | Run in parallel (after decomposePar) |
| `-postProcess` | Execute function objects only |
| `-latestTime` | Process latest time directory only |
| `-overwrite` | Overwrite existing mesh (snappyHexMesh) |
| `-writephi` | Write flux field (potentialFoam) |
| `-dry-run` | Check setup without running |

---

## 3. OUTPUT PARSING

### 3.1 Solver Log Residual Format

Each iteration produces lines in this format:
```
smoothSolver:  Solving for Ux, Initial residual = 0.0118755, Final residual = 0.000302581, No Iterations 1
GAMG:  Solving for p, Initial residual = 0.150883, Final residual = 0.00896498, No Iterations 3
```

**Regex for extraction:**
```python
import re
pattern = r'^(\w+):\s+Solving for (\w+), Initial residual = ([0-9.e+-]+), Final residual = ([0-9.e+-]+), No Iterations (\d+)'
# Groups: solver_name, field_name, initial_residual, final_residual, iterations
```

**Time step markers:**
```
Time = 150                    # steady: iteration number
Time = 0.0345                 # transient: physical time
```

**Courant number (transient only):**
```
Courant Number mean: 0.123 max: 0.987
```

**Continuity errors:**
```
time step continuity errors : sum local = 1.23e-07, global = -2.34e-15, cumulative = -5.67e-14
```

**Convergence marker (SIMPLE):**
```
SIMPLE solution converged in 285 iterations
```

**End marker:** `End`

### 3.2 foamLog Utility

```bash
foamLog log.simpleFoam
# Creates logs/ directory with per-field residual files:
#   logs/p_0          — initial residual for p
#   logs/Ux_0         — initial residual for Ux
#   logs/k_0          — initial residual for k
#   logs/contLocal_0  — local continuity error
#   logs/contGlobal_0 — global continuity error
# Format: two columns (iteration, value)
```

### 3.3 Python Log Parsing

```python
import re
from pathlib import Path

def parse_openfoam_log(log_path):
    """Parse OpenFOAM solver log and extract residuals per field."""
    residuals = {}
    time_step = 0
    pattern = re.compile(
        r'(\w+):\s+Solving for (\w+), '
        r'Initial residual = ([0-9.e+-]+), '
        r'Final residual = ([0-9.e+-]+), '
        r'No Iterations (\d+)'
    )
    time_pattern = re.compile(r'^Time = ([0-9.e+-]+)')

    for line in Path(log_path).read_text().splitlines():
        time_match = time_pattern.match(line)
        if time_match:
            time_step = float(time_match.group(1))
            continue
        match = pattern.search(line)
        if match:
            field = match.group(2)
            if field not in residuals:
                residuals[field] = []
            residuals[field].append({
                'time': time_step,
                'initial': float(match.group(3)),
                'final': float(match.group(4)),
                'iterations': int(match.group(5)),
            })
    return residuals
```

### 3.4 postProcessing/ Directory

Function objects write to `postProcessing/<name>/<startTime>/`:

| Function Object | Output File | Content |
|-----------------|-------------|---------|
| `yPlus` | `yPlus/0/yPlus.dat` | Wall y+ values |
| `solverInfo` | `solverInfo/0/solverInfo.dat` | Residuals per timestep |
| `forceCoeffs` | `forceCoeffs/0/coefficient.dat` | Cd, Cl, Cm vs time |
| `probes` | `probes/0/p`, `probes/0/U` | Field values at probe points |
| `fieldMinMax` | `fieldMinMax/0/fieldMinMax.dat` | Min/max per field |

### 3.5 checkMesh Output

Key lines to parse:
```
Max aspect ratio = 5.08 OK.
Mesh non-orthogonality Max: 45.2 average: 12.3
Max skewness = 0.127 OK.
Min volume = 4.2e-11. Max volume = 1.68e-09.
Mesh OK.                                    # or: Failed N mesh checks.
```

### 3.6 Exit Codes

| Code | Meaning |
|------|---------|
| 0 | Success (`End` printed) |
| 1 | FOAM FATAL ERROR or FOAM FATAL IO ERROR |
| 134 | SIGABRT — assertion failure |
| 136 | SIGFPE — floating point exception |
| 139 | SIGSEGV — memory / corrupted mesh |
| 137 | SIGKILL — out of memory (OOM killer) |
| 255 | MPI error / decomposition mismatch |

---

## 4. FAILURE DIAGNOSIS

### 4.1 Error Message Format

```
--> FOAM FATAL ERROR:
    <description>
    From function <Class>::<method>
    in file <source.C> at line <N>.
FOAM exiting
```

### 4.2 Common Failures and Fixes

**1. Floating Point Exception (exit code 136)**

| Cause | Diagnosis | Fix |
|-------|-----------|-----|
| Courant number too high | Check `Courant Number max:` in log | Enable `adjustTimeStep yes; maxCo 1;` or reduce `deltaT` |
| Poor mesh quality | Run `checkMesh -allTopology -allGeometry` | Fix cells with non-orthogonality > 70, negative volumes |
| Zero/negative k or epsilon | Check 0/ initial values | Set k > 0 and epsilon > 0 everywhere |
| Bad turbulence initialization | Residuals blow up immediately | Start laminar, then switch to turbulent |

**2. GAMG Solver Divergence**

Symptoms: p residuals stuck near 1.0, or oscillating without decreasing.

| Cause | Fix |
|-------|-----|
| Mesh too coarse | Refine mesh at critical regions |
| Bad relaxation factors | Reduce: p from 0.3 to 0.2, U from 0.7 to 0.5 |
| Non-orthogonal mesh | Increase `nNonOrthogonalCorrectors` to 1-3 |
| GAMG agglomeration failure | Switch to `solver PCG; preconditioner DIC;` for p |

**3. Missing Field/File**

```
FOAM FATAL IO ERROR: cannot find file ... /0/k
```

Fix: ensure all fields required by the turbulence model exist in 0/. See table in Section 1.6.

**4. Boundary Condition Mismatch**

```
FOAM FATAL ERROR: patch type 'xxx' not constraint type ... for patch yyy
```

Fix: patch types in 0/ files must match boundary types in `constant/polyMesh/boundary`. If mesh defines `empty`, all field files must use `empty` for that patch.

**5. Courant Number Blowup (transient)**

```
Courant Number mean: 0.5 max: 150.3
```

| Solver | Acceptable maxCo |
|--------|-------------------|
| icoFoam (PISO) | < 1 (strict) |
| interFoam (VOF) | maxCo < 1, maxAlphaCo < 1 |
| pimpleFoam (nOuterCorrectors > 1) | up to 5-10 |

**6. Convergence Stall (simpleFoam)**

Residuals plateau or oscillate without decreasing.

| Action | How |
|--------|-----|
| Reduce relaxation | U: 0.5-0.7, p: 0.2-0.3 |
| Enable consistent SIMPLE | `consistent yes;` in SIMPLE dict |
| Initialize with potentialFoam | `potentialFoam -writephi` before simpleFoam |
| Check BCs | Ensure mass balance (inlet flux = outlet flux) |

**7. Out of Memory (exit code 137)**

| Action | How |
|--------|-----|
| Reduce mesh | Coarsen or reduce refinement levels |
| Use parallel | `decomposePar` + `mpirun -np N` distributes memory |
| Use binary write | `writeFormat binary;` in controlDict |
| Increase swap | System-level: `sudo fallocate -l 8G /swapfile` |

**8. Parallel Decomposition Errors (exit code 255)**

| Symptom | Fix |
|---------|-----|
| `numberOfSubdomains` mismatch | Must match `-np N` in mpirun |
| Missing processor directories | Run `decomposePar` first |
| Inconsistent mesh across processors | Re-run `decomposePar` |

**9. snappyHexMesh Failures**

| Symptom | Fix |
|---------|-----|
| Empty mesh after castellated step | Check `locationInMesh` is inside domain, not inside geometry |
| Feature edge artifacts | Increase `nFeatureSnapIter` to 10-20 |
| Layer addition failure | Reduce `nSurfaceLayers`, increase `minThickness` |
| STL not found | Check path in `geometry {}` block, use `triSurfaceMesh` type |

**10. Dimension Mismatch**

```
FOAM FATAL ERROR: dimensions not compatible
```

Fix: check `dimensions` line in 0/ field files against the reference table (Section 1.8). Common mistake: using absolute pressure dimensions `[1 -1 -2 0 0 0 0]` instead of kinematic `[0 2 -2 0 0 0 0]` for incompressible solvers.

### 4.3 Mesh Quality Thresholds

| Metric | OK | Warning | Fail |
|--------|-----|---------|------|
| Non-orthogonality max | < 65 | 65-80 | > 80 |
| Skewness | < 4 | 4-10 | > 10 |
| Aspect ratio | < 100 | 100-1000 | > 1000 |
| Min volume | > 0 | near 0 | < 0 (inverted) |
| Min determinant | > 0.001 | 0.0001-0.001 | < 0 |

---

## 5. VALIDATION

### 5.1 y+ Verification

```bash
# Compute y+ post-hoc
simpleFoam -postProcess -func yPlus -latestTime
```

Or add to controlDict:
```cpp
functions { #includeFunc yPlus }
```

**Target y+ ranges:**

| Approach | y+ target | When to use |
|----------|-----------|-------------|
| Wall-resolved (low-Re) | < 1 | Accurate wall heat transfer, separation |
| Wall functions (high-Re) | 30-300 | Industrial flows, coarser meshes |
| Buffer layer (avoid) | 5-30 | Neither model accurate here |

### 5.2 Mass Conservation

Parse continuity errors from log:
```
time step continuity errors : sum local = 1.23e-07, global = -2.34e-15, cumulative = -5.67e-14
```

| Metric | Acceptable |
|--------|-----------|
| sum local | < 1e-4 (typical: 1e-6 to 1e-8) |
| global | < 1e-10 (should be near machine precision) |
| cumulative | Should not grow unbounded |

### 5.3 Residual Convergence Criteria

**Steady-state (simpleFoam):**

| Field | Typical target | Tight target |
|-------|---------------|-------------|
| p | initial residual < 1e-4 | < 1e-5 |
| U | initial residual < 1e-4 | < 1e-5 |
| k, epsilon, omega | initial residual < 1e-4 | < 1e-5 |

Convergence: residuals should decrease monotonically. Oscillating residuals indicate numerical issues.

**Transient:** Final residuals within each time step should reach solver tolerance. Initial residuals should not grow over successive time steps.

### 5.4 Benchmark Cases

Available locally at `/usr/lib/openfoam/openfoam2312/tutorials/`:

**Lid-Driven Cavity (icoFoam):**
```bash
# Path: tutorials/incompressible/icoFoam/cavity/cavity/
blockMesh && icoFoam
# Validates: PISO, basic BCs
# Expected: single primary vortex at Re=100, compare with Ghia et al. (1982)
```

**Backward-Facing Step — pitzDaily (simpleFoam):**
```bash
# Path: tutorials/incompressible/simpleFoam/pitzDaily/
blockMesh && simpleFoam
# Validates: SIMPLE, k-epsilon turbulence, wall functions
# Expected: reattachment at ~6-7 step heights downstream
```

**Dam Break (interFoam):**
```bash
# Path: tutorials/multiphase/interFoam/laminar/damBreak/damBreak/
blockMesh && setFields && interFoam
# Validates: VOF, free surface, interFoam
```

**motorBike (simpleFoam + snappyHexMesh):**
```bash
# Path: tutorials/incompressible/simpleFoam/motorBike/
# Full parallel workflow with snappyHexMesh
# Validates: complex geometry meshing, parallel execution, force coefficients
```

### 5.5 Function Objects for Monitoring

Include in controlDict `functions {}`:

| Name | Purpose |
|------|---------|
| `#includeFunc yPlus` | Wall y+ field |
| `#includeFunc CourantNo` | Courant number field |
| `#includeFunc fieldMinMax` | Min/max of all fields |
| `#includeFunc solverInfo` | Residual data per timestep |
| `#includeFunc wallShearStress` | Wall shear stress |
| `#includeFunc vorticity` | Vorticity field |
| `#includeFunc Q` | Q criterion for vortex identification |

All function object templates at: `/usr/lib/openfoam/openfoam2312/etc/caseDicts/postProcessing/`

### 5.6 Export for ParaView

```bash
foamToVTK                                # all times -> VTK/ directory
foamToVTK -latestTime                    # latest only
foamToVTK -fields '(U p)'               # specific fields
foamToVTK -time '100:200'               # time range
```

---

## 6. INTEGRATION

### 6.1 Upstream: Gmsh to OpenFOAM

```bash
# Convert Gmsh mesh to OpenFOAM format
gmshToFoam mesh.msh
# Check and fix orientation
checkMesh
# If needed: renumber for performance
renumberMesh -overwrite
```

### 6.2 Upstream: FreeCAD/CAD to OpenFOAM

```bash
# Export STL from FreeCAD/CAD
# Place STL in constant/triSurface/
# Use snappyHexMesh for mesh generation around geometry
```

### 6.3 Downstream: OpenFOAM to ParaView

```bash
foamToVTK -latestTime
# Open VTK/case.vtm in ParaView
# Or open the case directly: paraFoam (if paraview-openfoam plugin installed)
```

### 6.4 Python Integration (meshio)

```python
import meshio
# Read OpenFOAM mesh
mesh = meshio.read("constant/polyMesh")
# Convert to other formats
meshio.write("output.vtu", mesh)
```
