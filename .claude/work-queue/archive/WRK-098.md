---
id: WRK-098
title: "Clean up 7.1GB large data committed to worldenergydata git history"
status: done
priority: high
complexity: high
route: C
created_at: 2026-02-08T15:00:00Z
completed_at: 2026-02-08T23:00:00Z
target_repos:
  - worldenergydata
commit: f7de948
spec_ref: specs/modules/enumerated-conjuring-cake.md
related: [WRK-067, WRK-068, WRK-097]
blocked_by: []
synced_to: []
tags: [data-governance, git-lfs, cleanup, large-files]
review:
  cross_review: not-required
  iterations: 0
  notes: "History rewrite — no code logic to cross-review"
---

# Clean Up Large Data in worldenergydata Git History

## What
Remove ~7.1GB of raw data files from worldenergydata's git history and establish proper .gitignore + pipeline regeneration patterns per DATA_RESIDENCE_POLICY.md.

## Why
OSHA data (6.6GB of CSVs and ZIPs from WRK-067) and BSEE data (526MB from WRK-068) are committed directly to regular git. This bloats the repo, makes clones extremely slow, and violates the new data commit strategy.

## Resolution (2026-02-08)

### Results
| Metric | Before | After |
|--------|--------|-------|
| `.git/` size | 4.1 GB | 177 MB |
| Blobs >5MB in history | 185+ | 0 |
| Push to GitHub | FAILS (HTTP 408) | Works |
| `.gitignore` | Broken (merge conflict) | ~60 new patterns |
| `.gitattributes` | Non-functional LFS rules | Simple binary markers |

### What was done
1. Full backup at `worldenergydata-backup-20260208`
2. Cherry-picked 11 feature branch commits onto clean branch, stripping 6.7GB data from one commit
3. Ran 6 iterative `git-filter-repo` passes to purge historical data across many directory layouts
4. Fixed `.gitignore` merge conflict, added ~60 exclusion patterns
5. Replaced `.gitattributes` LFS config with binary markers (LFS not installed)
6. Created regeneration READMEs for EPA TRI, marine safety, PHMSA data dirs
7. Force-pushed rewritten `main` to GitHub
8. Updated workspace-hub submodule pointer and pushed

### Key learning
Old repo had data in many historical path variants (`data/bsee/`, `data/modules/bsee/data/csv/production/`, `docs/legacy_bsee/`, `consolidation_backup/`, `tests/modules/bsee/data/temp_delete/`). Single filter-repo pass was insufficient — needed 6 iterative passes to discover and remove all variants.

## Acceptance Criteria
- [x] .gitignore merge conflict resolved
- [x] .gitignore rules added for all raw data > 10MB
- [x] README.md with regeneration instructions in each .gitignored data directory
- [x] Git history cleaned (git-filter-repo) to remove large blobs
- [x] .gitattributes updated (LFS removed, binary markers added)
- [ ] Pre-commit hook or CI check blocks files > 50MB without LFS (deferred — no venv)
- [ ] All data acquisition pipelines verified working (OSHA acquirer broken — DOL React SPA)
- [x] Repo clone size reduced from ~4.1GB to 177MB
