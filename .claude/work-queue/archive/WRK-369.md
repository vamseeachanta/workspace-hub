---
id: WRK-369
title: Remove agent_os references from digitalmodel .claude/ infrastructure
status: archived
completed_at: 2026-02-24T00:00:00Z
priority: low
complexity: simple
compound: false
created_at: 2026-02-23T00:00:00Z
target_repos:
  - digitalmodel
commit: 52ecd4c
spec_ref:
related: [WRK-344]
blocked_by: []
synced_to: []
plan_ensemble: false
ensemble_consensus_score: null
plan_reviewed: false
plan_approved: false
percent_complete: 100
brochure_status: n/a
---

# Remove agent_os references from digitalmodel .claude/ infrastructure

## Context
WRK-344 removed agent_os from assetutilities source code. Two active (non-legacy) files
in digitalmodel's .claude/ internal tooling still reference the old .agent-os/ pattern.

## Files to Fix

### 1. `.claude/agents/helpers/prompt_enhancement.py` (active — fix)
Lines 4–7 construct paths to `.agent-os/task_summary.md` and `.agent-os/prompt_config.yaml`.
These paths no longer exist. The references should be removed or pointed to the current
equivalent (if one exists) or the logic should be dropped entirely.

```python
self.agent_os_path = repo_path / ".agent-os"          # line 4 — remove
self.task_summary_file = self.agent_os_path / "..."   # line 5 — remove
self.prompt_config_file = self.agent_os_path / "..."  # line 6 — remove
self.agent_os_path.mkdir(parents=True, exist_ok=True) # line 7 — remove
```

### 2. `.claude/cli/main.py` (active — fix)
Line 8: `from agent_os.commands.create_module_agent import CreateModuleAgentCommand`
`agent_os` package no longer exists. This import will fail at runtime. Either remove
the import and the command that uses it, or replace with the current CLI equivalent.

## Acceptable to Leave (legacy-marked)
- `.claude/commands/legacy-scripts/verify-ai-work.py` — legacy dir, no active invocation
- `.claude/commands/legacy-scripts/ai_agent.py` — legacy dir
- `.claude/hooks/legacy/README.md` — documentation only
- `.claude/commands/legacy-scripts/README_v3*.md` — historical docs

## Acceptance Criteria
- [ ] `prompt_enhancement.py` has no `.agent-os` path references
- [ ] `cli/main.py` has no `agent_os` import
- [ ] `grep -r "agent_os" .claude/ --include="*.py" | grep -v "legacy"` returns 0 results
- [ ] Commit inside digitalmodel, then update hub submodule pointer

## Notes
- Do NOT delete the `legacy-scripts/` directory — it is intentionally retained as archive
- These are `.claude/` internal tooling files, not the installed Python package
