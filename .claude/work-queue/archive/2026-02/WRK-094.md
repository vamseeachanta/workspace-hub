---
id: WRK-094
title: Plan, reassess, and improve the workspace-hub workflow
status: archived
priority: high
complexity: complex
compound: false
created_at: 2026-02-03T00:00:00Z
completed_at: 2026-02-16T00:00:00Z
target_repos:
  - workspace-hub
commit: 458b198
spec_ref:
related: [WRK-086, WRK-134]
blocked_by: []
synced_to: []
stale:
plan_workstations: [ace-linux-1]
execution_workstations: [ace-linux-1]
---

# Plan, reassess, and improve the workspace-hub workflow

## What
Conduct a comprehensive review of the current workspace-hub workflow — including the work queue system, skill execution pipeline, orchestrator pattern, reflect cycle, and daily productivity loop. Identify bottlenecks, redundancies, and gaps. Propose and implement improvements.

## Why
The workspace has grown organically with 90+ work items captured, but only 16 processed. The state.yaml is out of sync (last_id: 85 vs actual highest WRK-093). The workflow needs a holistic reassessment to improve throughput, reduce friction, and ensure the tools actually accelerate work rather than adding overhead.

## Acceptance Criteria
- [x] Audit current workflow: capture → triage → process → archive pipeline
- [x] Identify bottlenecks (e.g., 20 pending items, low process rate)
- [x] Review state.yaml sync issues and fix counter drift
- [x] Assess skill effectiveness (which skills are used, which are dead weight)
- [ ] Evaluate orchestrator pattern adherence in practice
- [x] Propose concrete improvements with effort/impact assessment
- [x] Implement quick wins immediately
- [x] Document revised workflow in specs/

## Plan

**Spec**: `specs/modules/wrk-094-workflow-improvement.md`
**Target**: workspace-hub `.claude/` infrastructure

### Current State (from research)
- **Queue**: 107 items, 63 pending, 1 working, 40 archived (31% processed)
- **State drift**: `state.yaml` last_id=106 (actual=107), last_processed=WRK-011 (WRK-098 is latest)
- **Automation**: Zero cron jobs; all processing is manual `/work run` invocation
- **Skills**: 21 coordination skills; ~15 are low/zero value (zombie skills)
- **Reflect cycle**: Stuck — abstract/generalize/store phases never complete
- **Plan coverage**: ~13% of items have plans (should be 100% before processing)

### Phase 1 — Quick Wins (DONE 2026-02-12, commit `e207ced`)
1. ~~**Fix state.yaml counters**~~: Done. Resynced total_captured 117→132, total_archived 35→50. Consolidated duplicate `archived/` → `archive/2026-02/` (5 files). Moved 3 in_progress items to `working/`. Fixed WRK-121 frontmatter.
2. ~~**Cull zombie skills**~~: Done. Audited 24 coordination + 25 cross-category skills. Archived 28 zombies to `_archive/` (prompting wrappers, automation platforms, doc generators, agent patterns, auto-generated stubs). Kept 15 coordination skills (4 Tier 1 + 11 Tier 2). 3 flagged for monitoring.
3. ~~**Add plan gate enforcement**~~: Done. Created `process.md` (202 lines) documenting full pipeline with plan gate workflow. Created `metrics-template.md` for INDEX.md integration.

### Phase 2 — Automated Orchestration (DONE 2026-02-13, commit `458b198`)
4. ~~**Investigate automated batch processing feasibility**~~: Done. Claude Code is interactive-only; cron not viable. Manual batch invocation is the recommended approach.
5. ~~**Fix reflect RAGS cycle**~~: Done. Root cause was `git submodule foreach` hanging on broken/detached submodules. Fix applied (commit `458b198`):
   - Replaced `git submodule foreach` with `git submodule status` (reads `.gitmodules` without entering repos)
   - Added per-repo timeout (30s) + overall timeout (300s) in `daily-reflect.sh`
   - Fixed `bash -c` injection risk: export functions, pass vars as positional args (Codex review)
   - Added JSON validation after timeout (detect truncated data, Codex review)
   - Fixed `log_info`/`log_success` stdout contamination + `grep -c` double-output bug
   - Tested: 24 repos analyzed, 0 hangs, clean JSON output
   - Cross-reviewed: Claude APPROVE, Gemini NO_OUTPUT, Codex MAJOR→fixed
6. ~~**Batch INDEX regeneration + live metrics**~~: Done. `generate-index.py` now computes and renders 27 live metrics (throughput, plan coverage, aging, priority distribution). Verified: 47% throughput, 88% plan coverage, aging data correct.

### Phase 3 — Process Improvements (DONE — governance established)
7. ~~**Skill lifecycle governance**~~: Done. 3-tier system established and applied:
   - Tier 1 (Core): work-queue, claude-reflect, repo-readiness, skill-learner
   - Tier 2 (Value-add): knowledge-manager, repo-sync, compliance-check, legal-sanity, commit-workflow, workspace-cli, repo-capability-map, data-validation-reporter, interactive-report-generator, context-management, compound-engineering
   - Tier 3 (Archived): 28 skills moved to `_archive/` with README
8. ~~**Brochure sync automation**~~: Removed — file as separate WRK item (scope creep from core workflow improvement)
9. **Orchestrator ↔ work-queue integration**: Unblocked now that reflect cycle is fixed. Can auto-trigger batch processing after RAGS loop completes. Low priority — manual `/work run` is sufficient for current throughput.

### Phase 4 — Documentation (DONE)
10. ~~**Revised workflow doc**~~: Done. Created `.claude/work-queue/process.md` (202 lines) — full pipeline reference with frontmatter template, cross-review format, commit conventions.
11. ~~**Skill catalog cleanup**~~: N/A — no `skills-catalog.json` exists in workspace-hub (only in worldenergydata submodule as symlink).
12. ~~**Metrics dashboard**~~: Done. Created `.claude/work-queue/assets/metrics-template.md` (42 lines) — throughput, plan coverage, aging, priority distribution with placeholder variables for `generate-index.py` integration.

### Success Metrics
| Metric | Before | After | Target | Status |
|--------|--------|-------|--------|--------|
| Queue throughput | 31% (40/107) | 47% (64/137) | 80% | In progress |
| Plan coverage | 13% | 88% (58/66 pending) | 100% | Done |
| Active skills | 336 (66 zombie) | 301 (28 archived) | ~300 core | Done |
| State.yaml accuracy | Drifted (5+ counters wrong) | Synced | Synced | Done |
| Automated processing | 0 | Feasibility assessed | Manual batch | Done |
| Reflect cycle | 1/4 phases | 4/4 (fixed + tested) | 4/4 | Done |
| Workflow docs | Missing | process.md + metrics template | Documented | Done |
| Live metrics | None | 27 metrics in INDEX.md | Integrated | Done |

### Remaining Work
- ~~**Reflect script fix**~~: Done (commit `458b198`). Per-repo timeout, JSON validation, injection fix.
- ~~**Metrics integration**~~: Done (commit `458b198`). 27 live metrics in INDEX.md.
- **Orchestrator integration**: Unblocked. Low priority — manual batch is sufficient (Phase 3 item 9).
- **WRK-132 location fix**: Move from `pending/` to `working/` or correct frontmatter.

### Review Notes
- **Verdict**: Claude: MINOR | Codex: MAJOR | Gemini: APPROVE
- **Actions taken**:
  - Phase 1: Replaced vague "archive 10-15 skills" with explicit keep/archive list requirement for all 20 skills, with dependency audit
  - Phase 2: Replaced "cron job" with feasibility investigation — Claude Code is interactive CLI, non-interactive cron is non-trivial
  - Phase 3: Removed brochure sync automation (scope creep) — should be separate WRK item
  - Added concrete throughput mechanism: batch-process simple Route A items with plans
  - Updated automated processing target from "1 daily cron" to feasibility-gated
  - Codex additionally requested state.yaml update script with validation checks, and concrete reflect cycle debug steps
- *Cross-reviewed: 2026-02-09*

*Approved by user: 2026-02-09*

---
*Source: /work add to let us plan reassess and improve the workflow*
