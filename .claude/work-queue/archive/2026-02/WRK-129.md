---
id: WRK-129
title: "Standardize analysis reporting for each OrcaFlex structure type"
status: archived
priority: high
complexity: complex
compound: false
created_at: 2026-02-11T19:00:00Z
target_repos:
  - digitalmodel
commit:
branch: feature/WRK-129-orcaflex-reporting
spec_ref: specs/modules/wrk-129-orcaflex-analysis-reporting.md
related: [WRK-125, WRK-127, WRK-128, WRK-044, WRK-045, WRK-046]
blocked_by: []
synced_to: []
plan: inline
plan_reviewed: true
plan_approved: true
percent_complete: 100
updated_at: 2026-02-23T00:00:00Z
brochure_status:
provider: codex
provider_alt:
tags: [reporting, orcaflex, html-reports, standardization, analysis-outputs, plotly]
stale: "warning"
---
# Standardize Analysis Reporting for Each OrcaFlex Structure Type

## What
Create a standardized reporting framework for OrcaFlex analysis outputs, with per-structure-type report templates. Each structure type (pipeline, riser, jumper, mooring, installation, vessel) gets a dedicated HTML report with consistent format, standard plots, summary tables, and pass/fail checks against design criteria.

## Why
- Currently no standardized output format — results are ad-hoc scripts or raw JSON/YAML
- Engineers need consistent, auditable reports for each analysis type
- Standard templates reduce post-processing effort and ensure nothing is missed
- HTML reports (Plotly) are the project convention — interactive, self-contained, shareable
- Enables automated QA: standard outputs mean standard validation checks

## Scope
1. **Define standard output schema per structure type** — what results does each analysis produce?
2. **Report templates** — HTML report per structure type with consistent layout
3. **Standard plots** — Plotly interactive charts for each result type (time histories, envelopes, utilization)
4. **Summary tables** — key results, design checks, pass/fail status
5. **Report generator API** — `generate_report(model, results, structure_type) → HTML`
6. **Integration with existing benchmark pipeline** — reports auto-generated after analysis

## Acceptance Criteria
- [x] Standard output schema defined for at least 4 structure types (pipeline, riser, mooring, jumper)
- [x] HTML report template for each structure type with consistent header, metadata, plots, tables
- [x] Plotly interactive plots: time histories, statistical summaries, utilization envelopes, max/min tables
- [x] Pass/fail design checks embedded in reports (e.g., tension > 0, utilization < 1.0)
- [x] Report generator callable from scripts and integrated into benchmark pipeline
- [x] Reports self-contained (single HTML file with embedded Plotly CDN with SRI or inline)
- [x] At least 2 example reports generated from existing benchmark models

## Plan

> **See spec for full plan**: `specs/modules/wrk-129-orcaflex-analysis-reporting.md` (v1.4, approved)
>
> The spec is the authoritative source. Summary below for quick reference.

**Target package**: `src/digitalmodel/solvers/orcaflex/reporting/`

| Phase | Target | Key deliverable |
|---|---|---|
| **1** | `models/` + `css.py` | 12 Pydantic v2 model files; all support `model_validate(dict)`; no OrcFxAPI import |
| **2a** | `section_builders/` (§1–10) | 10 setup builder functions (`_build_header_html()` … `_build_analysis_setup_html()`) |
| **2b** | `section_builders/` (§11–17) | 7 results builder functions (`_build_static_results_html()` … `_build_appendices_html()`) |
| **3** | `renderers/` + `report_generator.py` | 5 structure-type renderers + `generate_orcaflex_report()` entry point |
| **4** | `extractors/` + pipeline wire-up | OrcFxAPI bridge — **deferrable** to follow-on WRK |

**Key constraints**:
- Models are OrcFxAPI-free — all data populated via `model_validate(dict)`
- Single-file HTML output; Plotly via CDN (`include_plotlyjs="cdn"`) by default
- Mandatory section anchors always present even when data is `None` (placeholder rendered)
- Pass/fail: `DesignCheckData.pass_fail` governs; derive `uc <= 1.0` if absent
- Subsection anchor contract: see spec §"HTML Section Inner Structure"

**Existing assets to reuse**:
- `hydrodynamics/diffraction/report_generator.py` — OrcaWave HTML/Plotly pattern
- `solvers/orcaflex/mooring_analysis/comprehensive_analysis/models.py` — Pydantic model style

## Session Log

| Date | What was done |
|------|---------------|
| 2026-02-17 | Initial spec created (v1.0) — FEA causal chain, 17 sections, data model architecture |
| 2026-02-18 | Cross-review complete (3 Codex iterations). Spec v1.3 approved. |
| 2026-02-21 | Planning session: (1) HTML section inner structure + full subsection anchor map added to spec; (2) fast OrcFxAPI extraction patterns documented (RangeGraph vectorisation, LoadSimulation reuse, governing-location-first pattern); (3) worked examples for all 5 structure types added (SCR riser, pipeline, jumper, mooring, S-lay). Spec now at v1.4. No code written yet — Phase 1 (data models) is the next task. |

## Next Session Pickup

**Start here**: Phase 1 — data models in `src/digitalmodel/solvers/orcaflex/reporting/models/`

1. Create the `reporting/` package skeleton (directories + `__init__.py` files)
2. Implement `models/report.py` — `OrcaFlexAnalysisReport` root model (all sections `Optional`)
3. Implement `models/geometry.py` — `GeometryData`, `LineProfileData`, `KeyPointData`
4. Implement `models/design_checks.py` — `DesignCheckData`, `UtilizationData`
5. Write unit tests for all models (`tests/solvers/orcaflex/reporting/test_models.py`)

Reference: `specs/modules/wrk-129-orcaflex-analysis-reporting.md` — Phase 1 checklist + data model architecture + Example 1 (SCR) for realistic field values.

---
*Source: reporting for each structure in the orcaflex module. standardize analysis outputs*

## Agentic AI Horizon

- Standardised analysis reporting for each OrcaFlex structure type is client-facing deliverable infrastructure — agents producing reports for clients depend on consistent report templates.
- Report standardisation is a design and domain decision; once templates are established, agents can generate compliant reports autonomously.
- **Disposition: invest now** — standardised report templates compound with every analysis run; building them now means all future agent-generated reports are client-ready from day one.
