---
id: WRK-177
title: 'Stop Hook: Engineering Calculation Audit Trail'
status: archived
priority: high
complexity: medium
compound: false
created_at: 2026-02-17 00:00:00+00:00
source: plan-magical-snuggling-melody
target_repos:
- workspace-hub
- worldenergydata
module: engineering
tags:
- session-lifecycle
- audit-trail
- class-society
- calculations
spec_ref: null
related:
- WRK-173
- WRK-144
- WRK-157
- WRK-170
blocked_by: []
synced_to: []
provider: claude
provider_alt: codex
plan_reviewed: true
plan_approved: true
percent_complete: 100
commit: bd0fcef
---

# WRK-177: Stop Hook — Engineering Calculation Audit Trail

## What
After sessions involving `wall_thickness`, `fatigue`, or `metocean` modules, auto-generate a calculation audit summary: inputs used, design code + edition, key results, warnings. Append to `state/engineering-audit/`. Required for project documentation and class society submissions.

## SME Discussion Required
- **Naval Architecture**: What audit fields do class societies (ABS, DNV-GL, BV) require?
- **Structural Engineering**: Should the audit capture load case combinations and safety factors?
- **All**: What format? PDF-ready markdown, or structured YAML for downstream tooling?

## Phases
- [x] Phase 1: Define audit record schema (YAML) covering wall_thickness, fatigue, metocean
- [x] Phase 2: Implement `hooks/engineering-audit.sh` — detect engineering tool calls from session log
- [x] Phase 3: Generate summary from session JSONL, write to `state/engineering-audit/`
- [x] Phase 4: Test with parametric sweep (WRK-158) and fatigue S-N (WRK-157) sessions

## Agentic AI Horizon

- Engineering calculation audit trail is essential for professional engineering accountability — agents running wall thickness and fatigue calculations must produce auditable records.
- Audit trail generation is infrastructure that compounds with every calculation session; class societies and clients expect documented calculation provenance.
- **Disposition: invest now** — calculation audit trails are a professional requirement; the stop hook pattern makes this automatic after every relevant session; implement before client deliverable work scales up.
