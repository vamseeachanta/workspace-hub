---
id: WRK-276
title: "Abstract all CP client calcs to .md reference — strip project names, keep engineering data, use as tests"
status: done
priority: high
complexity: medium
compound: false
created_at: 2026-02-20T00:00:00Z
target_repos:
  - digitalmodel
  - saipem
  - acma-projects
commit: 71bf9a241
spec_ref:
related: [WRK-271, WRK-272, WRK-269]
blocked_by: []
synced_to: []
plan_reviewed: false
plan_approved: false
percent_complete: 100
brochure_status: n/a
provider: claude
provider_alt: gemini
tags: [cathodic-protection, calc-abstraction, legal, tests, historic-calculations]
group: CP-stream
---

# Abstract All CP Client Calcs to .md Reference

## What

We have 9 validated engineering calculation documents across three repos covering multiple
CP standards and structure types. Abstract them all — strip project/company names only,
keep all engineering values — and convert to `.md` with Python `cfg` dicts. Each becomes
a direct test input for `CathodicProtection().router(cfg)`.

## Full Source Inventory

### From `digitalmodel/docs/domains/cathodic_protection/cal/` (Excel)
Also at `acma-projects/B1522/ctr-2/cal/` (source of truth with full draft history)

| # | File | Standard | Structure | Identifiers to strip |
|---|------|----------|-----------|---------------------|
| E1 | `350106-SC-EN-022-SD-000229-CTR2-0001-Rev0 CP Calculation vs. programming.xls` | DNV-RP-F103 2010 | Submarine pipeline | "350106", "Woodfibre", "WLNG", "CTR2" |
| E2 | `350106-SC-EN-022-SD-000229-CTR2-0001-Rev0 CP Calculation_correct_final_current_demand_check.xls` | DNV-RP-F103 2010 | Submarine pipeline | Same |
| E3 | `350106-DM-GE-CTR2-00002 Anode_Depth_and_Salnity (Rev 2).xlsx` | DNV-RP-F103 | Anode depth + salinity | Same |

Note: `superseded/` folder in `acma-projects/B1522/ctr-2/cal/` contains 18 draft versions
(Draft1–18) showing calc development history. `Draft12_for_python.xls` was used as
basis for the current Python implementation. These are historical records only — do NOT
abstract them; use E1/E2/E3 (final versions).

### From `saipem/general/cp/` (PDF — Yellowtail Project, ExxonMobil/Saipem)

| # | File | Standard | Structure | Identifiers to strip |
|---|------|----------|-----------|---------------------|
| S1 | `GYYT-SA-RCCAL-13-6302_4.pdf` | DNVGL-RP-F103 **2016** | Flowlines (FLET to FLET, FLET to FPSO) | "Yellowtail", "ExxonMobil", "GYYT", flowline IDs |
| S2 | `GYYT-SA-RCCAL-13-6311_0.pdf` | DNVGL-RP-B401 | Subsea riser base | Same |
| S3 | `GYYT-SA-RCCAL-13-6312_0.pdf` | DNVGL-RP-B401 | Riser base foundation | Same |
| S4 | `GYYT-SA-VRCCP-13-6845_0.pdf` | DNVGL-RP-B401 | Walking mitigation / pipe clamp mattresses | "Yellowtail", "ExxonMobil", "MMA Offshore", "GYYT" |
| S5 | `GYYT-SA-RBCTH-13-6301_1.pdf` | DNVGL-RP-B401 + F103 | Design basis — all systems (comprehensive) | "Yellowtail", "ExxonMobil", structure IDs (WI, GI) |

### From `acma-projects/B1522/ctr-2/data/` and `ctr-2/rpt/` (PDF — ACMA B1522 FST CP Design)

| # | File | Standard | Structure | Identifiers to strip |
|---|------|----------|-----------|---------------------|
| E4 | `data/350106-SC-EN-003-SD-000XXX_B_Technical Note - FSTs CP System Design Philosophy_VA.pdf` | DNV-RP-B401 **2021** + ABS GN Ships 2017 | FST (Floating Storage Terminal) hull — SACP vs ICCP comparison, 21 pages | "350106", "Woodfibre", "WLNG", "McDermott", "MDR", "CB&I" |
| E5 | `rpt/350106-SC-EN-022-SD-000051, FST-1 and FST-2 Cathodic Protection Specification rB1.pdf` | ABS GN Ships Dec 2017 primary | FST-1 & FST-2 hull CP spec — anode calculations section 4.4, 31 pages | "350106", "Woodfibre", "WLNG", "McDermott", "Alan C. McClure Associates", "Deyuan", "FST-1", "FST-2" |

Note: E4 references **DNV-RP-B401 May 2021** as primary design code — first use of 2021 edition
in our inventory. Also references CSA Z662 2023, BS EN 16222 2012, NACE AMPP SP0176 2022 — none
locally available (added to WRK-269 sourcing list).
E5 Appendix D contains the CTR2-CP Calculation RB1 (= our E1/E2 Excel) — confirms linkage.

### From `acma-projects/B1522/ctr-2/ref/proj/` (PDF — ACMA B1522 Project)

| # | File | Standard | Structure | Identifiers to strip |
|---|------|----------|-----------|---------------------|
| A8 | `2100-RPT-4005-06 Cathodic Protection Design Report _Approved_.pdf` | DNV-RP-B401:2005 + F103:2003 | Single Leg Hybrid Riser (SLHR), deepwater, 22-yr life | "PSVM", "BP Angola", "BLK31", "2100-RPT", "Aberdeen Foundry", "URF 1" |
| A9 | `3824-TNE-0008-2 (Cathodic Protection Design).pdf` | DNV-RP-B401:2005 + NACE SP0176-2007 | Free Standing Riser (FSR), temporary 6-month installation | "MC252", "CDP-1", "3824-TNE", "ACTEON", "2H Offshore", "Drill-Quip", "Intermoor" |

### Standards documents (NOT for abstraction — for WRK-269 reference only)

| File | Value |
|------|-------|
| `GP 56-01-04U_4.pdf` | ExxonMobil Global Practice implementing DNVGL-RP-F103 **2016** |
| `GP 56-01-08U_Rev1.0_external.pdf` | ExxonMobil Global Practice implementing DNVGL-RP-B401 **2017** |
| `GYFI-GP-USPDS-11-0012...pdf` | Saipem CP requirements for offshore + subsea — general spec |

## Output Map

```
digitalmodel/docs/domains/cathodic_protection/examples/
  calc-001-dnv-f103-2010-submarine-pipeline.md       # from E1/E2 (primary + check)
  calc-002-dnv-f103-2010-anode-depth-salinity.md     # from E3
  calc-003-dnvgl-f103-2016-flowline-flet-to-flet.md  # from S1
  calc-004-dnvgl-b401-subsea-riser-base.md           # from S2
  calc-005-dnvgl-b401-riser-base-foundation.md       # from S3
  calc-006-dnvgl-b401-walking-mitigation.md          # from S4
  calc-007-dnvgl-b401-f103-design-basis-all.md       # from S5 (summary inputs)
  calc-008-dnv-b401-2005-slhr-deepwater.md           # from A8 (Single Leg Hybrid Riser)
  calc-009-dnv-b401-2005-fsr-temporary.md            # from A9 (Free Standing Riser, 6-month)
  calc-010-dnv-b401-2021-fst-design-philosophy.md    # from E4 (FST hull, DNV-RP-B401 2021 primary)
  calc-011-abs-gn-ships-2017-fst-cp-specification.md # from E5 (FST-1 & FST-2 spec, ABS primary)
```

11 abstracted calc references → 11 test-ready Python cfg dicts.

## What Each .md Contains

```markdown
---
standard: DNVGL-RP-F103
edition: "2016"
structure_type: offshore_flowline
source_type: abstracted_client_calculation
discipline: cathodic_protection
---

## Input Parameters
| Parameter | Symbol | Value | Unit |

## Calculation Results (from source)
| Output | Value | Unit |

## Python cfg dict
```python
cfg = {
    "inputs": {
        "calculation_type": "DNV_RP_F103_2010",  # or equivalent
        ...all real values from the calc...
    }
}
```

## Code Validation
# Run: CathodicProtection().router(cfg)
# Expected: match source results within 1%
```

## Key Opportunities

**E1/E2** (CTR2 Excel): These calcs were the basis for the Python implementation
(`Draft12_for_python.xls` in `acma-projects/B1522/ctr-2/cal/superseded/`). Abstracting
them gives us the original validation dataset.

**S1** (GYYT-SA-RCCAL-13-6302_4): Uses **DNVGL-RP-F103 2016** — the edition our code
does NOT currently implement. Abstracting it gives us:
1. A test that documents exactly where 2016 vs 2010 diverges (if results differ)
2. Input data for WRK-272 (implement the 2016 update)

**A8** (SLHR Design Report): DNV-RP-B401:2005 for a complex hybrid riser system with
buoyancy tank, URAs, LRAs, and riser base foundation. Covers multiple anode types on
a single integrated system — the richest structural configuration in this inventory.

**A9** (FSR Design): DNV-RP-B401:2005 for a temporary 6-month FSR installation.
Unusual case — short design life with TSA coating instead of sacrificial anodes on riser.
Tests an edge case (minimal design life, coating-led protection).

## Deny List Updates

### `digitalmodel/.legal-deny-list.yaml` — add:
```yaml
  - pattern: "Woodfibre"
    case_sensitive: false
    severity: block
    description: "Client LNG project name (CTR2 Excel source)"
  - pattern: "350106"
    case_sensitive: true
    severity: block
    description: "Client project number (CTR2 Excel source)"
  - pattern: "WLNG"
    case_sensitive: true
    severity: block
    description: "Woodfibre LNG abbreviation"
```

### `saipem/.legal-deny-list.yaml` — create with:
```yaml
version: "1.0"
updated: "2026-02-20"
client_references:
  - pattern: "Yellowtail"
    case_sensitive: false
    severity: block
    description: "ExxonMobil Yellowtail deepwater project (Guyana)"
  - pattern: "ExxonMobil"
    case_sensitive: false
    severity: block
    description: "Client operator name"
  - pattern: "MMA Offshore"
    case_sensitive: false
    severity: block
    description: "Sub-contractor name on CP vendor report"
  - pattern: "YT-O-21-03"
    case_sensitive: true
    severity: block
    description: "Contract reference number"
exclusions:
  - ".legal-deny-list.yaml"
  - ".git/"
```

### `acma-projects/.legal-deny-list.yaml` — create with:
```yaml
version: "1.0"
updated: "2026-02-20"
client_references:
  - pattern: "350106"
    case_sensitive: true
    severity: block
    description: "Client project number (CTR2 / Woodfibre LNG)"
  - pattern: "Woodfibre"
    case_sensitive: false
    severity: block
    description: "Client LNG project name"
  - pattern: "WLNG"
    case_sensitive: true
    severity: block
    description: "Woodfibre LNG abbreviation"
  - pattern: "PSVM"
    case_sensitive: true
    severity: block
    description: "BP Angola deepwater project name"
  - pattern: "BP Angola"
    case_sensitive: false
    severity: block
    description: "Client operator name (Angola)"
  - pattern: "BLK31"
    case_sensitive: true
    severity: block
    description: "Block 31 project reference (Angola)"
  - pattern: "MC252"
    case_sensitive: true
    severity: block
    description: "Gulf of Mexico platform identifier"
  - pattern: "CDP-1"
    case_sensitive: true
    severity: block
    description: "Gulf of Mexico platform identifier"
  - pattern: "Aberdeen Foundry"
    case_sensitive: false
    severity: block
    description: "Anode supplier name in SLHR CP report"
  - pattern: "ACTEON"
    case_sensitive: true
    severity: block
    description: "Engineering contractor name"
  - pattern: "Novolastic"
    case_sensitive: true
    severity: block
    description: "Proprietary thermal insulation system name"
  - pattern: "McDermott"
    case_sensitive: false
    severity: block
    description: "Engineering contractor (MDR) on FST project"
  - pattern: "CB&I"
    case_sensitive: true
    severity: block
    description: "CB&I LLC / Chicago Bridge & Iron (now McDermott) — document copyright holder"
  - pattern: "Alan C. McClure"
    case_sensitive: false
    severity: block
    description: "Anode specification supplier on FST project"
  - pattern: "Deyuan"
    case_sensitive: true
    severity: block
    description: "Chinese anode manufacturer named in FST spec"
  - pattern: "FST-1"
    case_sensitive: true
    severity: block
    description: "Floating Storage Terminal vessel identifier"
  - pattern: "FST-2"
    case_sensitive: true
    severity: block
    description: "Floating Storage Terminal vessel identifier"
exclusions:
  - ".legal-deny-list.yaml"
  - ".git/"
```

## Processing Order

Start with E1/E2 (Excel — simplest format, Python-readable) to validate the workflow,
then S5 (design basis PDF — most comprehensive), then A8 (richest structural config),
then S1-S4 and A9 (individual calc notes).

## Enhancement Gap Protocol

If any calc reveals a methodology or structure type not in `cathodic_protection.py`:
- Document the gap in the `.md` under `## Gaps Found`
- Create a child WRK item: "WRK-2xx: Implement [gap] for `cathodic_protection.py`"
- Do NOT implement inline — follow the plan gate

## Acceptance Criteria

- [ ] All 3 Excel sources read and data extracted (E1, E2, E3)
- [ ] All 5 Saipem PDF sources read and data extracted (S1–S5)
- [ ] Both ACMA B1522 PDF sources read and data extracted (A8, A9)
- [ ] 9 `.md` files created in `digitalmodel/docs/domains/cathodic_protection/examples/`
- [ ] Each `.md` has: standard+edition, inputs table, results table, Python `cfg` dict
- [ ] `digitalmodel/.legal-deny-list.yaml` updated: "Woodfibre", "350106", "WLNG"
- [ ] `saipem/.legal-deny-list.yaml` created: "Yellowtail", "ExxonMobil", "MMA Offshore", "YT-O-21-03"
- [ ] `acma-projects/.legal-deny-list.yaml` created: "350106", "PSVM", "BP Angola", "BLK31", "MC252", "CDP-1", etc.
- [ ] Legal scan passes on all outputs: `bash scripts/legal/legal-sanity-scan.sh --repo=digitalmodel`
- [ ] Each `cfg` dict verified: `CathodicProtection().router(cfg)` runs without error
- [ ] Gaps identified and captured as child WRK items (block count may be 0 or more)
- [ ] WRK-269 noted: GP 56-01-04U (F103 2016) and GP 56-01-08U (B401 2017) available as standards reference

## Agentic AI Horizon

- 9 validated historic calcs → 9 regression tests → code is tested against real engineering work
- S1 (F103 2016) directly informs WRK-272 scope; S2-S4, A8 (B401) directly feed offshore platform
- A9 (6-month FSR) tests short design-life edge case — unusual scenario for the code
- Once abstracted, this calc library grows with every new project — the pattern compounds
- **Disposition: do now — Route B; start with Excel (E1-E3), then A8 (richest config), then PDFs**

---
*Source: CP stream review 2026-02-20 — 9 validated calc docs found across digitalmodel + saipem + acma-projects;
covers DNV-RP-F103 2010+2016, DNV-RP-B401 2005, multiple structure types including SLHR and FSR*
