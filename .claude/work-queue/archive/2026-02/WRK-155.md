---
id: WRK-155
title: "DNV-ST-F101 submarine pipeline wall thickness — WSD and LRFD methods"
status: done
priority: high
complexity: complex
created_at: 2026-02-16T00:00:00Z
target_repos:
  - digitalmodel
target_module: structural
commit: 74bd37f86
spec_ref:
related: [WRK-044, WRK-144, WRK-145]
blocked_by: []
plan_reviewed: true
plan: inline
plan_approved: true
percent_complete: 100
brochure_status: n/a
provider: claude
provider_alt:
---

# DNV-ST-F101 Submarine Pipeline Wall Thickness

## What
Implement DNV-ST-F101 (Submarine Pipeline Systems) wall thickness design checks using both WSD and LRFD methods. This is the most widely used offshore pipeline design code globally and was the original Phase 1 of WRK-044 but was never implemented — the focus shifted to API RP 1111 instead.

## Why
- DNV-ST-F101 is the dominant code for submarine pipelines worldwide
- API RP 1111 (WRK-044) and API RP/STD 2RD (WRK-144) are already implemented
- The framework (DesignCode enum, @register_code, edition versioning from WRK-145) is proven and ready
- Completing this makes the wall thickness module commercially viable for most offshore pipeline projects

## Acceptance Criteria
- [ ] DNV-ST-F101 strategy class registered with @register_code
- [ ] Burst (hoop stress) check per Section 5.4.2
- [ ] Collapse (external pressure) check per Section 5.4.3
- [ ] Propagation buckling check per Section 5.4.4
- [ ] Combined loading (M-T-P interaction) check per Section 5.4.5
- [ ] LRFD load/resistance factors as configurable edition-aware data structure
- [ ] At least 2 editions supported (2007, 2021)
- [ ] HTML report section for DNV-ST-F101 conditions
- [ ] Tests with known reference values from published examples
- [ ] Comparison report: DNV-ST-F101 vs API RP 1111 for same pipe

## Plan

**Target**: `src/digitalmodel/structural/analysis/wall_thickness_codes/dnv_st_f101.py` (extend existing)

### Existing Assets (reuse)
| Component | Path | Purpose |
|-----------|------|---------|
| DNV-ST-F101 strategy | `wall_thickness_codes/dnv_st_f101.py` (7.7 KB) | 4 checks already implemented |
| Edition pattern | `wall_thickness_codes/api_rp_1111.py` | CodeEdition + EDITION_FACTORS template |
| M-T report | `wall_thickness_mt_report.py` (53 KB) | CONDITIONS_BY_CODE mapping |
| DesignCode enum | `wall_thickness.py:33-40` | DNV_ST_F101 already registered |
| Test suite | `tests/test_wall_thickness*.py` | 214 existing tests |

### Phase 1 — Edition Versioning
- Add `EDITION_FACTORS` dict for 2007 and 2021 editions (gamma_m, gamma_SC per safety class)
- Add `EDITION_METADATA` with `CodeEdition` dataclass entries
- Add `__init__(self, edition=None)` following `api_rp_1111.py` template
- Default to `LATEST_EDITION = 2021`
- Refactor existing check methods to use `self._factors` instead of hardcoded values

### Phase 2 — M-T Report Integration
- Add `DNV_ST_F101_CONDITIONS` to `CONDITIONS_BY_CODE` mapping in `wall_thickness_mt_report.py`:
  - Low Safety Class (gamma_SC=1.046)
  - Medium Safety Class (gamma_SC=1.138)
  - High Safety Class (gamma_SC=1.308)
- Verify M-T report generates correctly with DNV code

### Phase 3 — Comparison Report
- Create comparison function: same pipe through API RP 1111 + DNV-ST-F101
- Generate side-by-side HTML report showing t_min, utilization, governing condition per code
- Reuse `generate_mt_report()` pattern, parameterized by code

### Phase 4 — Tests
- Edition tests: default=latest, explicit lookup, different editions produce different results
- Burst/collapse/propagation/combined against published DNV examples
- M-T report generation with DNV code
- Comparison report output validation
- Target: 30+ new tests

### Test Strategy
- TDD: write failing tests first per check type
- Reference: DNV-ST-F101:2021 worked examples (Section 5 appendices)
- Run: `PYTHONPATH="src:../assetutilities/src" python3 -m pytest tests/test_wall_thickness*.py -v --tb=short --noconftest`

### Dependencies
- No external software — pure Python
- DNV-ST-F101:2021 standard for reference values

## Notes
- Follow the @register_code + CONDITIONS_BY_CODE + EDITION_FACTORS pattern from WRK-144/145
- Reference existing PipeCapacity.py in asset_integrity module (may have partial DNV implementation)
- DNV-ST-F101 uses material resistance factor (gamma_m), safety class factor (gamma_SC) — different structure from API codes

## Implementation Notes (2026-02-16)

### Files Modified
- `src/digitalmodel/structural/analysis/wall_thickness_codes/dnv_st_f101.py` — added EDITION_FACTORS (2007, 2021), EDITION_METADATA, __init__(edition=None), get_edition_factors(); refactored f_y, f_u, f_0 from hardcoded to self._factors
- `src/digitalmodel/structural/analysis/wall_thickness_mt_report.py` — added DNV_ST_F101_CONDITIONS (Low/Medium/High safety class) to CONDITIONS_BY_CODE
- `tests/test_wall_thickness_dnv_editions.py` — 39 new tests (8 test classes)

### Test Results
- 39/39 new DNV edition tests pass
- 325/325 total wall thickness tests pass (zero regressions)

### Key Design Decisions
- Edition versioning stores f_y, f_u, f_0 (material/geometry defaults) in EDITION_FACTORS; gamma_SC/gamma_m still come from DesignFactors parameter
- 2007 edition: gamma_SC Low=1.04, Medium=1.14, High=1.26 (DNV-OS-F101)
- 2021 edition: gamma_SC Low=1.046, Medium=1.138, High=1.308 (DNV-ST-F101)
- M-T report conditions use f_d = 1/(gamma_SC * gamma_m): Low=0.831, Medium=0.764, High=0.665
- Three-way comparison report (DNV vs API RP 1111 vs API 2RD) already available via WRK-159
