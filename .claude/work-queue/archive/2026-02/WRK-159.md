---
id: WRK-159
title: Batch plan approval — review multiple plans in one pass
status: archived
priority: medium
complexity: moderate
compound: false
created_at: 2026-02-16T19:30:00Z
target_repos:
  - workspace-hub
commit: c9179ef
spec_ref:
related: [WRK-094, WRK-118]
blocked_by: []
synced_to: []
provider: claude
---

## What

Add a batch approval command that lets the user review and approve multiple WRK plans in a single pass, reducing the approval bottleneck.

## Why

Only 3 of 44 pending items are user-approved (7%). The per-item approval flow creates friction when many items have plans ready. A batch mode lets the user scan summaries and approve/reject in bulk.

## Acceptance Criteria

- [ ] New command: `/work approve-batch` (or `work.sh --provider claude approve-batch`)
- [ ] Lists all pending items that have `## Plan` section but `plan_approved` is not `true`
- [ ] For each item, displays: WRK-ID, title, complexity, 1-line plan summary (first line of ## Plan)
- [ ] User can approve all, reject all, or select individual items
- [ ] Approved items get `plan_approved: true` written to frontmatter
- [ ] Rejected items get `plan_rejected: true` with optional reason field
- [ ] Output: summary count of approved/rejected/skipped
- [ ] Tests: batch with mixed approve/reject, empty batch (no eligible items), idempotency

## Plan

### Phase 1: Discovery
1. Add `list_approvable_items()` to `workflow-guards.sh` — scans `pending/` and `working/` for items with `## Plan` but no `plan_approved: true`
2. Extract 1-line summary from plan section for display

### Phase 2: Batch command
3. Add `approve-batch` subcommand to `work.sh`
4. Interactive mode: present numbered list, accept comma-separated selections or `all`/`none`
5. For each selected item: call `wrk_set_frontmatter_value` to set `plan_approved: true`

### Phase 3: Integration
6. Register as skill command if interactive mode desired
7. Add non-interactive mode (`--approve-all`) for automation pipelines

### Phase 4: Testing
8. Test with 3 eligible items (approve 2, skip 1)
9. Test with 0 eligible items (clean exit)
10. Test idempotency (re-run after approval)

*Promoted from workflow-visual.html section 7 refinement candidates (2026-02-16)*
