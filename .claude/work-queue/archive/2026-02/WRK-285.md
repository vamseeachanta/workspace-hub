---
id: WRK-285
title: "Write active WRK id to state file on working/ transition"
status: completed
priority: high
complexity: simple
compound: false
created_at: 2026-02-21T00:00:00Z
target_repos:
  - workspace-hub
related: [WRK-284, WRK-286]
blocked_by: []
---

# Write active WRK id to state file on working/ transition

## What

No hook currently tracks which WRK item is "in scope" for a session. Downstream
hooks (readiness, traceability) must scan `working/` to infer this, which is
slow and unreliable when multiple items exist.

Create `.claude/state/active-wrk` as the single source of truth for the active
WRK id. This unblocks WRK-284 and WRK-286.

## Plan (Route A)

1. Add `set-active-wrk.sh` helper script â€” writes WRK id to state file
2. Agent (or skill) calls this when moving a WRK item to `working/` status
3. `wrk-traceability-check.sh` reads state file instead of scanning `working/`
4. `ensure-readiness.sh` clears state file at session end

## Acceptance Criteria

- [ ] `scripts/work-queue/set-active-wrk.sh <WRK-NNN>` writes id to `.claude/state/active-wrk`
- [ ] `scripts/work-queue/clear-active-wrk.sh` clears the file
- [ ] `wrk-traceability-check.sh` reads state file first, falls back to `working/` scan
- [ ] `ensure-readiness.sh` calls `clear-active-wrk.sh` at session end
- [ ] `/work` skill calls `set-active-wrk.sh` when transitioning to working status

## Implementation Notes

State file path: `${WORKSPACE_HUB}/.claude/state/active-wrk`
Format: single line, e.g. `WRK-284`
Add to `.gitignore` (session-local, not committed).
