---
id: WRK-268
title: "Wire ENIGMA safety skill to real HSE incident database for data-driven scoring"
status: archived
priority: medium
complexity: medium
compound: false
created_at: 2026-02-20T00:00:00Z
target_repos:
  - worldenergydata
target_module: safety_analysis
commit:
spec_ref:
related: [WRK-249, WRK-250]
blocked_by: []
plan: inline
plan_reviewed: false
plan_approved: false
percent_complete: 100
provider: claude
---
# Wire ENIGMA Safety Skill to Real HSE Incident Data

## Why

`enigma_safety_analysis()` (WRK-249) uses a rule-based risk matrix with fixed constants.
The `hse` module and `marine_safety` module contain real incident data that could calibrate
these risk scores empirically â€” e.g. actual corrosion incident rates per asset type from
BSEE HSE records, real structural failure frequencies from marine safety databases.

## What

- Load BSEE HSE incident data + marine safety cross-database incidents
- Compute empirical risk scores per (asset_type, scenario) pair
- Add `EnigmaCalibrator.fit(hse_df, marine_df)` that produces calibrated risk matrix
- Expose `enigma_safety_analysis(..., calibrated=True)` to use data-driven scores
- Document which asset_type/scenario combos have sufficient data vs. default to rule-based

## Acceptance Criteria
- [ ] `EnigmaCalibrator.fit()` produces calibrated risk matrix
- [ ] `enigma_safety_analysis(asset_type, scenario, calibrated=True)` uses real-data scores
- [ ] Fallback to rule-based when insufficient data (< 10 incidents)
- [ ] Coverage report: which combos are data-driven vs rule-based
- [ ] 20+ tests
