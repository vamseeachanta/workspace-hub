---
id: WRK-260
title: "Cross-regional production data query interface — unified layer across all 8 basins"
status: done
priority: high
complexity: moderate
compound: false
created_at: 2026-02-20T00:00:00Z
target_repos:
  - worldenergydata
target_module: production.unified
commit: e53cfca
spec_ref:
related: [WRK-084, WRK-190, WRK-193, WRK-194, WRK-195, WRK-259]
blocked_by: []
plan: inline
plan_reviewed: false
plan_approved: false
percent_complete: 100
provider: claude
---

# Cross-Regional Production Data Query Interface

## Why

8 production data modules now exist (bsee, sodir, brazil_anp, ukcs, mexico_cnh,
texas_rrc, canada, eia_us) but they are all isolated — no unified query layer.
The metocean module got this in WRK-084. Production data needs the same.

## What

Build `src/worldenergydata/production/unified/`:

```python
from worldenergydata.production.unified import ProductionQuery, UnifiedProductionClient

result = UnifiedProductionClient().query(
    ProductionQuery(
        regions=["ncs", "ukcs", "brazil", "gom"],
        fields=["Buzzard", "Edvard Grieg", "Lula"],  # optional filter
        start="2020-01",
        end="2024-12",
        parameters=["oil_bbl", "gas_mcf", "water_bbl"],
    )
)
# result.data: pd.DataFrame columns: region, field, year, month, oil_bbl, gas_mcf, water_bbl, source
# result.summary: peak production, cumulative, decline rate per field
```

## Module Structure

```
src/worldenergydata/production/
  __init__.py
  unified/
    __init__.py
    query.py           # ProductionQuery + ProductionResult dataclasses
    router.py          # RegionRouter: maps region → module adapter
    adapters/
      __init__.py
      base.py          # AbstractProductionAdapter
      sodir_adapter.py
      bsee_adapter.py
      brazil_anp_adapter.py
      ukcs_adapter.py
      eia_us_adapter.py
      mexico_cnh_adapter.py
      texas_rrc_adapter.py
      canada_adapter.py
    normalizer.py      # Standardise schema + units via common.units
    cross_basin.py     # Cross-basin comparison: peak, EUR, decline, fiscal NPV
```

## Standard Output Schema

All adapters must normalise to:
```
region: str          # "ncs", "ukcs", "brazil", "gom", "eia_us", "mexico", "texas", "canada"
field_name: str      # common name
year: int
month: int           # 0 if annual-only data
oil_bbl: float       # converted via common.units
gas_mcf: float
water_bbl: float
condensate_bbl: float
source: str          # "sodir", "nsta", "anp", "bsee", "eia", "mexico_cnh", "rrc", "aer"
```

## Acceptance Criteria
- [ ] `UnifiedProductionClient.query(ProductionQuery)` → `ProductionResult`
- [ ] 8 region adapters (all returning normalised schema)
- [ ] `normalizer.py` using `common.units` for all conversions
- [ ] `cross_basin.py`: peak rate comparison, cumulative EUR, decline rate, fiscal sensitivity
- [ ] `RegionRouter`: auto-routes by region string, lists available regions
- [ ] 30+ tests (mock adapters, normalisation accuracy, cross-basin)
