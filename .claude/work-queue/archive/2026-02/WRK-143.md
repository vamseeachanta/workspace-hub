---
id: WRK-143
title: Full symmetric M-T envelope — closed polygon lens shapes
status: archived
priority: medium
complexity: simple
created_at: 2026-02-15T12:00:00Z
target_repos:
  - digitalmodel
commit: 82ca1242d
spec_ref:
related:
  - WRK-044
  - WRK-142
blocked_by: []
synced_to: []
percent_complete: 100
---
# Full symmetric M-T envelope — closed polygon lens shapes

## What
Modify the allowable bending envelope chart to show full symmetric envelopes (both +M and -M), creating closed polygon "lens" shapes for each operating condition instead of the current half-envelopes showing only positive M.

## Why
Engineers expect to see the full interaction envelope as a closed shape. The current chart only shows the upper half (+M_allow vs T), but the envelope is symmetric about M=0 for bending (flipping M sign just swaps which fibre governs). Showing the full closed polygon is standard practice in structural reports.

## Context
This is a follow-up from WRK-044 session. The `_build_envelope_chart()` function currently plots one trace per condition showing T vs +M_allow. The envelope is already computed — we just need to mirror it.

### Physics
- `_trace_envelope()` returns `(T_values, M_values)` where M_values are all positive (absolute)
- Bending is symmetric about M=0 at any given T
- The closed polygon is: T_vals forward with +M_vals, then T_vals reversed with -M_vals

## Acceptance Criteria
- [x] Envelope chart shows closed polygon shapes for each operating condition
- [x] Each condition fills its lens shape with semi-transparent color
- [x] Boundary line traces the full closed polygon
- [x] Innermost (Normal Operating) is visually distinct from outermost (Survival)
- [x] Also update pressure sensitivity chart to use symmetric envelopes
- [x] Existing tests still pass
- [x] Report regenerated

## Key File
- `src/digitalmodel/structural/analysis/wall_thickness_mt_report.py` — `_build_envelope_chart()` (~line 819)

## Implementation Notes (2026-02-16)
Already implemented in commit `82ca1242d` (prior session). Both `_build_envelope_chart()` and `_build_pressure_sensitivity_chart()` use symmetric closed polygon pattern:
- `poly_T = T_kN_fwd + T_kN_rev`, `poly_M = M_kNm_pos + M_kNm_neg`
- `fill="toself"` with `fillcolor=rgba(r,g,b,0.10)`
- Conditions plotted outermost-first for correct layering
- `test_envelope_chart_is_symmetric` test confirms symmetry
- 21/21 M-T report tests pass

---
*Source: WRK-044 session — user requested "implement the full symmetric envelope"*
