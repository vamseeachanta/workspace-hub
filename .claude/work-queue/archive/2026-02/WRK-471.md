---
id: WRK-471
title: "fix(ace-linux-2): gemini CLI fails on Node 18 with /v regex flag"
status: archived
completed_at: 2026-02-25T04:14:23Z
priority: high
complexity: simple
compound: false
created_at: 2026-02-25T00:00:00Z
target_repos:
  - workspace-hub
commit:
spec_ref:
related:
  - WRK-306
blocked_by: []
synced_to: []
plan_reviewed: true
plan_approved: false
percent_complete: 0
brochure_status: pending
computer: ace-linux-2
---

# fix(ace-linux-2): gemini CLI fails on Node 18 with /v regex flag

## Objective
Restore working `gemini` CLI on ace-linux-2 by resolving Node.js runtime incompatibility.

## Context
Current failure:
- `SyntaxError: Invalid regular expression flags`
- Source path includes `string-width/index.js` using regex flag `/v`
- Current runtime: `Node.js v18.19.1`

`/v` regex flag is unsupported in Node 18 and requires newer Node runtime.

## Route A Plan (direct fix)
1. Confirm current Node/npm/gemini versions and installation path.
2. Install/use supported Node LTS (>=20; prefer 22 LTS) for user-level CLI.
3. Reinstall or relink `@google/gemini-cli` under the updated Node toolchain.
4. Verify with `gemini --version` and smoke-run `gemini` startup.
5. Document final versions and any PATH/profile adjustments.

## Acceptance Criteria
- `node -v` reports supported version (>=20)
- `gemini --version` succeeds without syntax error
- launching `gemini` no longer throws `Invalid regular expression flags`

## Risks
- Multiple Node installations (system vs user-managed) can cause PATH shadowing.
- Existing globally-installed CLIs may need reinstall under new Node runtime.

## Session Handoff
- Pending approval to execute Route A.
