---
id: WRK-065
title: S-lay pipeline installation schema + builders for PRPP Eclipse vessel
status: archived
priority: high
complexity: complex
created_at: 2026-01-31T00:00:00Z
completed_at: 2026-01-31T00:00:00Z
target_repos:
  - digitalmodel
commit:
spec_ref:
related: [WRK-064]
blocked_by: []
synced_to: []
compound: false
route: C
claimed_at: 2026-01-31T00:00:00Z
failure_reason:
attempts: 1
plan_workstations: [ace-linux-1]
execution_workstations: [ace-linux-1]
---
# S-lay pipeline installation: schema extension + spec files for PRPP

## What
Extended the OrcaFlex modular generator `ProjectInputSpec` Pydantic schema to support S-lay (stinger-lay) pipeline installation alongside existing floating installation. Created 3 new builders (VesselType, Vessel, Winch), updated 6 existing builders/files for dual-mode operation, and created 2 spec.yml input files for the PRPP project pipelines (SB-SA and RS8-ID) using Eclipse vessel data.

## Why
The modular generator only supported floating installation. PRPP project requires S-lay installation modeling for two 10-inch X60 pipelines from the Eclipse vessel. This enables OrcaFlex model generation for stinger-lay operations with proper vessel, stinger, and tensioner configuration.

## Acceptance Criteria
- [x] 7 new Pydantic models added to schema (VesselProperties, VesselMooring, Vessel, StingerSection, StingerRoller, Stinger, Tensioner)
- [x] Equipment class extended with 3 optional fields (vessel, stinger, tensioner)
- [x] Cross-validation: stinger/tensioner require vessel
- [x] `is_s_lay()` / `is_floating()` helper methods on ProjectInputSpec
- [x] X60 material added to MATERIAL_PROPERTIES (Fy=415 MPa)
- [x] VesselTypeBuilder generates vessel type with mass/inertia from gyration radii
- [x] VesselBuilder generates vessel with stinger support path geometry
- [x] WinchBuilder generates tensioner as stage-controlled winch
- [x] LinesBuilder dual-mode: floating (Fixed→buoy) vs S-lay (vessel→Anchored)
- [x] BuoysBuilder skips for S-lay models (no tugs/BM needed)
- [x] GroupsBuilder includes vessel/winch names in structure groups
- [x] master.yml only includes actually generated files (not skipped builders)
- [x] SB-SA spec.yml validates and loads (tension=585.4 kN)
- [x] RS8-ID spec.yml validates and loads (tension=566.9 kN)
- [x] Full backward compatibility — existing floating spec unchanged
- [x] All 99 tests pass (59 new + 40 existing)

## Remaining Work (Requires OrcaFlex License)

The following items are marked TBD in the spec files and need validation on a machine with an OrcaFlex license:

- [ ] **Generate and open S-lay model in OrcaFlex** — verify vessel/stinger/pipeline geometry renders correctly
- [ ] **Validate stinger support path** — confirm roller positions and stinger curve discretization match expected geometry
- [ ] **Run statics** — verify pipeline catenary from vessel through stinger to seabed converges
- [ ] **Calibrate TBD parameters** — water depth, seabed stiffness/slope, exact roller positions, current profiles, wind
- [ ] **Verify tensioner behavior** — confirm stage-controlled tension (build-up → operational) works as expected
- [ ] **Compare against reference model** — cross-check output against `docs/modules/orcaflex/pipeline/installation/s-lay/bigfoot1/WD_18m.yml`
- [ ] **Route radius verification** — SB-SA (1500m) and RS8-ID (1100m) route radius checks
- [ ] **Populate exact coating densities** — confirm corrosion coating and CWC40 density values from client data

## Pipeline Data

| Parameter | SB-SA | RS8-ID |
|-----------|-------|--------|
| OD | 273.1 mm | 273.1 mm |
| Wall thickness | 14.3 mm | 14.3 mm |
| Material | X60 (Fy=415 MPa) | X60 (Fy=415 MPa) |
| Concrete coating | 40mm CWC | 40mm CWC |
| Touchdown tension | 585.4 kN | 566.9 kN |
| Route radius | 1500 m | 1100 m |
| Stinger radius | 150 m | 150 m |
| Vessel | Eclipse | Eclipse |

## Test Verification (99/99 passed)

- `test_slay_schema.py`: 32/32 (models, cross-validation, spec loading, backward compat)
- `test_slay_builders.py`: 27/27 (should_generate, builder output, end-to-end generation)
- `test_builder_registry.py`: 5/5 (updated for 13 builders)
- `test_backward_compat.py`: 12/12 (floating generation unchanged)
- `test_schema_compat.py`: 7/7 (imports unchanged)
- `test_builder_context.py`: 6/6 (context fields)
- Remaining existing tests: 10/10

## Files Created/Modified

| File | Action |
|------|--------|
| `src/.../modular_generator/schema/equipment.py` | Modified — 7 new Pydantic models + 3 Equipment fields |
| `src/.../modular_generator/schema/root.py` | Modified — cross-validation + is_s_lay/is_floating |
| `src/.../modular_generator/schema/__init__.py` | Modified — 7 new exports |
| `src/.../modular_generator/builders/context.py` | Modified — vessel/winch context fields |
| `src/.../modular_generator/builders/linetype_builder.py` | Modified — X60 material + tensioner winch wire |
| `src/.../modular_generator/builders/lines_builder.py` | Modified — dual-mode connection logic |
| `src/.../modular_generator/builders/buoys_builder.py` | Modified — should_generate for S-lay |
| `src/.../modular_generator/builders/groups_builder.py` | Modified — vessel/winch in groups |
| `src/.../modular_generator/builders/__init__.py` | Modified — 3 new builder imports |
| `src/.../modular_generator/__init__.py` | Modified — new builder imports + master.yml fix |
| `src/.../modular_generator/builders/vessel_type_builder.py` | Created — 04_vessel_types.yml (order=35) |
| `src/.../modular_generator/builders/vessel_builder.py` | Created — 06_vessels.yml (order=45) |
| `src/.../modular_generator/builders/winch_builder.py` | Created — 11_winches.yml (order=95) |
| `docs/.../s-lay/SB-SA/spec.yml` | Created — SB-SA pipeline spec |
| `docs/.../s-lay/RS8-ID/spec.yml` | Created — RS8-ID pipeline spec |
| `tests/.../test_slay_schema.py` | Created — 32 schema tests |
| `tests/.../test_slay_builders.py` | Created — 27 builder tests |
| `tests/.../test_builder_registry.py` | Modified — updated for 13 builders |

## Pickup Instructions

To continue this work on a machine with OrcaFlex:

```bash
cd /mnt/github/workspace-hub/digitalmodel

# 1. Verify tests pass
uv run pytest tests/modules/orcaflex/modular_generator/ -v --no-cov

# 2. Generate S-lay model
uv run python -m digitalmodel.modules.orcaflex.modular_generator generate \
    --input docs/modules/orcaflex/pipeline/installation/s-lay/SB-SA/spec.yml \
    --output /tmp/slay_sb_sa/

# 3. Open generated master.yml in OrcaFlex and verify geometry
#    - Vessel should appear at origin with stinger curving downward
#    - Pipeline should run from vessel through stinger to seabed
#    - Tensioner should apply 585.4 kN at End A

# 4. Compare against bigfoot1 reference models for structure sanity
ls docs/modules/orcaflex/pipeline/installation/s-lay/bigfoot1/

# 5. Generate RS8-ID model
uv run python -m digitalmodel.modules.orcaflex.modular_generator generate \
    --input docs/modules/orcaflex/pipeline/installation/s-lay/RS8-ID/spec.yml \
    --output /tmp/slay_rs8_id/

# 6. Calibrate TBD parameters from client data, update spec files
# 7. Re-generate and validate in OrcaFlex

# 8. Verify existing floating model still works
uv run python -m digitalmodel.modules.orcaflex.modular_generator generate \
    --input docs/modules/orcaflex/pipeline/installation/floating/30in_pipeline/spec.yml \
    --output /tmp/floating_test/
```

---
*Source: Extend OrcaFlex modular generator schema for S-lay installations; create spec.yml files for SB-SA and RS8-ID pipelines using Eclipse vessel data from PRPP project*
