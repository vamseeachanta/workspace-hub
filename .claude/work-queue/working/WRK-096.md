---
id: WRK-096
title: "Review and improve worldenergydata module structure for discoverability"
status: working
priority: high
complexity: medium
route: B
created_at: 2026-02-04T12:00:00Z
target_repos:
  - worldenergydata
commit:
spec_ref: worldenergydata/specs/modules/sharded-orbiting-turtle.md
related: [WRK-066]
blocked_by: []
synced_to: []
tags: [architecture, refactoring, discoverability, module-structure]
review:
  cross_review: completed
  iterations: 3
  rationale: "Precedent-based downgrade from Route C → B. WRK-066 provides the proven methodology; no architectural ambiguity remains."
  review_1:
    reviewer: claude-opus-4.5
    date: 2026-02-04
    verdict: APPROVE
    notes: "P2: add rollback strategy + CLI entry point validation. P2: verify external consumers. P3: cross-review fallback when external reviewers unavailable."
  review_2:
    reviewer: codex (gpt-5.2-codex)
    date: 2026-02-04
    verdict: REQUEST_CHANGES
    notes: "P1: missing migration/rollback strategy. P2: external consumers not identified. P2: cross-review criterion under-defined. P3: module index structure ambiguous."
  review_3:
    reviewer: gemini (gemini-cli v0.27.0)
    date: 2026-02-04
    verdict: APPROVE
    notes: "P2: external dependency risk not in AC. P2: no rollback procedure. P3: CLI entry points not checked. Suggests libcst/rope for automated refactoring."
  consensus: "2 APPROVE, 1 REQUEST_CHANGES. All 3 reviewers flagged rollback strategy and external consumer verification as gaps. Addressed in updated acceptance criteria below."
---

# Review and Improve worldenergydata Module Structure for Discoverability

## What
Apply the same module structure improvement approach used in WRK-066 (digitalmodel) to the worldenergydata repository. Audit the current layout, simplify the module hierarchy, standardize naming, and improve discoverability so that all subpackages are clearly organized and findable.

## Why
WRK-066 successfully restructured digitalmodel for discoverability — the same treatment is needed for worldenergydata. Poor organization makes it difficult for users and AI agents to locate functionality, increases onboarding friction, and leads to duplicated or misplaced code. worldenergydata has grown to include 15+ data sources across energy, marine safety, and production analytics domains, making clear module organization critical.

## Route B Pipeline
```
Explore (audit as-is) → Implement (restructure) → Test (regression) → Archive
```

**Why Route B, not C**: WRK-066 already established the plan. This item applies a proven methodology to a different repo — no Plan phase needed. Classified per WRK-094 precedent-based downgrade principle.

## Acceptance Criteria

### Audit Phase
- [ ] Current module structure audited and documented (as-is map with tree/Mermaid diagram)
- [ ] External consumers identified (repos listing worldenergydata as dependency, scripts/Dockerfiles/CI referencing paths)
- [ ] CLI entry points and `pyproject.toml` scripts inventoried

### Design Phase
- [ ] Proposed simplified hierarchy designed (to-be map with tree/Mermaid diagram), using WRK-066 approach as reference
- [ ] Naming conventions standardized across all modules
- [ ] Public API surface defined per package (what each `__init__.py` exports)
- [ ] Migration strategy documented: deprecation redirects in old `__init__.py` with `DeprecationWarning` for one release cycle

### Implementation Phase
- [ ] Module organization follows clear, discoverable patterns
- [ ] Top-level `__init__.py` or module index provides discoverability with defined public API
- [ ] Old import paths preserved as deprecation shims (import redirects with warnings)
- [ ] Documentation updated to reflect new structure

### Validation Phase
- [ ] All existing imports and tests updated for new paths
- [ ] No regressions — all existing tests pass after restructuring
- [ ] External consumer imports validated (workspace-hub scripts, dependent repos)
- [ ] CLI entry points verified functional after restructure
- [ ] Rollback plan tested: git-based revert to pre-restructure state confirmed viable

### Review Phase
- [ ] Cross-review completed (Claude + Codex + Gemini)

## Rollback Strategy
1. All restructuring done on a feature branch (`refactor/worldenergydata-module-structure`)
2. Pre-restructure commit tagged as `pre-wrk-096` for clean revert point
3. Deprecation shims in old paths ensure backward compatibility during transition
4. If regression tests fail: `git revert` to tagged commit, no downstream breakage
5. Full removal of old paths only after confirming zero `DeprecationWarning` hits in CI

## Reference
- WRK-066 (digitalmodel) completed this successfully. Review its approach, as-is/to-be maps, and apply the same methodology adapted to worldenergydata's domain structure.
- Cross-review results: `scripts/review/results/codex-WRK-096-plan-review.md`, `scripts/review/results/gemini-WRK-096-plan-review.md`

---
*Source: Review WRK-066 (digitalmodel module structure improvement) and prepare a similar module-based repo file structure improvement for worldenergydata.*
