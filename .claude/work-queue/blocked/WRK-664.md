---
id: WRK-664
title: "feat(work-queue): multi-agent and multi-workstation execution contract for WRK planning"
status: blocked
route: C
priority: high
complexity: complex
compound: false
created_at: 2026-03-01T00:00:00Z
target_repos:
  - workspace-hub
commit:
spec_ref: specs/wrk/WRK-664/plan.md
related:
  - WRK-624
  - WRK-655
blocked_by: []
synced_to: []
plan_reviewed: false
plan_approved: false
percent_complete: 0
brochure_status: n/a
computer: [ace-linux-1]
execution_workstations: [ace-linux-1]
plan_workstations: [ace-linux-1]
provider: codex
orchestrator: claude
cross_review: pending
html_output_ref: assets/WRK-664/wrk-664-multi-workstation-contract-review.html
plan_html_review_draft_ref: .claude/work-queue/assets/WRK-664/plan-html-review-draft.md
plan_html_review_final_ref:
claim_routing_ref:
claim_quota_snapshot_ref: config/ai-tools/agent-quota-latest.json
---

# feat(work-queue): Multi-Agent and Multi-Workstation Execution Contract for WRK Planning

## Why

`WRK-624` established stage gates and claim discipline, but multi-workstation execution
is still only partially represented:

- provider assignment exists (`provider`, `orchestrator`) but not stage-by-stage contract
- workstation assignment exists (`computer`) but not full machine capability checks per stage
- no canonical plan contract for cross-machine handoff and remote coordination evidence
- no explicit pause/replan rule when required machine access is unavailable

This creates execution risk for items requiring licensed software, isolated machines,
or parallel runs across multiple hosts.

## Scope

Define a canonical planning + execution contract for:

1. stage-level agent assignment (`claude`, `codex`, `gemini`, expandable)
2. stage-level workstation assignment (single or multiple machines)
3. capability and quota gate before claim
4. machine-readiness gate before execute
5. handoff contract when switching machines mid-item
6. remote-coordination policy for tasks requiring non-local execution

## Deliverables

- WRK frontmatter/schema extension proposal for:
  - per-stage `agent_assignment`
  - per-stage `workstation_assignment`
  - `machine_capability_requirements`
  - `handoff_evidence_ref`
- planning template updates for stage assignment matrix
- execution checks tied to:
  - `agent-router`
  - `agent-usage-optimizer`
  - `workstations` skill registry
  - `tool-readiness` signals
- explicit fallback paths:
  - alternate machine
  - defer stage
  - pause for user approval
- HTML review surface section for machine/agent assignment summary and gaps

## Acceptance Criteria

- [ ] Route C plan exists with stage-level agent/workstation matrix
- [ ] Contract defines deterministic pass/fail gates before `CLAIM` and `EXECUTE`
- [ ] Contract defines multi-machine handoff evidence requirements
- [ ] Contract defines remote-coordination policy and safety bounds
- [ ] Contract includes graceful fallback when required machine is unavailable
- [ ] At least 3 representative WRK examples validate the contract
- [ ] User HTML review includes assignment matrix and top assignment gaps
- [ ] Cross-review completed with all P1/P2 issues resolved

## Parked Status

This item is intentionally parked pending bandwidth and capability maturity for broader
remote-coordination patterns. It should be resumed when multi-machine orchestration
becomes a near-term execution priority.
