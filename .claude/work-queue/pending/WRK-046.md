---
id: WRK-046
title: OrcaFlex drilling and completion riser parametric analysis
status: pending
priority: medium
complexity: complex
created_at: 2026-01-29T12:00:00Z
target_repos:
  - digitalmodel
commit:
spec_ref:
related:
  - WRK-033
  - WRK-045
blocked_by: []
synced_to: []
---

# OrcaFlex drilling and completion riser parametric analysis

## What
Develop detailed OrcaFlex analysis capability for drilling and completion risers with parametric analysis across key design variables (water depth, vessel offset, current profiles, riser properties, tensioner settings, etc.).

## Why
Drilling and completion risers operate under complex combined loading (vessel motions, wave, current, mud weight, pressure). Parametric analysis enables rapid assessment of riser operability, identification of governing conditions, and design optimisation across project variables.

## Acceptance Criteria
- [ ] OrcaFlex model setup for drilling riser system (marine riser, tensioner, BOP, LMRP)
- [ ] OrcaFlex model setup for completion riser system
- [ ] Parametric variables: water depth, vessel offset, current profiles, wave conditions
- [ ] Parametric variables: riser properties (OD, WT, grade), mud weight, top tension
- [ ] Dynamic analysis: stress, fatigue, flex joint angles, tensioner stroke
- [ ] Operability assessment: limiting seastates, maximum offsets
- [ ] Results extraction at critical locations (flex joints, stress joints, connectors)
- [ ] Summary output: utilisation tables, operability envelopes
- [ ] Tests validating model setup and parametric execution
- [ ] Documentation of riser configurations and analysis methodology

## Plan

**Target**: `src/digitalmodel/solvers/orcaflex/risers/drilling/`

### Existing Assets (reuse)
- `solvers/orcaflex/modular_generator/` — model generation, section builders
- `solvers/orcaflex/post_processing/` — results extraction
- `solvers/orcaflex/batch_manager/` — batch simulation management
- Existing riser analysis patterns in `solvers/orcaflex/`

### Phase 1 — Drilling Riser Model
- Verify OrcFxAPI + Orcina license availability and configuration as prerequisite
- `drilling_riser_model.py`:
  - Components: marine riser joints, flex joints (upper/lower), telescopic joint, tensioner, BOP, LMRP, kill/choke lines
  - Pydantic schema for riser properties: joint length, OD, WT, buoyancy module coverage
  - Tensioner model: stroke, stiffness, pretension
  - Mud weight as internal fluid density
  - **Vessel motion input**: prescribed vessel RAOs from hull library or user-input motion time history. Document whether analysis is coupled or imposed-motion.
  - Define vessel offset reference point and how offset is applied to top boundary
  - Specify current shear profile definition

### Phase 2 — Completion Riser Model (may be deferred)
- `completion_riser_model.py`:
  - Components: tubing, production packer, tree, stress joint
  - Lighter string than drilling riser
  - Different end conditions and load paths
- **Note**: Completion riser is a fundamentally different system from drilling riser. If drilling riser implementation takes >3 days, defer this phase to a separate WRK item to prevent scope creep.

### Phase 3 — Parametric Analysis Engine
- `riser_parametric.py`:
  - Parameter matrix: water depth, vessel offset (% of depth), current profiles, wave Hs/Tp, mud weight, top tension
  - Cartesian product → batch of OrcaFlex runs
  - Use existing `batch_manager` for execution

### Phase 4 — Results & Operability
- `riser_results.py`:
  - Extract: flex joint angles, stress joint stresses, tensioner stroke, connector loads
  - Operability envelope: max Hs vs. vessel offset for given flex joint angle limit
  - Governing condition identification per critical location
- `riser_plots.py`:
  - Operability weather window charts
  - Utilisation heatmap: water depth × seastate
  - Flex joint angle vs. offset envelope

### Phase 5 — Tests
- Model setup validation tests
- Parametric matrix generation tests
- Results extraction tests with mock OrcaFlex output (acceptable for unit tests)
- Operability envelope calculation tests
- End-to-end "golden case" acceptance benchmark (requires OrcFxAPI)
- **Note**: end-to-end validation requires OrcFxAPI; use pytest.importorskip for graceful skip

### Dependencies
- OrcFxAPI + Orcina license required
- Tests with conditional skip when unavailable

### Review Notes
- **Verdict**: Claude: MINOR | Codex: MINOR | Gemini: MINOR
- **Actions taken**:
  - Added vessel motion input specification (RAOs or time history, coupled vs imposed-motion)
  - Added vessel offset reference point and current shear profile definition
  - Marked Phase 2 (Completion Riser) as deferrable to prevent scope creep
  - Added golden case acceptance benchmark to tests
  - Noted end-to-end validation requires OrcFxAPI
  - Added license verification prerequisite per Gemini feedback
- *Cross-reviewed: 2026-02-09*

*Approved by user: 2026-02-09*

---
*Source: detailed orcaflex analysis of drilling, completion risers (perform parametric analysis)*
