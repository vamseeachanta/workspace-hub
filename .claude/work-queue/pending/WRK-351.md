---
id: WRK-351
title: Fix 21 remaining assetutilities test-run failures
status: pending
priority: medium
complexity: medium
compound: false
created_at: 2026-02-23T00:00:00Z
target_repos:
  - assetutilities
commit:
spec_ref:
related: [WRK-350]
blocked_by: []
synced_to: []
plan_ensemble: false
ensemble_consensus_score: null
plan_reviewed: false
plan_approved: false
percent_complete: 0
brochure_status: n/a
---

# Fix 21 remaining assetutilities test-run failures

## Context
WRK-350 resolved all 50 collection errors. 294 tests now collect; 266 pass, 21 fail at
run-time, 7 skip. These are pre-existing test-logic bugs surfaced after collection was fixed.

## Failure Categories (from 2026-02-23 triage)

### 1. Polar visualization — 4 failures
- `TypeError: 'int' object is not iterable` in `visualization_polar.py`
- Root cause: upstream library bug or API mismatch in polar chart rendering
- Files: `tests/modules/visualization/` polar-related tests

### 2. yml_utilities fixture/config — 4 failures
- `FileNotFoundError` or `KeyError` at test run time
- Fixture YAML files missing or config keys changed
- Fix: locate missing fixtures or update expected keys

### 3. Windows path comparisons — ~6 failures
- Tests assert hardcoded Windows-style paths (backslashes)
- Running on Linux — assertions fail
- Fix: normalise path separators in assertions (`Path(...)` comparisons)

### 4. Missing word/docx fixture inputs — ~4 failures
- `FileNotFoundError` for `.docx` test input files
- Fix: create minimal fixture files or skip if missing

### 5. Other — ~3 failures
- Mixed: config key mismatches, stale API calls

## Acceptance Criteria
- [ ] Polar visualization tests pass or are explicitly skipped with documented reason
- [ ] yml_utilities tests pass with correct fixtures
- [ ] No Windows-path assertions on Linux
- [ ] word_utilities tests pass or have graceful skip guards
- [ ] `python3 -m pytest tests/ --noconftest -q` reports ≥285 passed, ≤7 skipped, 0 failed

## Notes
- Run baseline first: `python3 -m pytest tests/ --noconftest -q --tb=short 2>&1 | grep FAILED`
- Do NOT modify test logic to mask real bugs — fix or skip with documented reason
- Polar TypeError may require a patch in `src/assetutilities/common/visualization_polar.py`
