---
id: WRK-324
title: Risk metrics — VaR CVaR Sharpe ratio max drawdown per position and portfolio
status: pending
priority: high
complexity: medium
compound: false
created_at: 2026-02-22T00:00:00Z
target_repos:
  - assethold
commit:
spec_ref:
related: [WRK-309]
blocked_by: []
synced_to: []
plan_reviewed: false
plan_approved: false
percent_complete: 0
brochure_status: n/a
---

# Risk metrics — VaR CVaR Sharpe ratio max drawdown per position and portfolio

## What

Implement portfolio risk metrics using existing price history data. VaR (historical,
parametric), CVaR/Expected Shortfall, Sharpe ratio, Sortino ratio, max drawdown, Calmar ratio.
Per-position and portfolio-level output. Wire into daily strategy report.

## Why

Quantitative risk metrics are essential for portfolio management. VaR, CVaR, and drawdown
analysis provide objective measures of downside risk that complement return-based analysis.
Adding these metrics to the daily strategy report enables monitoring of portfolio risk
alongside performance.

## Acceptance Criteria

- [ ] Historical VaR (95% and 99% confidence, configurable lookback)
- [ ] Parametric VaR (normal distribution assumption)
- [ ] CVaR / Expected Shortfall (tail risk beyond VaR)
- [ ] Sharpe ratio (annualised, configurable risk-free rate)
- [ ] Sortino ratio (downside deviation only)
- [ ] Max drawdown (peak-to-trough, with dates)
- [ ] Calmar ratio (annualised return / max drawdown)
- [ ] Per-position and portfolio-level output
- [ ] Wire into existing daily strategy report
- [ ] Pytest coverage with known results from sample return series

---
*Source: Phase G assethold expansion — WRK-309 Document Intelligence.*
