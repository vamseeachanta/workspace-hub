---
id: WRK-571
title: "feat(digitalmodel): port VIV MATLAB mode analysis scripts to Python"
status: pending
priority: medium
complexity: large
compound: false
created_at: 2026-02-25T00:00:00Z
target_repos:
  - digitalmodel
commit:
spec_ref:
related:
  - WRK-309
  - WRK-568
  - WRK-570
blocked_by:
  - WRK-568
synced_to: []
plan_reviewed: false
plan_approved: false
percent_complete: 0
brochure_status: n/a
computer: ace-linux-1
---

# feat(digitalmodel): Port VIV MATLAB Mode Analysis Scripts to Python

## What

Port MATLAB VIV (Vortex-Induced Vibration) mode analysis scripts to Python in
`digitalmodel/src/digitalmodel/structural/viv/`.

## Source MATLAB Files (in document index after WRK-568)

- `FindModes.m` / `ModesFind.m` — VIV power-in region identification
  `/mnt/ace/docs/disciplines/drilling/projects/3824_bp_macondo_containment_riser_analysis/.../VIV/.../FindModes.m`
  Parses SHEAR7/FEA natural frequency table; identifies excited modes per DNV-RP-F105
- `testmodes.m` — Pluck test FFT-based natural frequency + damping extraction
  `/mnt/ace/docs/disciplines/completion/projects/31245_shell_west_boreas_bop_on_tree_assessment/ANL/VIV/Model Setup/Pluck Test/testmodes.m`
- `PostProcVIVLoc.m` — SHEAR7 VIV damage location post-processing

## What These Calculate

### `modes.py` (from FindModes/ModesFind)
- Reduced velocity: Vr = U / (f_n * D)  [DNV-RP-F105 Sec 2]
- Power-in region: 3.0 < Vr < 16.0 (cross-flow), 1.0 < Vr < 3.5 (in-line)
- Dominant mode identification

### `pluck.py` (from testmodes)
- FFT of acceleration/displacement time-history
- Peak picking for natural frequencies
- Logarithmic decrement for damping ratio

## Legal Note

VIV algorithms are based on public Euler-Bernoulli beam theory and DNV-RP-F105.
No client identifiers in ported code.

## Target Module

```
digitalmodel/src/digitalmodel/structural/viv/
├── __init__.py
├── modes.py   # Natural freq + power-in region identification
└── pluck.py   # Pluck test FFT frequency/damping extraction
```

## Acceptance Criteria

- [ ] `modes.py` implemented; tests: single-mode power-in, multi-mode, out-of-range
- [ ] `pluck.py` implemented; tests: FFT on synthetic sine-decay signal
- [ ] Natural frequencies match ANSYS `common.inp` reference (from WRK-572)
- [ ] No client identifiers; legal scan pass
- [ ] Cross-review via `scripts/review/cross-review.sh`
