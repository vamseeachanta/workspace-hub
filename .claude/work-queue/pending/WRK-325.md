# WRK-325 â€” OrcaFlex output QA suite for representative examples

**Status:** complete | **Priority:** medium | **Percent complete:** 100
**Blocked by:** WRK-324

## Goal

Build `docs/domains/orcaflex/examples/qa/orcaflex_example_qa.py` that reads each example's
`.sim` file and runs physics-based QA checks. Produces a `QA_REPORT.md` and per-example JSON.

Analog to WRK-319 (OrcaWave QA suite for L01â€“L06).

## QA checks by example

| Example | Check | Pass criterion |
|---|---|---|
| R01 Catenary riser | Static top tension > 0, sag depth within water depth | Tension > 0 kN, sag < WD |
| R01 Catenary riser | Dynamic effective tension range non-negative | Min EfT > 0 throughout |
| R02 Lazy wave | Buoyancy section uplift force positive | Buoy lift > 0 kN |
| R03 Default vessel | Heave RAO at natural period > 1.0 | RAO peak > 1.0 m/m |
| R03 Default vessel | Vessel static draft matches model spec | Draft within Â±5% of spec |
| R04 FOWT | Mooring pre-tension non-zero across all lines | All lines > 50 kN |
| R04 FOWT | Tower top displacement bounded | Displacement < 5% hub height |
| R05 Lay table | All load cases converge (no divergence flags) | `RunStatus` == Completed for all |
| R06 Multiple statics | Result array length matches input sweep count | len(results) == len(sweep) |

## Output

- `docs/domains/orcaflex/examples/qa/QA_REPORT.md` â€” human-readable summary
- `docs/domains/orcaflex/examples/qa/Rxx_qa_results.json` â€” per-example machine-readable results

## Acceptance criteria

- QA module written with per-example check functions (one function per row in table above)
- All checks pass on valid `.sim` outputs OR failures documented with root cause
- QA report committed alongside run scripts
- Module importable: `from digitalmodel.orcaflex.qa import run_orcaflex_qa`

## Notes

- OrcaFlex QA reads `.sim` via `OrcFxAPI.Model.LoadSimulation()`
- Key OrcFxAPI result objects: `LineResults`, `VesselResults`, `RangeGraph`, `TimeHistory`
- Divergence detection: check `model.RunStatus` and `model.WarnCount`
- This QA suite feeds directly into WRK-327 (HTML report QA section)

## Route C Plan

- **Spec:** specs/wrk/WRK-325/plan.md
- **Plan reviewed:** yes
- **Plan approved:** yes (user-approved on 2026-02-26)

## Cross-Review Summary

| Iter | Date | Reviewer | Verdict | Notes |
|---|---|---|---|---|
| P1 | 2026-02-24 | Claude | MINOR | Initial implementation review; gaps captured in plan log. |
| P2 | 2026-02-26 | Codex | APPROVE | Triage + redo pass validated deliverables against acceptance criteria. |
| P3 | 2026-02-26 | Gemini | MINOR | Independent CLI review deferred due local command timeout; no conflicting evidence from artifacts. |

## Agentic AI Horizon

This work item is suitable for LLM-led analysis and implementation because inputs are file-centric, acceptance criteria are machine-checkable, and outputs are deterministic artifacts (docs/scripts/tests). Remaining human role is adjudicating deferred external-review risks.
