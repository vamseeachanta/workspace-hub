---
id: WRK-036
title: OrcaFlex structure deployment analysis - supply boat side deployment with structural loads
status: pending
priority: low
complexity: complex
created_at: 2026-01-29T12:00:00Z
target_repos:
  - acma-projects
commit:
spec_ref:
related: []
blocked_by: []
synced_to: []
---

# OrcaFlex structure deployment analysis - supply boat side deployment with structural loads

## What
OrcaFlex analysis of structure deployment from a supply boat (side of vessel). Model the deployment through the splash zone to capture loads, then provide those loads for downstream structural integrity assessment.

## Context
- **Deployment method**: Equipment deployed from supply boat side
- **Analysis focus**: Splash zone transit â€” the critical phase where wave loads, snap loads, and dynamic amplification are highest
- **Parametric variables**:
  - Varying structure lengths
  - Accurate weight vs. envelope weights
  - Seastate conditions and vessel RAOs
- **Deliverable**: Load sets (tensions, shears, moments) suitable for structural analysis

## Why
Structural deployment through the splash zone is a critical lift operation. OrcaFlex time-domain analysis captures the dynamic loads (wave-induced, snap, slam) that static calculations miss. These loads feed into structural FEA to verify the equipment and rigging integrity under installation conditions.

## Acceptance Criteria
- [ ] OrcaFlex model of structure deployed from supply boat side
- [ ] Splash zone analysis capturing dynamic loads during lowering
- [ ] Parametric runs: varying lengths, weight cases (accurate and envelope)
- [ ] Seastate sensitivity with vessel RAOs applied
- [ ] Load extraction (tensions, shears, bending moments) at critical locations
- [ ] Loads formatted/exported for structural analysis input
- [ ] Results summary with governing load cases identified
- [ ] Documentation of model assumptions, parameters, and load output format

## Plan

> **Note**: `target_repos` in frontmatter says `acma-projects` but the analysis tooling belongs in `digitalmodel`. The OrcaFlex model generation, parametric runner, and load extraction modules should be implemented in `digitalmodel/`. Project-specific configs and results stay in the project repo.

### Phase 1: Deployment Schema Extension

Extend the existing `ProjectInputSpec` Pydantic schema to support structure deployment models (currently supports pipeline and riser only).

**Target files (modify)**:
- `src/digitalmodel/solvers/orcaflex/modular_generator/schema/_enums.py` (44 lines) -- add `StructureType.DEPLOYMENT` enum value
- `src/digitalmodel/solvers/orcaflex/modular_generator/schema/root.py` (172 lines) -- add optional `deployment` field alongside `pipeline` and `riser`, update `model_validator` to allow exactly one of the three

**Target files (new)**:
- `src/digitalmodel/solvers/orcaflex/modular_generator/schema/deployment.py` -- Pydantic models for deployment configuration

**Schema models in `deployment.py`**:
```
DeployedStructure:
    name: str
    mass: float                    # Dry mass (te)
    submerged_weight: float        # Submerged weight (kN)
    dimensions: [L, W, H]         # Envelope dimensions (m)
    cog: [x, y, z]                # Centre of gravity (m)
    gyration_radii: [Rxx, Ryy, Rzz]
    drag_coefficients: {Cd_x, Cd_y, Cd_z}
    added_mass_coefficients: {Ca_x, Ca_y, Ca_z}

RiggingConfig:
    sling_count: int
    sling_length: float
    sling_capacity: float          # SWL (kN)
    spreader_bar: bool
    spreader_length: float | None

CraneConfig:
    boom_length: float
    capacity: float                # SWL at radius (kN)
    hook_height_above_deck: float
    winch_speed: float             # Lowering speed (m/s)
    side_deployment: bool = True   # Side of vessel deployment

SupplyBoatConfig:
    vessel_name: str
    rao_file: str                  # Path to vessel RAO data
    vessel_properties: VesselProperties  # Reuse existing model from equipment.py
    crane: CraneConfig
    deployment_side: str           # "port" | "starboard"

SplashZoneConfig:
    start_depth: float             # Start of splash zone (m, from MWL)
    end_depth: float               # End of splash zone (m)
    lowering_steps: list[float]    # Depth increments for analysis (m)
    hold_durations: list[float]    # Hold time at each step (s)

DeploymentSpec:
    structure: DeployedStructure
    rigging: RiggingConfig
    supply_boat: SupplyBoatConfig
    splash_zone: SplashZoneConfig
    weight_cases: list[WeightCase]  # Accurate + envelope weights
```

**Test file**:
- `tests/solvers/orcaflex/modular_generator/schema/test_deployment.py`

**Steps (TDD)**:
1. Write tests: `DeployedStructure` validates non-negative mass, positive dimensions
2. Write tests: `SplashZoneConfig` validates `start_depth < end_depth`, lowering steps within range
3. Write tests: `DeploymentSpec` cross-validates sling capacity >= structure submerged weight
4. Write tests: `ProjectInputSpec` with `deployment` field parses correctly; `pipeline + deployment` raises `ValueError`
5. Implement all schema models
6. Update `root.py` validator to accept `deployment` as third option

### Phase 2: Deployment Builders

Create builders for deployment-specific OrcaFlex objects: the structure (6D buoy), rigging lines, crane wire, and supply boat vessel.

**Target files (new)**:
- `src/digitalmodel/solvers/orcaflex/modular_generator/builders/deployment_structure_builder.py` -- 6D buoy for deployed structure
- `src/digitalmodel/solvers/orcaflex/modular_generator/builders/deployment_rigging_builder.py` -- sling lines, spreader bar
- `src/digitalmodel/solvers/orcaflex/modular_generator/builders/deployment_crane_builder.py` -- crane wire line with winch control

**Target files (modify)**:
- `src/digitalmodel/solvers/orcaflex/modular_generator/builders/__init__.py` -- register new builders
- `src/digitalmodel/solvers/orcaflex/modular_generator/builders/context.py` (100 lines) -- add deployment-specific context fields

**Builder registration**:
- `deployment_structure_builder.py`: `@BuilderRegistry.register("08b_deployment_structure.yml", order=85)`
- `deployment_rigging_builder.py`: `@BuilderRegistry.register("08c_deployment_rigging.yml", order=86)`
- `deployment_crane_builder.py`: `@BuilderRegistry.register("08d_deployment_crane.yml", order=87)`

**Test files**:
- `tests/solvers/orcaflex/modular_generator/builders/test_deployment_builders.py`

**Steps (TDD)**:
1. Write tests: Structure builder emits 6D buoy with correct mass, inertia, drag properties
2. Write tests: Rigging builder emits sling lines connecting buoy to crane hook point
3. Write tests: Crane builder emits winch-controlled line with lowering displacement
4. Write tests: `should_generate()` returns False for pipeline/riser specs
5. Implement builders following existing patterns (`buoys_builder.py`, `lines_builder.py`)

### Phase 3: Parametric Splash Zone Campaign

Extend the existing `CampaignMatrix` to support deployment-specific parametric variations.

**Target files (modify)**:
- `src/digitalmodel/solvers/orcaflex/modular_generator/schema/campaign.py` (487 lines) -- add deployment-specific axes to `CampaignMatrix`

**Target files (new)**:
- `src/digitalmodel/solvers/orcaflex/deployment/splash_zone_runner.py` -- orchestrate multi-step lowering analysis

**New campaign axes**:
```python
class CampaignMatrix(BaseModel):
    # ... existing fields ...
    structure_lengths: list[float] | None = None    # Varying structure lengths
    weight_cases: list[str] | None = None           # "accurate" | "envelope"
    sea_states: list[SeaStateCase] | None = None    # Hs/Tp/heading combinations
```

**Test files**:
- `tests/solvers/orcaflex/deployment/test_splash_zone_runner.py`
- `tests/solvers/orcaflex/modular_generator/schema/test_campaign_deployment.py`

**Steps (TDD)**:
1. Write tests: Campaign with 3 lengths x 2 weight cases x 3 sea states = 18 runs
2. Write tests: Each run directory has correct structure mass for its weight case
3. Write tests: Splash zone runner generates one model per lowering step per run
4. Implement campaign extension
5. Implement splash zone runner: iterate lowering steps, extract loads at each depth

### Phase 4: Load Extraction & Export

Extract structural loads (tensions, shears, bending moments) from OrcaFlex results and export in formats suitable for structural FEA input.

**Target files (new)**:
- `src/digitalmodel/solvers/orcaflex/deployment/load_extractor.py` -- extract loads from `.sim` results
- `src/digitalmodel/solvers/orcaflex/deployment/load_export.py` -- export to CSV/JSON for structural analysis
- `src/digitalmodel/solvers/orcaflex/deployment/governing_case.py` -- identify governing load cases

**Test files**:
- `tests/solvers/orcaflex/deployment/test_load_extractor.py`
- `tests/solvers/orcaflex/deployment/test_load_export.py`
- `tests/solvers/orcaflex/deployment/test_governing_case.py`

**Steps (TDD)**:
1. Write tests: Extractor reads sling tensions, hook load, structure accelerations from `.sim`
2. Write tests: Dynamic amplification factors (DAF) computed correctly from static vs dynamic results
3. Write tests: Governing case identified by maximum sling tension across all parametric runs
4. Write tests: Export CSV has columns: case_id, depth_m, sling_tension_kN, hook_load_kN, heave_m, roll_deg
5. Implement load extractor (OrcFxAPI: `model.objectNamed(line).TimeHistory("Effective Tension", ...)`)
6. Implement governing case selector: max envelope across all runs per extraction point
7. Implement CSV/JSON export for structural analysis handoff

### Phase 5: Results Summary & Reporting

**Target files (new)**:
- `src/digitalmodel/solvers/orcaflex/deployment/deployment_report.py` -- Plotly HTML report

**Test files**:
- `tests/solvers/orcaflex/deployment/test_deployment_report.py`

**Steps**:
1. Sling tension vs lowering depth plot (one trace per sea state)
2. DAF vs lowering depth plot
3. Governing load case summary table
4. Splash zone exceedance curves (probability of exceeding SWL)
5. Export report as interactive HTML

### Dependencies & Prerequisites

| Dependency | Status | Notes |
|------------|--------|-------|
| OrcFxAPI Python package | Required for Phase 4-5 | `pytest.skip` if unavailable |
| Supply boat RAO data | User-provided | Vessel-specific `.yml` RAO file |
| Existing `VesselProperties` model | Available | `equipment.py` line 261-283 |
| Existing campaign infrastructure | Available | `campaign.py` (487 lines), `CampaignGenerator` |
| Existing builder registry | Available | `registry.py` (82 lines) |
| `orcaflex_installation.py` | Reference | `create_installation_depth_model2()` (lines 199-241) handles similar depth-varying deployment |

### Existing Code to Build On

| Component | Path | Lines | Reuse Strategy |
|-----------|------|-------|----------------|
| Legacy deployment model | `solvers/orcaflex/orcaflex_installation.py` | 241 | `create_installation_depth_model2()` for depth-varying 6D buoys, slings, crane wire |
| Campaign generator | `solvers/orcaflex/modular_generator/schema/campaign.py` | 487 | Extend `CampaignMatrix` with deployment axes |
| Builder base + registry | `solvers/orcaflex/modular_generator/builders/base.py` + `registry.py` | 73+82 | Standard builder pattern |
| Buoys builder (6D buoy pattern) | `solvers/orcaflex/modular_generator/builders/buoys_builder.py` | 610 | 6D buoy emission pattern for deployed structure |
| Lines builder | `solvers/orcaflex/modular_generator/builders/lines_builder.py` | 331 | Line definition pattern for slings + crane wire |
| Vessel builder | `solvers/orcaflex/modular_generator/builders/vessel_builder.py` | 124 | Supply boat vessel object pattern |
| Equipment schema | `solvers/orcaflex/modular_generator/schema/equipment.py` | 404 | Reuse `VesselProperties`, `VesselMooring` |

### Test Strategy

| Test Scope | Target Path | Count (est.) |
|------------|-------------|--------------|
| Deployment schema | `tests/solvers/orcaflex/modular_generator/schema/test_deployment.py` | ~20 |
| Deployment builders | `tests/solvers/orcaflex/modular_generator/builders/test_deployment_builders.py` | ~18 |
| Campaign deployment | `tests/solvers/orcaflex/modular_generator/schema/test_campaign_deployment.py` | ~10 |
| Splash zone runner | `tests/solvers/orcaflex/deployment/test_splash_zone_runner.py` | ~12 |
| Load extraction | `tests/solvers/orcaflex/deployment/test_load_extractor.py` | ~10 |
| Load export | `tests/solvers/orcaflex/deployment/test_load_export.py` | ~8 |
| Governing case | `tests/solvers/orcaflex/deployment/test_governing_case.py` | ~6 |
| Deployment report | `tests/solvers/orcaflex/deployment/test_deployment_report.py` | ~6 |
| **Total** | | **~90** |

Run command: `PYTHONPATH="src:../assetutilities/src" python3 -m pytest tests/solvers/orcaflex/deployment/ tests/solvers/orcaflex/modular_generator/schema/test_deployment.py tests/solvers/orcaflex/modular_generator/builders/test_deployment_builders.py -v --tb=short --noconftest`

---
*Source: orcaflex analysis of structure deployment analysis. deploy equipment using supply boat on side of the vessel. perform analysis to ensure loads are captured. Finally structural integrity needs to be determined. method: splash zone; varying lengths; accurate weight or envelope weights; seastate RAOs etc. provide loads for structural analysis*
