---
id: WRK-307
title: Fix KVM display loss on ace-linux-2 after switching — EDID emulator or config fix
status: pending
priority: medium
complexity: simple
compound: false
created_at: 2026-02-22T00:00:00Z
computer: ace-linux-2
target_repos:
  - workspace-hub
commit:
spec_ref:
related: [WRK-287, WRK-050]
blocked_by: []
synced_to: []
plan_reviewed: false
plan_approved: false
percent_complete: 0
brochure_status: n/a
---

# Fix KVM display loss on ace-linux-2 after KVM switch

## What

After switching away from ace-linux-2 on the KVM and switching back, the display shows no
signal. The machine is alive (SSH works) but the NVIDIA T400 stops outputting video.

## Why

Unusable without a display. Switching to ace-linux-2 via KVM requires SSH workaround every
time, which defeats the purpose of a KVM setup.

## Diagnosis

- OS: Ubuntu 24.04, Wayland (GDM), NVIDIA T400 4GB
- Display output: `card2-DP-3` (DisplayPort) shows `connected` in sysfs — OS sees monitor
- GDM running; session active on `seat0 tty2` (session ID 5)
- Root cause: **KVM drops EDID signal on switch** — NVIDIA GPU stops driving output when
  EDID is lost, does not auto-recover when KVM switches back
- Workaround: `ssh vamsee@ace-linux-2 "loginctl unlock-session 5"` from ace-linux-1
  (sometimes restores display; if not, `sudo systemctl restart gdm` works but kills session)

## Acceptance Criteria

- [ ] Display recovers automatically (or in <5s) after KVM switch back to ace-linux-2
- [ ] No manual SSH intervention required
- [ ] Solution documented in aceengineer-02.md

## Plan

**Option A — Hardware (recommended):** Purchase DisplayPort EDID emulator dongle (~$10).
Plug into the KVM output port for ace-linux-2. Maintains fake EDID signal so NVIDIA T400
always thinks a monitor is connected regardless of KVM position.
- Search: "DisplayPort EDID emulator" or "DP dummy plug"
- Verify DP connector matches KVM output (DP vs mini-DP vs HDMI adapter)

**Option B — Software (try first, no cost):**
1. Create `/etc/X11/xorg.conf.d/10-force-display.conf`:
   ```
   Section "Device"
       Identifier "NVIDIA T400"
       Driver "nvidia"
       Option "ConnectedMonitor" "DP-3"
       Option "CustomEDID" "DP-3:/etc/X11/edid.bin"
   EndSection
   ```
2. Capture current EDID: `sudo get-edid | tee /etc/X11/edid.bin`
3. Note: Ubuntu 24.04 uses Wayland by default — Xorg config may need session switch to X11

**Option C — Wayland approach:**
Configure GDM to use X11 session: uncomment `WaylandEnable=false` in `/etc/gdm3/custom.conf`,
then apply Option B Xorg config.

## Agentic AI Horizon

- Hardware fix (EDID dongle) is straightforward and permanent — do it
- No AI deferral warranted

---
*Source: KVM switch display loss diagnosed 2026-02-22 via SSH from ace-linux-1. See WRK-287 session log for full diagnosis details.*
