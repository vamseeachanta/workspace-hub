---
id: WRK-023
title: Property GIS development timeline with future projection and Google Earth animation
status: pending
priority: low
complexity: complex
created_at: 2026-01-29 00:00:00+00:00
target_repos:
- assethold
commit: null
spec_ref: null
related:
- WRK-020
- WRK-022
blocked_by: []
synced_to: []
provider: claude
provider_alt: null
task_agents:
  phase_0: gemini
  phase_1: gemini
  phase_2: codex
  phase_3: codex
  phase_4: codex
  phase_5: codex
  phase_6: codex
  phase_7: codex
plan_reviewed: false
plan_approved: false
---

# Property GIS development timeline — historical and future projection with animation

## What
For a given property, build a GIS-based timeline showing how the surrounding area has developed over time and project how future development may evolve. Leverage historical satellite imagery (Google Earth historical imagery, Landsat, Sentinel), permit/zoning data, and development patterns to create:
1. **Historical timeline**: visual progression of development around the property over years/decades
2. **Future projection**: anticipated development based on zoning plans, permit filings, growth patterns
3. **Animation**: Google Earth-style animated flythrough or timelapse showing development progression

## Why
Understanding how an area has developed — and where it's heading — is critical for property investment decisions. A visual GIS timeline makes development patterns immediately apparent and supports investment thesis with spatial evidence rather than just market comparables.

## Acceptance Criteria
- [ ] Historical satellite/aerial imagery retrieval for a property location across multiple time periods
- [ ] Development change detection: identify new construction, road expansion, land use changes
- [ ] Permit and zoning data integration where available (local government open data)
- [ ] Timeline visualization: side-by-side or slider comparison of historical imagery
- [ ] Future development projection based on:
  - Current zoning and planned zoning changes
  - Filed permits and approved developments
  - Growth trajectory extrapolation from historical patterns
- [ ] Google Earth animation / KML timelapse export
- [ ] Blender 3D visualization option for development progression
- [ ] Report output with timeline narrative and key development milestones
- [ ] Document data sources, projection methodology, and confidence levels

## Plan

### Phase 0: Tool Research Spike (MUST COMPLETE FIRST)

**Goal**: Research available tools and platforms before writing any code. This is a complex GIS domain — leveraging existing tools is critical.

**Research areas**:
1. **Google Earth Pro** — Built-in historical imagery slider (free). Can it be scripted/automated via KML? What's the API story?
2. **Google Earth Engine** — Free for research. JavaScript/Python API for Landsat/Sentinel imagery. Evaluate: time-series composites, change detection algorithms (NDVI, land cover classification), export to video/GIF
3. **QGIS** — Free desktop GIS. Evaluate: TimeManager plugin for temporal visualization, satellite imagery plugins, KML export, Python scripting (PyQGIS)
4. **QGIS Temporal Controller** — Built-in time-based animation since QGIS 3.14
5. **Mapbox / Leafmap / Geemap** — Python libraries wrapping Google Earth Engine or Mapbox for Jupyter-based visualization
6. **Planet Explorer / Maxar** — Commercial high-res imagery options (may have free tiers for historical)
7. **USGS EarthExplorer** — Free Landsat imagery download. Evaluate API usability
8. **Copernicus Browser** — Free Sentinel-2 imagery. Evaluate Sentinel Hub APIs
9. **OpenStreetMap historical** — OSM Time Machine, Overpass Turbo with date filters

**Deliverable**: `assethold/docs/gis-tool-research.md` with:
- Tool comparison matrix (features, cost, API quality, learning curve)
- Recommended stack for each sub-task (imagery, change detection, animation, projection)
- Proof-of-concept for top 2 candidates (e.g., Google Earth Engine + QGIS)
- Decision on build-vs-leverage for each component

**Exit criteria**: Research document reviewed and approved before proceeding to Phase 1.

### Current Codebase Assessment

**Repository**: `/mnt/local-analysis/workspace-hub/assethold/`

**Existing property-related code**:
- `src/assethold/modules/multifamily/` -- multifamily property analysis (IRR, cash flow, equity multiple)
- `src/assethold/modules/stocks/` -- stock/portfolio analysis
- `src/assethold/modules/fixed_interest/` -- fixed deposit calculations
- `data/loopnet/` -- scraped commercial property listings (CSV, 42KB)
- `specs/commercial-property-valuation-framework/` -- detailed valuation spec (commercial property scoring, location analysis, cap rate)
- `specs/family-dollar-valuation-model/` -- NNN property valuation model

**No existing GIS/geospatial code**: grep for gis/satellite/imagery/kml/blender/landsat/sentinel returned zero matches in application code. All matches were in agent tooling metadata.

**Tech stack**: Python 3.9+, pandas, plotly, matplotlib, numpy, yaml, sqlalchemy. No geospatial libraries currently installed.

**Test infrastructure**: `tests/conftest.py` (10K lines), `tests/test_smoke.py`, pytest with 80% coverage requirement.

### Phase 1: Research and Data Source Integration (4 hours)

1. **Add geospatial dependencies** to `pyproject.toml`:
   - `geopy` -- geocoding addresses to lat/lon
   - `folium` -- interactive Leaflet maps
   - `simplekml` -- KML file generation for Google Earth
   - `rasterio` -- satellite imagery handling (GeoTIFF)
   - `shapely` -- geometric operations
   - `geopandas` -- spatial DataFrames
   - Optional: `sentinelsat` (Sentinel-2 imagery API), `landsatxplore` (Landsat API)

2. **Create module structure**:
   ```
   src/assethold/modules/gis/
       __init__.py
       geocoder.py          # Address -> lat/lon, property boundary lookup
       imagery_fetcher.py   # Satellite imagery download (Landsat/Sentinel)
       change_detector.py   # Development change detection between images
       timeline_builder.py  # Assemble historical timeline
       projector.py         # Future development projection
       kml_exporter.py      # Google Earth KML/KMZ animation export
       report_generator.py  # HTML/PDF report with timeline narrative
   ```

3. **Data sources to integrate**:
   - **Google Earth Engine** (free for research): historical Landsat imagery back to 1984, Sentinel-2 from 2015
   - **USGS EarthExplorer API**: Landsat Collection 2 Level-2 (surface reflectance)
   - **Sentinel Hub**: Sentinel-2 imagery with cloud filtering
   - **OpenStreetMap**: building footprints, road networks (via Overpass API)
   - **Local government open data**: permit filings, zoning maps (varies by jurisdiction)
   - **Census/ACS data**: population growth, demographics over time

### Phase 2: Historical Imagery Retrieval (6 hours)

1. **`geocoder.py`**: Address to coordinates with property boundary
   - Use geopy for geocoding
   - Use Census TIGER/Line for parcel boundaries
   - Return lat/lon centroid + bounding box for imagery queries

2. **`imagery_fetcher.py`**: Download historical satellite images
   - Query Landsat Collection 2 via `landsatxplore` for 5-year intervals (1990, 1995, 2000, ...)
   - Query Sentinel-2 via `sentinelsat` for recent years (2016-present, higher resolution)
   - Cloud cover filtering (<20%)
   - Crop to property area of interest (AOI) + surrounding buffer (e.g., 2km radius)
   - Save as GeoTIFF with metadata (date, source, resolution)
   - Target: `data/gis/{property_id}/imagery/`

3. **`change_detector.py`**: Identify development changes between time periods
   - Normalized Difference Vegetation Index (NDVI) comparison -- vegetation loss indicates construction
   - Building footprint extraction from OpenStreetMap historical data
   - Simple pixel-based change detection between consecutive images
   - Output: list of change events with location, date range, change type

### Phase 3: Timeline Visualization (4 hours)

1. **`timeline_builder.py`**: Assemble historical development timeline
   - Combine satellite imagery, building footprints, and permit data into a chronological timeline
   - Output: list of development milestones with dates, descriptions, and spatial extent

2. **Interactive timeline views**:
   - **Folium slider map**: side-by-side or overlay comparison with time slider
   - **Plotly timeline**: horizontal timeline with milestones and development density chart
   - **Image gallery**: grid of satellite images at different time periods with annotations

### Phase 4: Future Development Projection (4 hours)

1. **`projector.py`**: Predict future development patterns
   - **Input data**: historical growth rate, current zoning, filed permits, development plans
   - **Methods**:
     - Linear extrapolation of building density growth rate
     - Zoning analysis: identify undeveloped parcels zoned for development
     - Permit analysis: map approved-but-unbuilt permits as "planned development"
     - Buffer analysis: development tends to expand outward from existing centers
   - **Output**: projected development map for 5/10/15 year horizons with confidence levels
   - Confidence: HIGH (approved permits), MEDIUM (zoned for development), LOW (growth trajectory extrapolation)

### Phase 5: Google Earth Animation and KML Export (3 hours)

1. **`kml_exporter.py`**: Generate KML/KMZ for Google Earth
   - Use `simplekml` library
   - Create TimeSpan-tagged ground overlays (satellite images pinned to their dates)
   - Add placemarks for development milestones
   - Add projected development as semi-transparent overlays
   - Export as `.kmz` (compressed KML with embedded images)
   - Google Earth timeline slider will animate through the overlays

2. **Optional Blender integration** (stretch goal):
   - Generate 3D terrain mesh from elevation data (USGS DEM)
   - Drape satellite imagery as texture
   - Script camera flythrough animation
   - Export as video (MP4)
   - This is complex and should be a separate follow-up task

### Phase 6: Report Generation (2 hours)

1. **`report_generator.py`**: Create HTML report
   - Title page with property address and map
   - Timeline section with side-by-side imagery comparisons
   - Development milestones table
   - Future projection section with confidence levels
   - Data sources and methodology description
   - Interactive folium map embedded in HTML
   - Target: `data/gis/{property_id}/reports/timeline_report.html`

### Phase 7: Tests (3 hours)

1. **Create test directory**: `tests/unit/test_gis/`
2. **Test files**:
   - `test_geocoder.py` -- mock geopy responses, verify coordinate extraction
   - `test_change_detector.py` -- synthetic raster comparison, verify NDVI change detection
   - `test_timeline_builder.py` -- mock milestone data, verify chronological ordering
   - `test_projector.py` -- known growth patterns, verify extrapolation
   - `test_kml_exporter.py` -- verify KML XML structure and TimeSpan elements
3. **Test data**: Create synthetic fixtures (small GeoTIFFs, mock API responses)
4. **Coverage target**: 80% minimum for new module

### File Paths Summary

New directories and files:
```
assethold/src/assethold/modules/gis/
    __init__.py
    geocoder.py
    imagery_fetcher.py
    change_detector.py
    timeline_builder.py
    projector.py
    kml_exporter.py
    report_generator.py
assethold/tests/unit/test_gis/
    __init__.py
    test_geocoder.py
    test_change_detector.py
    test_timeline_builder.py
    test_projector.py
    test_kml_exporter.py
assethold/data/gis/
    .gitkeep
assethold/config/gis/
    default_config.yaml   # API keys, default buffer radius, image resolution
```

Files to modify:
- `assethold/pyproject.toml` -- add geospatial dependencies

### Dependencies and Prerequisites

**New Python packages** (add to pyproject.toml):
- `geopy>=2.4.0` -- geocoding
- `folium>=0.15.0` -- interactive maps
- `simplekml>=1.3.6` -- KML generation
- `geopandas>=0.14.0` -- spatial DataFrames
- `rasterio>=1.3.0` -- raster/satellite image IO
- `shapely>=2.0.0` -- geometry operations

**Optional packages** (for satellite imagery APIs):
- `sentinelsat>=1.2.0` -- Sentinel-2 data access (requires Copernicus account)
- `landsatxplore>=0.15.0` -- USGS Landsat data access (requires USGS EarthExplorer account)

**External accounts needed**:
- USGS EarthExplorer account (free) for Landsat data
- Copernicus Open Access Hub account (free) for Sentinel-2 data
- Google Earth Engine account (free for research) for historical imagery API

**Related work items**: WRK-020, WRK-022 (related property analysis tasks)

### Risk Assessment

- **API rate limits**: Landsat/Sentinel downloads can be slow for many time periods. Mitigate with caching and async downloads.
- **Image quality**: Cloud cover may limit usable imagery for some time periods. Mitigate with cloud masking and composite generation.
- **Jurisdiction variability**: Permit/zoning data availability varies widely by county/city. Design the system to work with satellite imagery alone as minimum viable, with permits as enhancement.
- **Blender integration**: Complex, requires Blender Python API. Recommend deferring to a follow-up task and focusing on KML animation for Phase 1.

### Review Notes

**Cross-review date**: 2026-02-10

| Reviewer | Verdict |
|----------|---------|
| Claude Opus 4.6 | MINOR |
| Gemini CLI | MAJOR |
| Codex CLI | NO_OUTPUT |

**Feedback incorporated**:
- conftest.py line count is wrong: plan states "10K lines" but actual is 304 lines (33x overcount)
- Heavy external dependency load: rasterio and geopandas have heavy C library dependencies (GDAL, PROJ) that may be difficult to install
- Blender integration correctly deferred
- Phase 2.3 change_detector.py complexity severely underestimated: 6-hour estimate for historical imagery retrieval including change detection is unrealistic, recommend breaking into sub-tasks and starting with simpler methods (NDVI)
- Phase 4 projector.py "predict future development patterns" is a sophisticated modeling task: 4-hour estimate is severely underestimated, recommend reducing scope or allocating much more time
- Historical OSM data specificity: standard Overpass API returns current data only, historical snapshots require specialized access -- needs clarification

*Approved by user: 2026-02-10 (with mandatory Phase 0 tool research spike added)*

---
*Source: for a property, develop a gis timeline of the development and anticipation of how the future development may look like. google earth animation etc.*

## Agentic AI Horizon

- GIS development timeline tool adds spatial investment intelligence to assethold; moderate ecosystem value but primarily personal/investment focused.
- Satellite imagery pipeline (Phase 2) and future projection (Phase 4) are substantially complex; improved vision models in 3–4 months will make change detection and projection significantly better.
- **Disposition: park 3 months** — this is a strong candidate for improved multimodal agents; Phase 0 tool research can happen now, full implementation deferred to May 2026.
