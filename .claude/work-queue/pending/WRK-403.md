# WRK-403: Resolve worldenergydata dual validation packages

**Status**: pending
**Complexity**: medium
**Computer**: ace-linux-1
**Phase**: 3 (Phase B - Medium Refactor)
**Related**: WRK-345 (DataValidator moved to assetutilities, NOT worldenergydata.common)
**Audit**: 2026-02-24 (see audit section below)

## Problem

Two incompatible validation packages exist:
- `src/worldenergydata/validation/` — 3,030 LOC, class-based framework, **ACTIVE production code**
- `src/worldenergydata/common/validation/` — 1,135 LOC, Pydantic function-based, **test-only (zero src/ imports)**

## ⚠️ DIRECTION CORRECTION (from original WRK)

Original WRK had direction BACKWARDS. Audit findings:
- `validation/` is the canonical package (active BSEE well_data_verification imports)
- `common/validation/` is the orphaned duplicate (no src/ callers, test-only)
- **DELETE `common/validation/`**, keep `validation/`

## Blocker

Both validation test suites hang indefinitely during pytest collection.
Root cause: likely a logging/fixture issue in tests/unit/validation/ and tests/unit/common/validation/.
**Fix this blocker before executing migration.**

## Tasks

1. Fix pytest hang in tests/unit/validation/ (investigate conftest.py, logging setup)
2. Port any unique test cases from `tests/unit/common/validation/` → `tests/unit/validation/` where APIs are compatible
3. Delete `src/worldenergydata/common/validation/` (4 files)
4. Delete `tests/unit/common/validation/` (3 test files)
5. Update `tests/unit/common/test_validation.py` — remove common.validation imports, replace with validation/ equivalents or delete
6. Update `src/worldenergydata/common/__init__.py` if it re-exports common.validation
7. Run BSEE tests to confirm: `pytest tests/unit/bsee/ -v`
8. Commit in worldenergydata submodule

## Active production callers of validation/

- `src/worldenergydata/bsee/analysis/well_data_verification/base.py`
  → imports: ValidationError, ValidationResult, ValidationSchema, DataValidator
- `src/worldenergydata/bsee/analysis/well_data_verification/quality.py`
  → imports: ValidationResult, ValidationRule

## Acceptance Criteria

- `src/worldenergydata/common/validation/` deleted
- `tests/unit/common/validation/` deleted
- BSEE well_data_verification tests pass
- No hanging tests in validation/ suite
