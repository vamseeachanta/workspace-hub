---
id: WRK-615
title: "feat(digitalmodel/pipeline): automate thin-wall FEA — classification, parametric analysis, limit curves"
status: pending
priority: high
complexity: medium
compound: false
created_at: 2026-02-25T00:00:00Z
target_repos:
  - digitalmodel
commit:
spec_ref:
related:
  - WRK-560
  - WRK-497
  - WRK-616
blocked_by: []
synced_to: []
plan_reviewed: false
plan_approved: false
percent_complete: 0
brochure_status: n/a
computer: ace-linux-1
---

# feat(digitalmodel/pipeline): Automate Thin-Wall FEA — Classification, Parametric Analysis, Limit Curves

## What

Implement automated thin-wall pipeline analysis in `digitalmodel/pipeline/thin_wall/`:

1. **Classifier** — flag pipelines as thin-wall per DNV OS F101 / API RP 1111 D/t thresholds
2. **FEA input generator** — produce parameterised ANSYS Workbench input data (geometry, material,
   load cases) from pipeline specs
3. **Limit curve generator** — compute and plot moment–strain limit curves for given D/t ratios
4. **Verification** — validate outputs against 0116 project FEA results and 611 project calcs

## Why

Multiple client projects required thin-wall classification and local FEA (0116, 611). The analysis
is always hand-built from scratch. Automating it: (a) eliminates human error in limit curve
generation, (b) enables parametric sweeps across OD/WT combinations, (c) provides a basis for
unit tests verifiable against existing project calc workbooks.

## FEA Assets (Transferable from /mnt/ace)

### 0116 Thinwall Pipe FEA — ANSYS Workbench parametric model
- **Project**: `/mnt/ace/docs/disciplines/production/projects/0116_thinwall_pipe_fea/00_inbox/0116 Thinwall Pipe FEA/Analysis/Ref/Loading Matrix_1_Rev_12_DT67.wbpj`
- **IronPython journals** (14 automation scripts for parametric runs):
  - `session_files/journal1.wbjn` … `journal14.wbjn` (journal14_crashed.wbjn skip)
- **Geometry**: `dp0/SYS-2/DM/SYS-2.agdb` — pipe cross-section model
- **Materials**: `dp0/SYS-2/ENGD/EngineeringData.xml` — steel material definitions
- **Design points**: `DesignPointLog.csv` — parametric sweep inputs/outputs (OD × WT × load)
- **Parametric inputs**: `Parametric values.xlsx` — D/t sweep matrix
- **Reference outputs**: `Ansys Results (Parametric values).xlsx` — FEA results for code verification

### 611 Mecor Pipeline — additional ANSYS WB models (same DT67 template)
- `Loading Matrix_1_Rev_12_DT67_YieldPoint_NoTension_files/` — 15+ journals
- `Loading Matrix_1_Rev_12_DT67_WDSensitivity_files/` — weld defect sensitivity
- `Loading Matrix_1_Rev_12_DT67_OvalSensitivity_6mm_files/` — ovality sensitivity
- `Loading Matrix_1_Rev_12_DT67_TensionSensitivity_files/` — tension sensitivity
- `Rev_12_DT67_QA_Backup_files/` — QA reference model

**Transfer strategy**: Extract D/t parameters, material inputs, and load combinations from
`DesignPointLog.csv` + `EngineeringData.xml`. Replicate parametric logic in Python using
`PyMAPDL` / `PyMechanical` (open-source ANSYS Python interfaces). Journal `.wbjn` files contain
IronPython that can be ported to PyMechanical.

## Calc Examples (Verification Data — from WRK-560)

See `specs/data-sources/digitalmodel.yaml` → `calc_examples[standard=DNV-OS-F101]` and
`calc_examples[standard=API-RP-1111]`. The identified workbooks serve as **use cases for
verification of code** (expected inputs → expected outputs):

- `0116-CAL-0001-01 List of Pipelines Installed.xlsx` — thin-wall inventory, classification check
- `0611-CAL-0003-01 Mecor DNV-OS-F101 Pipe WT Sizing.xlsm` — burst/collapse WT per DNV F101
- `0611-CAL-0004-01 DNV-OS-F101 Pipe Checks.xlsx` — combined load check (pressure + bending)
- `0611-CAL-0005-01 Propagation Checks.xlsx` — propagation buckle pressure limit
- `0611-CAL-0002-01 API-1111 WT Sizing.xlsm` — burst/collapse per API RP 1111
- `Ansys Results (Parametric values).xlsx` — FEA moment–strain limit curve reference data

## Module Layout

```
src/digitalmodel/pipeline/thin_wall/
    __init__.py
    classifier.py        # ThinWallClassifier: D/t threshold logic per standard
    fea_inputs.py        # FEAInputGenerator: build ANSYS material + geometry YAML
    limit_curves.py      # LimitCurveGenerator: moment-strain limit curve from D/t
    models.py            # dataclasses: PipeSpec, ThinWallResult, LimitCurveResult
tests/pipeline/thin_wall/
    test_classifier.py
    test_fea_inputs.py
    test_limit_curves.py
    fixtures/            # excerpt from DesignPointLog.csv for unit tests
```

## Acceptance Criteria

- [ ] `ThinWallClassifier.classify(od_mm, wt_mm, standard)` returns thin-wall flag + D/t ratio
- [ ] D/t thresholds match DNV OS F101 §5 and API RP 1111 §4 (table documented in docstring)
- [ ] `FEAInputGenerator` produces YAML input file from `PipeSpec` (OD, WT, grade, design pressure)
- [ ] `LimitCurveGenerator.generate(od_mm, wt_mm)` returns moment vs strain curve matching
      `Ansys Results (Parametric values).xlsx` reference data within 5%
- [ ] Unit tests verify classifier against 0116-CAL-0001-01 pipe list (≥5 pipes)
- [ ] Integration test: full pipeline (classify → FEA inputs → limit curve) on 0116 reference case
- [ ] Cross-review via `scripts/review/cross-review.sh`
