---
id: WRK-315
title: "Migrate 24in pipeline installation HTML report scripts to Phase 4 framework"
status: pending
priority: medium
created: 2026-02-23
tags: [orcaflex, reporting, pipeline, installation, migration, phase4]
percent_complete: 0
blocked_by: [WRK-314]
links:
  - WRK-129
  - WRK-314
---

## Background

During WRK-314 Phase 4 review, two pre-existing monolithic post-processing scripts
were identified in `docs/domains/orcaflex/pipeline/installation/floating/24in_pipeline/monolithic/postproc/`:

| File | Lines | What it does |
|------|-------|-------------|
| `generate_html_report.py` | 795 | Reads `.sim` files, extracts RangeGraphs, builds Plotly HTML report manually |
| `generate_env_case_report.py` | 687 | Per-environment-case HTML report with tension/utilization charts |

These scripts manually re-implement what the Phase 4 framework now provides:
- Direct `import OrcFxAPI` (no guard)
- Inline Plotly chart construction
- Ad-hoc HTML template strings
- No test coverage
- No reuse across projects

## Goal

Replace both scripts with thin wrappers that call the Phase 4 API:

```python
from digitalmodel.solvers.orcaflex.reporting.extractors.aggregator import build_report_from_model
from digitalmodel.solvers.orcaflex.reporting import generate_orcaflex_report

model = OrcFxAPI.Model(sim_path)
report = build_report_from_model(model, project_name="24in Pipeline Installation",
                                  structure_type="installation")
generate_orcaflex_report(report, output_path=output_path)
```

## Scope

1. **Read** both scripts to catalog what features they use that Phase 4 doesn't yet provide
   (e.g., X65 utilization calc, grouped-by-tension chart pages, RangeGraph CSV export)
2. **Identify gaps** — any features missing from Phase 4 that block migration
3. **Create gap work items** if Phase 4 framework needs extending
4. **Rewrite** as thin wrappers OR add Phase 4 extensions to support them
5. **Preserve** the CSV RangeGraph export side-effect (may need new extractor method)

## Acceptance Criteria

- [ ] Gap analysis complete (list of features in old scripts not in Phase 4 framework)
- [ ] New wrapper scripts produce equivalent HTML output
- [ ] Old scripts archived (moved to `_archive/`) — not deleted
- [ ] Any Phase 4 framework extensions have tests

## Notes

- These are `docs/domains/` scripts (examples), not `src/` — migration is a quality
  improvement, not a production blocker
- The X65 yield check (`UTIL_LIMIT = 0.90`, `X65_YIELD_MPa = 448.2 MPa`) is a
  domain-specific design check that should map to `DesignCheckData.checks`
- RangeGraph CSV export is a side-effect not in Phase 4 — may warrant a new
  `export_rangegraph_csvs(lines, output_dir)` helper in `aggregator.py`
