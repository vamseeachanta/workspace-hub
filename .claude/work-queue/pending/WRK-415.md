# WRK-415: Break up digitalmodel infrastructure/ monolith

**Status**: in-progress
**Complexity**: complex
**Computer**: ace-linux-1
**Phase**: 5 (Phase D - Long Horizon)

## Problem
`src/digitalmodel/infrastructure/` has 40+ subdirs mixing config, solvers,
services, and validation. No clear domain alignment.

## Tasks
1. Audit all 40+ subdirs and classify by responsibility
2. Design target domain mapping (e.g., base_solvers/ → separate domains)
3. Migrate module by module with full test coverage
4. Fix all import chains
5. Commit in digitalmodel submodule

## Acceptance Criteria
- infrastructure/ split into ≤5 focused domain modules
- All tests pass
- Import graph has no circular dependencies

## Progress

### Phase 1 — Audit and Design (complete 2026-02-24)
- Audited all 12 top-level subdirs (218 Python files)
- Classified every subdir and file by responsibility
- Identified `common/` as the primary sprawl (52 files, 4 mixed responsibilities)
- Identified `services/` and `domains/` as misplaced modules
- Produced target 5-module structure spec
- Documented all external import callers that require path updates
- Spec: `digitalmodel/specs/modules/infrastructure-refactor.md`

### Phase 2 — Migration (pending)
- Phase 2A: config consolidation + core rename
- Phase 2B: validators shim removal
- Phase 2C: services web-layer extraction
- Phase 2D–F: common/ decomposition into solvers/ and utils/
