---
id: WRK-031
title: "Benchmark OrcaWave vs AQWA for 2-3 hulls"
status: pending
priority: medium
complexity: complex
created_at: 2026-01-29T12:00:00Z
updated_at: 2026-02-05T05:45:00Z
target_repos:
  - digitalmodel
commit: bacd8c1d
spec_ref: specs/modules/mighty-gliding-lemur.md
related: [WRK-025, WRK-028, WRK-029, WRK-030, WRK-096, WRK-097, WRK-098, WRK-099, WRK-100, WRK-101]
blocked_by: []
synced_to: []
---

# Benchmark OrcaWave vs AQWA Results

## What
Run both AQWA and OrcaWave diffraction analyses on 2-3 representative hull forms and produce a systematic comparison of results. Compare RAOs, added mass/damping coefficients, wave excitation forces, and motion responses.

## Why
Benchmarking solvers against each other builds confidence in results and identifies solver-specific behaviors. This is standard practice in hydrodynamic analysis to validate methodology and understand tool limitations.

## Progress

### Phase 1: Framework (COMPLETE)
Multi-solver benchmark comparison framework implemented:
- `MultiSolverComparator` — N-way pairwise comparison with consensus metrics
- `BenchmarkPlotter` — Plotly HTML overlay plots (amplitude, phase, combined, difference, heatmap)
- `BenchmarkRunner` — End-to-end orchestrator with JSON/HTML reports
- CLI command `benchmark-solvers` added
- 43 tests, all passing
- Commit: `bacd8c1d`

### Phase 2: Trial Run with Existing Data (COMPLETE)
Ran benchmark using existing L01_aqwa_benchmark CSV data:
- Script: `scripts/run_benchmark_ship_raos.py`
- Output: `docs/modules/orcawave/L01_aqwa_benchmark/benchmark_results/`
- Result: **NO_CONSENSUS** across all DOFs (expected — source data had mismatched parameters)

**Findings from trial run:**
| DOF | Magnitude Correlation | RMS Error | Issue |
|-----|----------------------|-----------|-------|
| Surge | 0.958 | 0.38 | Phase mismatch |
| Sway | 0.981 | 0.50 | Phase mismatch |
| Heave | -0.855 | 0.70 | **Inverted response** |
| Roll | 0.489 | 1.79 | Poor match |
| Pitch | 0.968 | 26.15 | **Magnitude scale difference** |
| Yaw | 0.967 | 8.50 | Magnitude scale difference |

**Root cause:** Original benchmark data was from models with:
- Different water depths (AQWA: 500m, OrcaWave original: 30m)
- Different mass values (AQWA: 44,082 Te, OrcaWave: 9,018 Te)
- Non-matching frequency discretization

### Phase 3: Run Proper 3-Way Benchmark (PENDING)

Requires running AQWA, OrcaWave, and BEMRosetta with **identical inputs**:
- Same mesh geometry
- Same mass/inertia properties
- Same water depth
- Same frequency/heading discretization

## Recommended Simple Hull Forms for 3-Way Benchmark

### Hull 1: Unit Box (Simplest - Validation)
- **Geometry**: 1m × 1m × 1m cube, draft 0.5m
- **Mesh**: `tests/hydrodynamics/bemrosetta/fixtures/sample_box.gdf` (5 panels)
- **Why**: Analytically tractable, fast to run, good for validating solver setup
- **Expected**: Near-perfect agreement if setups are correct

### Hull 2: Simple Barge (Basic Practical Case)
- **Geometry**: L=100m, B=30m, D=6m rectangular barge
- **Mesh**: ~200-500 panels
- **Why**: Common offshore structure, simple geometry, predictable behavior
- **Source**: Can generate from box dimensions or use WAMIT/AQWA tutorial files

### Hull 3: Cylinder/Spar (Axisymmetric)
- **Geometry**: Vertical cylinder, R=10m, draft=50m
- **Mesh**: ~100-300 panels (can use symmetry)
- **Why**: Tests axisymmetric case, common for spar platforms
- **Source**: Generate programmatically or from standard libraries

## Solver Requirements

| Solver | Executable | License | Status |
|--------|------------|---------|--------|
| AQWA | `aqwa_solve` | ANSYS license | Need to verify installation |
| OrcaWave | via OrcFxAPI | Orcina license | Need to verify installation |
| BEMRosetta | `BEMRosetta_cl.exe` | Open source (GPL) | Need to install |

## Next Steps

1. **Verify solver availability** on target machine
2. **Create mesh files** for recommended hulls (or locate existing)
3. **Create unified spec** with identical parameters for all 3 solvers
4. **Run benchmark** using framework
5. **Document findings** and solver-specific quirks

## Acceptance Criteria
- [x] Compare RAOs across all 6 DOFs for each hull (framework ready)
- [x] Compare added mass and damping matrices (framework ready)
- [ ] Compare wave excitation forces (not in unified schema yet)
- [x] Generate overlay plots (AQWA vs OrcaWave per hull per DOF) (framework ready)
- [x] Summary report with discrepancy analysis and insights (framework ready)
- [ ] Document any solver-specific settings that affect comparisons
- [ ] Run actual benchmarks on 2-3 hull forms with matched inputs
- [ ] Include BEMRosetta in 3-way comparison

---
*Source: benchmark orcawave vs aqwa results for 2-3 hulls*
