---
id: WRK-383
title: Standards-to-Module Capability Map — doc → repo → module linkage
status: pending
priority: high
complexity: medium
compound: false
created_at: 2026-02-24T00:00:00Z
target_repos:
  - workspace-hub
  - digitalmodel
  - worldenergydata
  - assetutilities
commit:
spec_ref:
related: [WRK-309, WRK-384, WRK-385]
blocked_by: []
synced_to: []
plan_reviewed: false
plan_approved: false
percent_complete: 0
brochure_status: n/a
computer: ace-linux-1
---

# Standards-to-Module Capability Map

## What

Build an explicit `standard → repo → specific module` linkage layer on top of the WRK-309
document index. Output: `specs/capability-map/<repo>.yaml` for each tier-1 repo, plus a
combined index queryable by agents.

## Why

WRK-309 Phase C maps documents to repos at the domain level. This WRK maps them to
specific sub-modules — the unit at which engineering work actually gets done. This enables:
- Agents to say "implement DNV-RP-B401" and immediately know which module to target
- Gap analysis at module granularity (not just repo)
- Auto-generation of scoped WRK items per standard per module

## Module Map (baseline from WRK-309 Phase B data)

### digitalmodel

| Discipline + Signal | Module | Typical Standards |
|---|---|---|
| structural/fatigue, S-N | `structural/fatigue` | DNVGL-RP-C203, BS 7608, ISO 19902 |
| structural/jacket, topside | `structural/structural_analysis` | API RP 2A, ISO 19902 |
| structural/pipe, burst, collapse | `structural/pipe_capacity` | API TR 5C3, DNV-ST-F101 |
| structural/fitness-for-service | `asset_integrity/API579` | API 579, BS 7910 |
| cathodic-protection | `subsea/` *(gap — no CP module)* | DNV-RP-B401, DNV-RP-F103 |
| pipeline/pressure containment | `subsea/pipeline` | DNV-ST-F101, API RP 1111 |
| pipeline/riser, catenary | `subsea/catenary_riser` | API RP 2RD, DNV-OS-F201 |
| pipeline/VIV | `subsea/viv_analysis` | DNV-RP-F105, DNVGL-RP-C205 |
| marine/mooring | `subsea/mooring_analysis` | DNV-OS-E301, API RP 2SK |
| marine/hydrodynamics | `hydrodynamics/` | DNVGL-RP-C205, ITTC |
| marine/wave spectra | `hydrodynamics/wave_spectra` | JONSWAP, PM spectra |
| installation/marine ops | `marine_ops/marine_engineering` | DNV-ST-N001 |
| installation/weather window | `marine_ops/marine_analysis` | DNVGL-RP-N103 |
| materials/fracture | `asset_integrity/fracture_mechanics` | BS 7910, API 579 |
| production/artificial lift | `marine_ops/artificial_lift` | API 11B, API 11E |

### worldenergydata

| Signal | Module | Source |
|---|---|---|
| BSEE GOM | `bsee/` | BSEE production / well data API |
| EIA US energy | `eia_us/` | EIA API v2 |
| SODIR Norway | `sodir/` | SODIR REST API |
| production forecasting | `production/` | Arps decline, FDAS |
| marine safety, incidents | `marine_safety/` | MAIB, NTSB, IMO GISIS |
| HSE/regulatory | `hse/`, `safety_analysis/` | USCG MISLE, API RP 75 |
| metocean | `metocean/` | ERA5, NOAA NDBC |
| well bore design | `well_bore_design/` | API RP 96, API TR 5C3 |

### assetutilities

| Signal | Module | Notes |
|---|---|---|
| calculations / unit conversion | `calculations/`, `units/` | Shared across repos |
| devtools / scaffolding | `devtools/` | Shared build tooling |
| common IO patterns | `common/` | Shared data patterns |

## Output Format

`specs/capability-map/digitalmodel.yaml`:
```yaml
repo: digitalmodel
generated: '2026-02-24'
modules:
  - module: structural/fatigue
    standards:
      - id: DNVGL-RP-C203
        title: Fatigue Design of Offshore Steel Structures
        path: /mnt/ace/O&G-Standards/DNV/...
        sha: sha256:abc123
        status: implemented  # implemented | gap | partial
        notes: S-N curves implemented; spectral fatigue partial
      - id: BS-7608
        status: gap
        notes: Not yet implemented; document available
    capabilities:
      - S-N curve fatigue life calculation
      - Stress concentration factor (SCF) lookup
    gaps:
      - Spectral fatigue (stochastic sea states)
      - Biaxial stress correction
  - module: subsea/cathodic_protection
    standards:
      - id: DNV-RP-B401
        status: gap
        notes: Sacrificial anode design module not built
    capabilities: []
    gaps:
      - Full anode mass calculation per DNV-RP-B401 Section 8
      - Impressed current CP design
```

## Implementation Steps

1. Write `scripts/data/document-index/build-capability-map.py`:
   - Load Phase B summaries (og_standards + ace_standards sources only)
   - For each summary: use discipline + org + doc_number + keywords → look up in module map table
   - Module map table hardcoded initially from the table above; expandable via YAML config
   - For each module: check if it's implemented (search digitalmodel source for standard reference)
   - Write `specs/capability-map/<repo>.yaml`

2. Legal gate: `scripts/legal/legal-sanity-scan.sh` on output YAML before commit

3. Update Phase D (`phase-d-data-sources.py`) to use capability-map output as input to
   `specs/data-sources/<repo>.yaml` (replacing the current heuristic output)

## Acceptance Criteria

- [ ] `specs/capability-map/digitalmodel.yaml` — all 40+ sub-modules listed with standard refs
- [ ] `specs/capability-map/worldenergydata.yaml` — all data source modules mapped
- [ ] `specs/capability-map/assetutilities.yaml` — utility modules mapped
- [ ] `scripts/readiness/query-docs.sh --module structural/fatigue` returns relevant docs
- [ ] Legal scan passes on all output YAMLs
