---
id: WRK-021
title: Stock analysis for drastic trend changes, technical indicators, and insider trading benchmarks
status: pending
priority: medium
complexity: complex
created_at: 2026-01-29T00:00:00Z
target_repos:
  - assethold
commit:
spec_ref:
related: []
blocked_by: []
synced_to: []
---

# Stock analysis — trend changes, technical indicators, insider trading benchmarks

## What
Build a stock analysis capability that monitors and identifies drastic changes in stock trends, evaluates key technical indicators, and tracks insider trading activity against benchmarks. The system should surface notable events such as unusual volume spikes, trend reversals, indicator crossovers, and significant insider buy/sell activity.

## Why
Timely awareness of drastic shifts in stock behavior — whether from price action, technical signal divergence, or insider trading patterns — enables faster, more informed investment decisions. Automating this monitoring reduces the risk of missing significant events.

## Acceptance Criteria
- [ ] Identify and integrate stock price data sources (Yahoo Finance, Alpha Vantage, etc.)
- [ ] Implement trend detection: moving averages, trend line breaks, support/resistance violations
- [ ] Implement technical indicators: RSI, MACD, Bollinger Bands, volume analysis, momentum
- [ ] Define "drastic change" thresholds for alerts (configurable)
- [ ] Integrate insider trading data (SEC Form 4 filings / EDGAR)
- [ ] Establish insider trading benchmarks (normal vs. unusual activity)
- [ ] Alert/notification system for significant events
- [ ] Summary dashboard or report output
- [ ] Support for watchlist of specific tickers
- [ ] Document data sources, indicator calculations, and alert thresholds

## Plan

**Target**: `assethold/src/assethold/stocks/` (new module — assethold currently has `base_configs/`, `common/`, `modules/` only)

### Phase 1 — Data Acquisition
- `data_sources.py`:
  - Yahoo Finance via `yfinance` library (free, no API key)
  - SEC EDGAR Form 4 filings (EDGAR XML filing API via `https://efts.sec.gov/LATEST/search-index`, free, requires User-Agent header)
  - Alpha Vantage as optional secondary source (requires API key)
  - **Rate limiting**: EDGAR max 10 req/sec with custom User-Agent per SEC policy; yfinance with 2-second delay between batch requests; retry with exponential backoff
  - **Caching**: local file cache for OHLCV data and EDGAR filings (configurable TTL)
- `watchlist.py`:
  - YAML-based watchlist configuration
  - Ticker symbols, alert thresholds, monitoring frequency
  - Define ticker universe source; handle delisted symbols gracefully

### Phase 2 — Technical Indicators
- `indicators.py`:
  - Moving averages: SMA, EMA (20, 50, 200 day)
  - RSI (14-day default)
  - MACD (12/26/9 standard)
  - Bollinger Bands (20-day, 2σ)
  - Volume analysis: OBV, volume moving average
  - All computed from OHLCV data using pandas/numpy (no ta-lib dependency)

### Phase 3 — Trend Change Detection
- `trend_detector.py`:
  - Golden cross / death cross detection (MA crossovers)
  - Support/resistance level breaks (local min/max identification)
  - Volume spike detection (>2σ from mean)
  - RSI overbought/oversold transitions
  - Configurable thresholds via YAML

### Phase 4 — Insider Trading Monitor
- `insider_tracker.py`:
  - Parse SEC EDGAR Form 4 XML filings
  - Track insider buy/sell transactions
  - Compute insider trading benchmarks: buy/sell ratio, transaction sizes
  - Flag unusual activity (large purchases, cluster buying, >3σ volume)

### Phase 5 — Alerting & Reporting
- `alert_engine.py`:
  - Check watchlist against all detectors
  - Generate alert events with severity (info, warning, critical)
  - Output: JSON alert file, summary Markdown report
- `dashboard.py`:
  - Plotly charts: price with MA overlays, RSI, MACD, insider activity timeline

### Phase 6 — Tests
- Unit tests: indicator calculations against known values
- Trend detection tests with synthetic price series
- EDGAR parser tests with sample Form 4 XML
- Edge cases: penny stocks, low-volume, missing data

### Review Notes
- **Verdict**: Claude: MINOR | Codex: MINOR | Gemini: APPROVE
- **Actions taken**:
  - Noted `stocks/` is a new module in assethold
  - Fixed EDGAR API terminology: "XBRL API" corrected to "XML filing API" with correct endpoint
  - Added rate limiting for both yfinance and EDGAR per SEC policy
  - Added caching strategy and retry/backoff
  - Added delisted symbol handling in watchlist
  - Corporate actions handling (splits/dividends) deferred to future enhancement per Codex suggestion
- *Cross-reviewed: 2026-02-09*

*Approved by user: 2026-02-09*

---
*Source: stock analysis to know of any drastic changes in stock trends, technical indicators, insider trading benchmarks etc.*
