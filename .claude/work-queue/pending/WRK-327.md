# WRK-327 â€” OrcaFlex modular HTML report (config-driven, per example)

**Status:** complete | **Priority:** medium | **Percent complete:** 100

## Goal

Build a modular, config-driven HTML report generator for OrcaFlex `.sim` results with 8
optional sections. Mirrors WRK-321 (OrcaWave HTML report generator).

Analog to WRK-321 (OrcaWave modular HTML report).

## Module structure

```
src/digitalmodel/orcaflex/reporting/
    __init__.py          # exports generate_orcaflex_report
    builder.py           # orchestrates sections from config
    config.py            # ReportConfig dataclass; YAML schema
    sections/
        model_summary.py     # object counts, environment, analysis type
        static_config.py     # static shape plots (line profiles, XY view)
        time_series.py       # effective tension, bending moment, vessel motion
        range_graphs.py      # heatmap of max/min across arclength
        code_check.py        # utilization table (DNV/API/ISO code results)
        mooring_loads.py     # fairlead tensions, watch circle
        modal_analysis.py    # natural frequencies, mode shapes (if available)
        qa_summary.py        # QA pass/fail from WRK-325 checks
```

## Entry point

```python
from digitalmodel.orcaflex.reporting import generate_orcaflex_report

generate_orcaflex_report(
    sim_path="path/to/A01 Catenary riser.sim",
    config_path="path/to/report_config.yml",  # optional; defaults to all sections
    output_path="path/to/report.html"
)
```

## Config YAML schema (key toggles)

```yaml
sections:
  model_summary: true
  static_config: true
  time_series: true
  range_graphs: true
  code_check: false       # only if code check data present in .sim
  mooring_loads: false    # only for moored systems
  modal_analysis: false   # only if modal data present
  qa_summary: true
```

## Acceptance criteria

- All 8 section types implemented with toggle on/off via config YAML
- A01 catenary riser example produces valid self-contained HTML report with all sections
- Config YAML schema documented in `docs/domains/orcaflex/examples/report_config_template.yml`
- Tests cover: builder orchestration, each section renderer (unit), full A01 integration
- Report is self-contained (inline CSS + JS via Plotly CDN); no external file dependencies
- Consistent visual style with the OrcaWave HTML report from WRK-321

## Notes

- OrcaWave report entry point: `from digitalmodel.orcawave.reporting import generate_orcawave_report`
- OrcaFlex `.sim` loaded via `OrcFxAPI.Model.LoadSimulation()`; OrcaWave `.owr` via
  `OrcFxAPI.Diffraction.LoadResults()`
- `src/digitalmodel/orcawave/` package already exists; create `src/digitalmodel/orcaflex/`
  as a parallel package (currently no `orcaflex` package at src level)
- Code check section requires that code check results were computed and saved in the `.sim`
