---
id: WRK-015
title: Metocean data extrapolation to target locations using GIS and nearest-source
  modeling
status: pending
priority: medium
complexity: complex
created_at: 2026-01-29 00:00:00+00:00
target_repos:
- worldenergydata
commit: null
spec_ref: null
related: []
blocked_by: []
synced_to: []
provider: claude
provider_alt: null
task_agents:
  phase_1: gemini
  phase_2: codex
  phase_3: codex
  phase_4: codex
  phase_5: codex
plan_reviewed: false
plan_approved: false
---

# Metocean data extrapolation to target locations using GIS and nearest-source modeling

## What
Build a capability to extrapolate metocean data (wave and current) from the nearest available public or proprietary data source (e.g., NDBC buoys, hindcast databases) to a user-specified target location. The extrapolation must account for local terrain, bathymetry, and geographic features that influence wave propagation and current patterns. The workflow should leverage GIS tools and spatial APIs including Google Maps, Google Earth, and QGIS for spatial assessment and analysis.

## Why
Metocean data is rarely available at the exact location of interest. Engineering assessments for offshore and coastal projects require site-specific wave and current conditions. A systematic, terrain-aware extrapolation methodology bridges the gap between available data sources and project locations, improving the accuracy of design inputs.

## Acceptance Criteria
- [ ] Identify and catalog available public metocean data sources (NDBC buoys, NOAA, Copernicus, hindcast models, etc.)
- [ ] Implement nearest-source identification: given a target lat/lon, find the closest data source(s)
- [ ] Integrate GIS tools for spatial analysis:
  - Google Maps / Google Earth API for location context and visualization
  - QGIS for bathymetry, terrain, and spatial analysis
- [ ] Develop extrapolation methodology for wave data (Hs, Tp, direction) accounting for:
  - Distance and direction from source to target
  - Bathymetry and seabed terrain between source and target
  - Sheltering effects (islands, headlands, structures)
  - Fetch length and wind exposure differences
- [ ] Develop extrapolation methodology for current data accounting for:
  - Tidal influences at target location
  - Local bathymetry-driven current patterns
  - Proximity to coastline, channels, or constrictions
- [ ] Produce output in standard metocean format (time series and/or statistical summaries)
- [ ] Validate approach against locations where both source and target data exist
- [ ] Document methodology, assumptions, limitations, and applicable range
- [ ] Provide visualization of source-to-target spatial relationship on map

## Plan

**Target**: `src/worldenergydata/metocean/extrapolation/`

### Existing Assets (reuse)
- `metocean/` module — 37 Python files, 6 API clients (COOPS, ERDDAP, Met Norway, NDBC, OpenMeteo)
- `metocean/clients/ndbc_client.py` — NDBC buoy data retrieval (wave, wind, currents)
- `metocean/clients/coops_client.py` — NOAA CO-OPS tidal/current data
- `metocean/statistics/` — Weibull fitting, extreme value analysis, joint probability
- GEBCO bathymetry data available via ERDDAP client

### Phase 1 — Source Catalog & Nearest-Source Finder
- `source_catalog.py` — Catalog of metocean data sources with locations:
  - NDBC buoys (lat/lon from NDBC station list)
  - NOAA CO-OPS stations
  - Hindcast grid points (ERA5 via CDS API, CFSR via NCEP — if accessible; if not, limit extrapolation to locations within 100km of NDBC/COOPS stations and document limitation)
- `nearest_finder.py` — Given target (lat, lon):
  - Find K nearest sources using Haversine distance
  - Rank by distance, data availability, record length
  - Return `SourceSet` with metadata

### Phase 2 — Spatial Assessment
- `bathymetry.py` — Fetch GEBCO bathymetry along source-to-target path
- `fetch_analysis.py` — Calculate fetch length for key wind directions at target
- `sheltering.py` — Detect sheltering features (land masses, islands) between source and target
- `harmonization.py` — Unit/variable harmonization layer: standardize wave, current, and direction variables across sources before modeling
- Use existing ERDDAP client for bathymetry data; QGIS integration deferred to future enhancement unless explicitly needed

### Phase 3 — Extrapolation Models
- `wave_extrapolation.py`:
  - Depth-induced wave transformation (shoaling, refraction via Snell's law)
  - Fetch-limited wave growth (Bretschneider/JONSWAP scaling)
  - Sheltering reduction factors
  - Output: adjusted Hs, Tp, direction at target
- `current_extrapolation.py`:
  - Tidal harmonic analysis transfer (amplitude/phase adjustment)
  - Depth-averaged current scaling by bathymetry ratio
  - Output: current speed/direction at target

### Phase 4 — Validation & Visualization
- Validate at locations where both source and target data exist (e.g., adjacent NDBC buoys)
- Google Maps / Folium map showing source stations, target location, spatial relationship
- Plotly comparison plots: source data vs extrapolated vs actual (where available)

### Phase 5 — Tests
- Unit tests: Haversine distance, shoaling factor, fetch calculation
- Validation test: extrapolate from one buoy to adjacent known buoy, compare. Candidate pairs: NDBC 42001 and 42002 (central GoM, ~200km apart) or 44013 and 44017 (Boston approach)
- Edge cases: deep-to-shallow transition, open ocean (no sheltering)

### External Dependencies
- Google Maps API key needed for map visualization (optional — Folium/Leaflet as fallback)
- QGIS integration optional (Python bindings via `qgis.core` if installed)
- GEBCO data accessible via existing ERDDAP client (no new dependency)

### Review Notes
- **Verdict**: Claude: MINOR | Codex: MINOR | Gemini: APPROVE
- **Actions taken**:
  - Fixed Existing Assets paths: `data_sources/ndbc/` and `data_sources/coops/` corrected to `clients/ndbc_client.py` and `clients/coops_client.py`
  - Added ERA5/CFSR fallback: if hindcast data unavailable, limit extrapolation to within 100km of stations
  - Added candidate validation buoy pairs for Phase 5
  - Added harmonization layer to Phase 2 per Codex feedback
  - Scoped QGIS integration as deferred future enhancement rather than optional MVP path
- *Cross-reviewed: 2026-02-09*

*Approved by user: 2026-02-09*

---
*Source: metocean data extrapolation to different location based on available closest public or closed data source. this should utilize gis skill, software/apis such as google maps, google earth, qgis to assess and analyze details. eg: from data available from buoy closest to the location develop/extrapolate/model metocean (wave and current) data for the location taking into account the terrain*

## Agentic AI Horizon

- Boosts worldenergydata metocean capability directly — site-specific data extrapolation is a high-leverage analysis primitive agents will use repeatedly.
- Spatial reasoning and API integration will improve with better models, but the domain-specific wave propagation physics still needs coded implementation; not superseded by AI.
- **Disposition: do now, shape for leverage** — implement the physics-based extrapolation core now; structure it as a skill so agents can invoke it autonomously on new project locations.
