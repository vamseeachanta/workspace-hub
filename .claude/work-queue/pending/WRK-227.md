---
id: WRK-227
title: Trim CLAUDE.md + reduce total context budget below 16KB
status: pending
priority: medium
created: 2026-02-21
target_machine: ace-linux-1
area: workspace-infra
---

# WRK-227: Trim CLAUDE.md + reduce context budget

## Problem

Readiness harness (ensure-readiness.sh) flagged 2 R5 violations:

- `CLAUDE.md` is 6,728 bytes — **164% of 4KB target**
- Total context budget is 29,548 bytes — **180% of 16KB limit**
  - CLAUDE.md = 6,728b
  - rules/ = 12,749b
  - memory/ = 10,071b

## Goal

Bring CLAUDE.md under 4KB and total context under 16KB.

## Plan

1. **Trim CLAUDE.md** (biggest ROI — 6.7KB → <4KB)
   - Move verbose sections to `.claude/docs/`:
     - Git Operations detail → `docs/git-workflow-detail.md`
     - Windows Compatibility detail → `docs/windows-compat.md`
     - Edit Safety detail → `docs/edit-safety.md`
     - Commands section → `docs/commands.md` (already partly there)
   - Replace with 1-line cross-references in CLAUDE.md

2. **Consolidate rules/** (12.7KB — secondary)
   - Identify redundancy between rules and docs
   - Merge or trim verbose rules

3. **Trim memory/MEMORY.md** (10KB — already truncated at 200 lines)
   - Move older/stable patterns to topic files
   - Keep MEMORY.md under 6KB

## Acceptance Criteria

- `ensure-readiness.sh` reports no R5 warnings
- CLAUDE.md ≤ 4,096 bytes
- Total context ≤ 16,384 bytes
- All cross-references resolve correctly

## Notes

- Identified on ACMA-ANSYS05 (Windows), to be executed on **ace-linux-1**
- Readiness check run: 2026-02-21
- Hardware assessment JSON for ACMA-ANSYS05 moved to
  `specs/modules/hardware-inventory/` this session (commit 7c11ea3)
