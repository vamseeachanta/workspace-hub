---
id: WRK-662
title: "analysis(digitalmodel): engineering standards citation audit — version + clause consistency via Gemini"
status: pending
route: B
priority: medium
complexity: medium
compound: false
created_at: 2026-03-01T00:00:00Z
target_repos:
  - digitalmodel
commit:
spec_ref:
related:
  - WRK-607
  - WRK-497
  - WRK-491
  - WRK-482
blocked_by: []
synced_to: []
plan_reviewed: false
plan_approved: false
percent_complete: 0
brochure_status: n/a
computer: ace-linux-1
provider: gemini
orchestrator: gemini
cross_review: pending
---

# analysis(digitalmodel): Engineering Standards Citation Audit

## What

digitalmodel implements calculations against 15+ engineering standards
(DNV, API, ISO, ABS, BS). Version years and clause numbers are embedded as
string literals and comments throughout the codebase. Inconsistencies cause
calculation errors when a standard is revised.

Use Gemini to sweep all engineering modules in one pass and produce a
standards-citation-audit report flagging:
1. Conflicting version years for the same standard across modules
2. Clause citations that look implausible (wrong section numbering pattern)
3. Modules referencing a standard without a version year
4. Standards used in multiple modules with different acceptance thresholds

## Plan

### Phase 1 — Collect all engineering source files (10 min)

Target directories:
- `src/digitalmodel/cathodic_protection/`
- `src/digitalmodel/subsea/pipeline/`
- `src/digitalmodel/structural/`
- `src/digitalmodel/marine_ops/`
- `src/digitalmodel/well/`

```bash
cd digitalmodel

find src/digitalmodel/{cathodic_protection,subsea,structural,marine_ops,well} \
  -name "*.py" | sort | xargs cat | \
gemini -p "
You are auditing engineering standards citations in Python source code.

Find every reference to an engineering standard (DNV, API, ISO, ABS, BS, NACE, ASME,
AISC, ASCE) in comments, docstrings, and string literals. For each reference extract:
- Standard name + number (e.g., DNV-RP-F105, API RP 1111, ISO 15589-2)
- Version year if present (e.g., 2017, 2021)
- Clause/section reference if present (e.g., §6.2.1, Section 4.3)
- Source file and approximate line context
- Acceptance threshold if present (e.g., 0.85Fy, -0.800V Ag/AgCl)

Then produce:
1. CONFLICT table: same standard, different version years across files
2. MISSING VERSION table: standard referenced with no year
3. IMPLAUSIBLE CLAUSE table: clause numbering that looks wrong for that standard type
4. THRESHOLD MISMATCH table: same standard used with different acceptance values
5. SUMMARY: total standards found, total files scanned, highest-risk conflicts" -y \
> specs/wrk/WRK-662/standards-citation-audit.md
```

### Phase 2 — Cross-check against standards-transfer-ledger (5 min)

```bash
# Check which standards in audit are in the ledger
python3 -c "
import yaml, re
ledger = yaml.safe_load(open('data/document-index/standards-transfer-ledger.yaml'))
audit = open('specs/wrk/WRK-662/standards-citation-audit.md').read()
for entry in ledger.get('standards', []):
    name = entry.get('standard','')
    found = name in audit
    print(f'{\"✓\" if found else \"✗\"} {name}')
" 2>/dev/null | head -30
```

### Phase 3 — Fix highest-priority conflicts (30 min)

For each CONFLICT finding:
- Determine which version year is authoritative (check standards-transfer-ledger.yaml)
- Update the non-authoritative file to match
- Add inline comment: `# DNV-RP-F105 2017 §X.Y — updated from 2014 per WRK-662`

## Acceptance Criteria

- [ ] `specs/wrk/WRK-662/standards-citation-audit.md` with all 4 tables populated
- [ ] CONFLICT table has ≤ 5 items OR all conflicts are resolved with inline comments
- [ ] MISSING VERSION table has action taken (year added or deferred with rationale)
- [ ] Cross-check against standards-transfer-ledger shows ≥80% of cited standards
  appear in the ledger
- [ ] Legal scan passes

## Why

Engineering standards evolve; using mixed version years in the same codebase can produce
contradictory acceptance criteria for the same parameter. Gemini's large context makes a
single-pass audit of 15+ modules practical without losing cross-module context.

## Agentic AI Horizon

High fit: citation extraction + comparison is pattern matching at scale. No execution
or test running needed. Gemini handles engineering terminology natively.
