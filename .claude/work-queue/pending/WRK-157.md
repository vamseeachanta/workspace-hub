---
id: WRK-157
title: "Fatigue analysis module enhancement — S-N curve reporting and parametric sweeps"
status: pending
priority: high
complexity: complex
created_at: 2026-02-16T00:00:00Z
target_repos:
  - digitalmodel
target_module: fatigue
commit:
spec_ref:
related: [WRK-146, WRK-148]
blocked_by: []
plan_reviewed: true
plan: inline
plan_approved: true
percent_complete: 0
brochure_status: n/a
provider: claude
provider_alt:
---

# Fatigue Analysis Module Enhancement

## What
Enhance the fatigue analysis module with standardized reporting, parametric S-N curve sweeps, and cumulative damage calculation workflows. The module has 221 S-N curves (a key GTM differentiator per WRK-146) but zero pending work items to make this capability client-facing.

## Why
- 221 S-N curves across multiple standards (DNV, BS, API, IIW) is a significant asset
- Zero pending WRK items enhance fatigue — this is the biggest gap relative to marketing claims
- Fatigue is a high-value service for offshore structures (risers, pipelines, mooring chains)
- GTM strategy (WRK-148) needs demonstrable fatigue capability for prospect conversations

## Acceptance Criteria
- [ ] Audit existing fatigue module: catalog S-N curve library, identify gaps
- [ ] S-N curve comparison report: overlay multiple curves with design factor bands
- [ ] Cumulative damage calculation (Palmgren-Miner): from stress range histogram to damage ratio
- [ ] Parametric sweep: vary SCF, environment, curve selection, wall thickness across parameter space
- [ ] HTML report with interactive Plotly charts (S-N curves, damage breakdown, sensitivity)
- [ ] At least 3 worked examples: pipeline girth weld, riser SCR, mooring chain
- [ ] Tests for cumulative damage calculation against known reference values

## Plan

**Target**: `src/digitalmodel/structural/fatigue/` (extend existing)

### Existing Assets (reuse)
| Component | Path | Lines | Status |
|-----------|------|-------|--------|
| S-N curves | `fatigue/sn_curves.py` | 856 | 45 curves across DNV/API/BS/AWS |
| Damage accumulation | `fatigue/damage_accumulation.py` | 735 | Miner + modified + nonlinear + critical plane |
| Rainflow | `fatigue/rainflow.py` | — | ASTM E1049-85, optional Numba JIT |
| Frequency domain | `fatigue/frequency_domain.py` | — | Dirlik, Tovo-Benasciutti, narrowband |
| Analysis engine | `fatigue/analysis.py` | — | Integration orchestrator |
| Plotter | `fatigue/sn_curve_plotter.py` | — | Log-log/linear-log plots |
| Visualizer | `fatigue_apps/visualizer.py` | 23.9K | Interactive dashboards |
| Tests | `tests/structural/fatigue/` | 493 | Comprehensive suite |

### Phase 1 — S-N Curve Library Audit & Expansion
- Audit: catalog all 45 existing curves with standard, class, environment
- Correct WRK-157 title: actual count is 45 base curves (not 221 — investigate if variants/environments inflate count)
- Add missing standards: ABS, Norsok M-120, ISO 19902, GL Rules
- Create YAML-backed curve catalog at `data/fatigue/sn_curves.yaml`
- Implement lazy-loading via existing `_ensure_loaded()` mechanism
- Target: 100+ curves with proper provenance

### Phase 2 — S-N Curve Comparison Report
- Overlay multiple curves from different standards on single log-log plot
- Design factor bands (DFF=1, 2, 3, 10) as semi-transparent regions
- Interactive Plotly HTML with curve selection dropdown
- Filter by: standard, environment (air/seawater/CP), joint category
- Export: standalone HTML + tabular CSV

### Phase 3 — Parametric Sweep Engine
- Vary: SCF, environment, S-N curve, wall thickness, DFF
- Cartesian product of parameter space
- Output: damage matrix + sensitivity tornado chart
- Show: which parameter has greatest impact on fatigue life

### Phase 4 — Worked Examples (3 minimum)
- Pipeline girth weld: DNV-RP-C203 D-curve, seawater+CP, SCF=1.5
- SCR (Steel Catenary Riser): DNV F1-curve, touchdown zone stress histogram
- Mooring chain: API RP 2SK T-curve, tension range spectrum
- Each example: stress histogram input → rainflow → damage accumulation → life estimate → HTML report

### Phase 5 — Design-Code Report Templates
- Per-standard report layout: methodology, curve parameters, damage breakdown
- Recommendations engine (already exists) integrated with Plotly visualizations
- Match wall_thickness M-T report quality level

### Test Strategy
- Curve expansion: verify each new curve against published standard table
- Parametric sweep: monotonic damage increase with SCF
- Worked examples: compare against published literature values
- Target: 50+ new tests (on top of existing 493)
- Run: `PYTHONPATH="src:../assetutilities/src" python3 -m pytest tests/structural/fatigue/ -v --tb=short --noconftest`

### Dependencies
- No external software
- Standards documents for reference values (DNV-RP-C203, BS 7608, API RP 2A, ABS guides)

## Notes
- S-N curve data is the foundation — the module likely already has curve lookup
- Key standards: DNV-RP-C203, BS 7608, API RP 2A, IIW recommendations
- This connects to WRK-045 (rigid jumper VIV) and WRK-046 (drilling riser) downstream
