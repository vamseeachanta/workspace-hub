---
id: WRK-213
title: 'Codex multi-agent roles — assess native role system vs workspace-hub agent skill approach'
status: pending
priority: medium
complexity: medium
compound: false
created_at: 2026-02-19T00:00:00Z
target_repos:
  - workspace-hub
module: automation
tags:
  - codex
  - agent-teams
  - multi-agent
  - skills
  - interoperability
related:
  - WRK-212
blocked_by: []
synced_to: []
provider: claude
spec_ref: ''
plan_reviewed: false
plan_approved: false
percent_complete: 0
brochure_status: n/a
---

# WRK-213: Codex Multi-Agent Roles — Assessment and Integration

## What

Codex 0.102.0 shipped native multi-agent role configuration via
`.codex/config.toml` + `agents/role_config.toml` files. Assess how this maps
to workspace-hub's existing agent skill approach (WRK-212), and determine
what should be adopted natively vs kept as workspace-specific skill files.

## Context

From @LLMJunky's "Codex Multi-Agent Playbook Part 1" (2026-02-19, 70K views):

- **Three built-in roles**: `default`, `explorer`, `worker`
- **Custom roles**: `.codex/config.toml` + per-agent `agents/role_config.toml`
  — model, reasoning level, system prompt, permissions, MCP servers
- **Hierarchical scope**: project vs global (mirrors AGENTS.md pattern)
- **Default cap**: 6 parallel agents; configurable to `max_threads = 12`+
- **Skills ↔ subagents**: callable from each other (bidirectional)
- **25 pre-built roles**: github.com/am-will/codex-skills/tree/main/agents

**Key insight**: What workspace-hub builds manually (agent `.md` files + spawn
prompts) is now natively supported in Codex via TOML config. The Claude Code
equivalent is the agent-teams skill (WRK-212). The two ecosystems are
converging on the same architectural pattern.

## Questions to answer

1. **TOML roles vs skill index routing — what's the difference?**
   Claude Code routes via skill index (`.claude/skills/**/SKILL.md` + frontmatter
   `invoke:` field) — declarative markdown loaded at session start. Codex TOML
   roles (`.codex/config.toml`) are imperative config: model selection, reasoning
   level, system prompt, permissions, MCP servers — closer to agent *constructor*
   parameters than skill *content*. Are these the same concept at different layers,
   or genuinely different? Where does one end and the other begin?

2. **Can Codex and Claude use these interchangeably?**
   Workspace-hub already symlinks `.codex/skills` → `.claude/skills` (WRK-198-202)
   so skill *content* is shared. But Codex TOML role config has no Claude Code
   equivalent — Claude Code agents are configured via spawn prompt + `subagent_type`,
   not a config file. Can the TOML role definitions be written so that Codex and
   Claude Code agents behave equivalently when given the same task? Or are they
   fundamentally different execution models that only share skill content?

3. Are the 25 pre-built Codex roles worth importing as workspace-hub skills
   (or linking as `canonical_ref:` in `_diverged/`)?
4. Does `.codex/config.toml` `max_threads = 12` affect how we think about
   MAX_TEAMMATES=3 in Claude Code? (Different systems — don't conflate)
5. Should workspace-hub's `.codex/skills` symlinks (WRK-198-202) reference
   these new Codex role configs, or are they separate?
6. Is there a `CODEX.md` equivalent pattern to document Codex-side agent
   roles for the workspace?

## Research Finding — TOML roles vs skill index (2026-02-19)

They solve the same problem at different layers:

### Claude skills (OpenClaw pattern)
- Routing is **semantic** — LLM reads skill descriptions, picks the right one based on intent
- Skills = instruction sets (markdown telling the agent *what to do*)
- Single agent loads the skill into context, executes sequentially
- No per-skill model or permission boundaries

### Codex TOML roles
- Routing is **explicit** — orchestrator spawns specific named roles programmatically
- Roles = full agent specs (model + permissions + tools + system prompt + MCP servers)
- Designed for **parallel** execution (multiple agents running simultaneously)
- Each role can have a different model, different sandbox, different tool access

### Core difference
> Claude skills extend *what one agent knows*.
> Codex roles define *who gets spawned for what task* — more like a hiring org chart than a knowledge base.

### Interchangeable? Partially.
- The **mental model** transfers completely — define specialisations, route tasks to the right one
- The **files** don't — TOML configs won't run in Claude Code and vice versa
- Where they **meet**: MCP servers. Both Codex and Claude support MCP, so a shared MCP tool layer is the common substrate

### Implication for workspace-hub
The 700+ module skill library is already the "role definition" content layer. The question is
only whether the routing layer is a markdown `invoke:` field, a TOML role name, or an MCP call.
The domain logic (skill content) doesn't care — which is why `.codex/skills → .claude/skills`
symlinks already work and should continue to be the pattern (WRK-198-202).

**Practical decision**: Keep skill *content* shared (symlinks). Maintain routing *config*
separately per provider (TOML for Codex, skill frontmatter for Claude). MCP is the bridge
for tooling that must work in both.

## Acceptance Criteria

- [ ] Assess 25 pre-built Codex roles — identify any worth adopting
- [ ] Document Codex role config approach in `.codex/CODEX.md` (already exists)
- [ ] Determine if workspace-hub needs a Codex-side agent skill that mirrors
      the Claude Code `agent-teams` skill
- [ ] Update WRK-212 if Codex native roles reduce what Claude Code needs to handle

## Plan

Awaiting plan. Route A sufficient — research + doc updates only.
No cross-review required unless adopting Codex roles changes shared config.

*Source: @LLMJunky Codex Multi-Agent Playbook Part 1, shared 2026-02-19*
