---
id: WRK-095
title: Engineering unit tracking system — spec to code lifecycle
status: pending
priority: high
complexity: complex
compound: false
created_at: 2026-02-03T00:00:00Z
target_repos:
  - rock-oil-field
commit:
spec_ref:
related: []
blocked_by: []
synced_to: []
---

# Engineering Unit Tracking System — Spec to Code Lifecycle

## What
Build a system that tracks engineering units (e.g. force, pressure, length, mass, time) through the entire lifecycle: from specification/definition, through input parsing, internal computation, and all the way to code output/reporting. Ensures unit consistency, traceability, and correctness across the full engineering analysis pipeline.

## Why
Engineering software must handle physical units rigorously. Errors in unit conversion or inconsistent unit assumptions are a leading cause of engineering failures. A lifecycle-aware unit tracking system prevents unit mismatch bugs, documents unit provenance, and enables automated verification that inputs, intermediate calculations, and outputs all use consistent and correct units.

## Scope
1. **Spec layer** — Define canonical unit systems (SI, Imperial, custom) and unit registry with conversion factors
2. **Input layer** — Parse and validate units from user input, config files, and external data sources; tag values with their unit metadata
3. **Computation layer** — Propagate units through calculations; detect and flag unit mismatches during arithmetic operations
4. **Output layer** — Format results with correct units; support unit conversion on output; generate unit audit trail
5. **Lifecycle traceability** — Each quantity carries its unit history from source to sink

## Acceptance Criteria
- [ ] Unit registry with extensible unit definitions (SI base + derived, Imperial, custom)
- [ ] Input parser that associates values with validated units
- [ ] Unit propagation through arithmetic operations (multiply, divide, add with compatibility check)
- [ ] Automatic conversion between compatible units
- [ ] Unit mismatch detection raises clear errors at computation boundaries
- [ ] Output formatter respects target unit system preferences
- [ ] Audit trail: any output value can trace its unit lineage back to input
- [ ] Test coverage: unit conversion accuracy, mismatch detection, lifecycle traceability
- [ ] Documentation of supported units and extension mechanism

---
*Source: for engineering work, to track units all the way from spec, input and all the way to code and output. the entire lifecycle as a typical engineering process*
