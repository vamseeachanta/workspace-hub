---
id: WRK-309
title: Document intelligence — index, understand, link and plan use of all stored documents
status: pending
priority: medium
complexity: high
compound: true
created_at: 2026-02-22T00:00:00Z
target_repos:
  - workspace-hub
  - digitalmodel
  - worldenergydata
  - assetutilities
  - assethold
  - doris
  - OGManufacturing
  - frontierdeepwater
  - saipem
  - acma-projects
  - pdf-large-reader
commit:
spec_ref:
related: []
blocked_by: []
synced_to: []
plan_reviewed: true
plan_approved: true
percent_complete: 85
brochure_status: n/a
computer: ace-linux-1
---

# Document Intelligence — Index, Understand, Link and Plan Use of All Stored Documents

## What

Build a living knowledge layer on top of all documents stored across the two machines
(`/mnt/local-analysis`, `/mnt/ace`, `/mnt/dde`) so that their contents can be surfaced,
cross-referenced, and systematically used to enhance engineering work across all repos.

This is a phased, compound work item. Each phase gates the next. Phase G spawns the
mission-driven WRK items for each repo once the enhancement plan is approved.

## Why

Thousands of standards, reports, papers, and reference documents exist on the drives.
Currently they are opaque to agents. Indexing and linking them turns static files into
active context that can inform code, calculations, and decisions — without manual
retrieval.

## Repo Mission Map (for Phase C classification)

Established from repo analysis 2026-02-22. Used to guide domain classification in
Phase B/C and to scope work items in Phase G.

| Repo | Mission | Primary Domain(s) | Maturity |
|------|---------|-------------------|
----------|
| digitalmodel | Offshore/subsea/marine engineering analysis via ASCII-first config | fatigue, structural, hydrodynamics, risers, mooring, cathodic-protection | Production (700+ modules, 2000+ tests) |
| worldenergydata | Global energy market data aggregation and economic analysis | energy-economics, BSEE/USCG data, field-development, production-forecasting | Mid (CLI mature, analytics growing) |
| assethold | Stock portfolio management with technical + insider sentiment analysis | investments, portfolio-optimisation | Mid (170+ tests, daily strategy tool) |
| doris | Subsea pipeline design and regulatory compliance calculations | pipeline, structural, DNV/API codes | Early-mid (project-driven, needs formalisation) |
| OGManufacturing | Oil & gas manufacturing and production systems | drilling, production, manufacturing | Early (minimal docs, needs structure) |
| frontierdeepwater | Deepwater exploration project documents and analysis | deepwater, project-management | Early (document repo, limited portable code) |
| saipem | Offshore umbilical installation engineering (project-specific) | installation-analysis, OrcaFlex, umbilicals | Early (project-specific, not yet portable) |
| acma-projects | Structural design consultancy data and action tracking | structural, LNG-tanks, vessels, composites | Early (document-driven) |
| assetutilities | Business automation utilities for common workflows | automation, data-processing, web | Early (foundational utilities) |
| pdf-large-reader | Memory-efficient PDF processing for large files (100MB+, 1000+ pages) | document-processing, AI-integration | Production (93% coverage, 215 tests) |
| rock-oil-field | Offshore installation & engineering project work | installation, OrcaFlex, project-management | Early (project-driven) |
| achantas-data | Personal/public datasets | data | Minimal |

## Phases

### Phase A — Document Index

Build a filesystem index of all documents across drives:
- Target paths: `/mnt/local-analysis`, `/mnt/ace` (ace-linux-1), `/mnt/dde` (ace-linux-2 via SSHFS)
- File types: `.pdf`, `.docx`, `.xlsx`, `.pptx`, `.md`, `.txt`, `.csv`
- Output: `data/document-index/index.jsonl` — one record per file:
  ```json
  {"path": "...", "host": "ace-linux-1", "size_mb": 1.2, "ext": "pdf",
   "mtime": "2024-03-01", "domain": null, "summary": null}
  ```
- Exclude: `$RECYCLE.BIN`, `.git`, `node_modules`, `__pycache__`
- Legal scan gate: run `scripts/legal/legal-sanity-scan.sh` on any content extracted

### Phase B — Content Extraction and Summarisation

For each indexed document, extract and summarise content:
- PDF: `pdftotext` or `pymupdf` (pdf-large-reader available for 100MB+ files); DOCX: `python-docx`; XLSX: `openpyxl` (headers + sample rows)
- Store per-document summary in `data/document-index/summaries/<hash>.json`:
  ```json
  {"path": "...", "hash": "sha256:...", "title": "...", "summary": "...",
   "keywords": [...], "page_count": 42, "extracted_at": "..."}
  ```
- Rate-limited: process in batches; resume-safe (skip already-summarised)
- LLM: Haiku for bulk, Sonnet for complex technical docs
- Legal gate: summaries must pass block-severity scan before commit

### Phase C — Domain Classification and Enhancement Plan

Classify each document by engineering domain against the Repo Mission Map above:
- Domains: structural, geotechnical, cathodic-protection, marine, pipeline,
  fluid-dynamics, materials, installation, regulatory, energy-economics,
  portfolio, project-management, other
- Map documents → repos and flag status:
  ```
  DNV-RP-F103-2010 → digitalmodel/cp_module    [implemented]
  ABS Guide Offshore Structures → digitalmodel  [gap: structural_module not built]
  API RP 2A → digitalmodel                      [gap: jacket analysis missing]
  BSEE production reports → worldenergydata     [data: expand FDAS module]
  S-N curve supplement → digitalmodel           [extend: 17→20 standards]
  ```
- Output: `data/document-index/enhancement-plan.yaml`
- Gate: **user review required** before Phase D starts

### Phase D — Repo and Data Source Definitions

Establish authoritative definitions of each repo's data sources:
- For each repo, create/update `specs/data-sources/<repo>.yaml`:
  ```yaml
  repo: digitalmodel
  standards:
    - id: DNV-RP-F103-2010
      path: /mnt/ace/standards/DNV/DNV-RP-F103-2010.pdf
      index_ref: sha256:abc123
      status: implemented  # implemented | gap | planned
  ```
- Reconcile script: `scripts/readiness/reconcile-data-sources.sh` — detects new/moved docs
- Legal gate: no client-specific paths or identifiers in committed YAML

### Phase E — Linked Index with Legal Gates

Wire everything together so agents can query by domain, standard, or repo:
- `data/document-index/registry.yaml` — master registry linking index, summaries, domains, repo refs
- Query CLI: `scripts/readiness/query-docs.sh --domain cp --repo digitalmodel`
- All entries pass legal sanity scan before commit
- Quarterly refresh cron: re-scan index for new/moved/deleted files

### Phase F — Backlog of Identified Work (from document gaps)

Populate WRK queue from Phase C gaps:
- Each unimplemented standard with a located document becomes a WRK item
- Items created as `pending`, `blocked_by: WRK-309` cleared after Phase E
- Prioritised by: agent capability + available API credits at execution time
- Review cadence: quarterly

### Phase G — Repo-Mission Work Items (pre-seeded from analysis)

Independent of document gaps — create WRK items for known repo missions based on
current gap analysis. These are executable now, not gated on document indexing.

#### digitalmodel (offshore/subsea/marine)
- WRK: Expand S-N curve library from 17 → 20 standards (BS 7608 rev, ISO 19902, DNVGL-RP-C203 latest)
- WRK: Structural module — implement jacket/topside analysis (API RP 2A, ISO 19902)
- WRK: Hydrodynamic database expansion — add NDBC buoy data ingestion for wave scatter
- WRK: Pipeline/flexibles module — DNV-ST-F101 / API RP 1111 pressure containment checks
- WRK: Extend CP module to add sacrificial anode design (DNV-RP-B401 detailed calcs)
- WRK: CALM buoy mooring fatigue — automate spectral fatigue from OrcaFlex time-domain output

#### worldenergydata (energy economics / BSEE / USCG)
- WRK: Integrated web dashboard — Plotly Dash app exposing BSEE + FDAS data
- WRK: Production forecasting module — Arps decline curve (exponential/hyperbolic/harmonic)
- WRK: Real-time EIA/IEA feed ingestion — weekly crude/gas production updates
- WRK: MAIB + NTSB incident correlation — cross-ref with USCG MISLE for root-cause taxonomy
- WRK: Field development economics — extend MIRR/NPV to include carbon cost sensitivity

#### assethold (portfolio / investments)
- WRK: Fundamentals scoring — integrate P/E, P/B, EV/EBITDA from yfinance for ranking
- WRK: Covered call analyser — option chain ingestion + premium/yield calculator
- WRK: Risk metrics — VaR, CVaR, Sharpe ratio, max drawdown per position and portfolio
- WRK: Sector exposure tracker — auto-classify holdings by GICS sector, flag concentration

#### doris (pipeline / subsea)
- WRK: Formalise calculation workflow — migrate ad-hoc MATLAB/Excel calcs to Python modules
- WRK: DNV-ST-F101 pressure containment checks — system pressure test, MAOP validation
- WRK: API RP 1111 — deepwater pipeline design checks (collapse, propagating buckle)
- WRK: On-bottom stability module — DNV-RP-F109 soil resistance calculations

#### OGManufacturing (drilling / production)
- WRK: Establish repo structure — add README, src/, specs/, tests/ scaffold
- WRK: Production surveillance module — basic well KPI tracking (GOR, WCT, PI)
- WRK: Drilling engineering module — casing design checks (burst, collapse, tension — API TR 5C3)

#### saipem / rock-oil-field (installation / umbilicals)
- WRK: Portable installation analysis library — extract generic OrcaFlex automation from project-specific code
- WRK: Vessel weather-window calculator — operability analysis from Hs/Tp scatter

#### acma-projects (structural / composites)
- WRK: LNG tank structural checks — API 620 / EN 14620 thin-shell hoop stress calculations
- WRK: Aluminium structural module — Eurocode 9 / AA ADM member capacity checks
- WRK: Composite panel design tool — Classical Laminate Theory (CLT) strength checks

#### pdf-large-reader (document processing)
- WRK: OCR pipeline — Tesseract integration for scanned engineering drawings and reports
- WRK: Table extraction — structured output (DataFrame) from engineering tables in PDFs
- WRK: Standards cross-reference extractor — detect and link clause references across docs

#### Cross-repo / workspace-hub
- WRK: Unified CLI entry point — single `ace` command routing to all repo tools
- WRK: Shared engineering constants library — material properties, unit conversions, seawater properties
- WRK: Agent-readable specs index — `specs/` YAML index consumable by AI agents without reading every file

## Data Drive Inventory (surveyed 2026-02-22)

### ace-linux-1: `/mnt/ace` — 7.3 TB Seagate, ext4, 4.5 TB used

| Directory | Contents | Domain Relevance |
|-----------|----------|
------------------|
| `O&G-Standards/` | Organised standards library: ABS, API, ASTM, BSI, DNV, ISO, MIL, NEMA, Norsok, SNAME, OnePetro. Includes inventory DB, OCR text, search scripts | digitalmodel, doris, OGManufacturing, acma-projects |
| `Production/` | Production engineering: ESP pump curves, EOR surveillance, SRP, jet pump, GIS, training manuals, Permian Resources data | worldenergydata, OGManufacturing |
| `docs/` | Engineering project archive: pipeline installation, mooring analysis, BOP, FEA, drilling riser, umbilical, flange design (~100+ project folders) | digitalmodel, doris, saipem, rock-oil-field |
| `umbilical/` | Umbilical-specific engineering data | saipem, digitalmodel |
| `data/` | Legacy HDD backups (2021-11-22-sd-HDD, va-hdd-2) | Mixed — needs Phase B triage |
| `0_mrv/`, `2H/` | Misc engineering files | TBD |
| `_ss_repo/` | Unknown repo/archive | TBD |

### ace-linux-1: `/mnt/local-analysis` — 932 GB WDC, NTFS, 84 GB used

| Directory | Contents | Domain Relevance |
|-----------|----------|
------------------|
| `workspace-hub/` | Primary workspace-hub git repo (canonical source) | All repos |

### ace-linux-2: `/mnt/dde` — 2.8 TB Seagate, NTFS, 2.0 TB used

| Directory | Contents | Domain Relevance |
|-----------|----------|
------------------|
| `0000 O&G/` | Codes & standards, 2H projects, Oil & Gas codes, Production data | digitalmodel, doris, OGManufacturing |
| `documents/` | Engineering project archive (~60+ project folders): pipeline, mooring, BOP, FEA, subsea, LNG, composites, drilling riser | digitalmodel, doris, saipem, acma-projects |
| `Literature/` | Reference library: engineering, finance, CFA, MBA, oil & gas, software, safety reviews, communication | Cross-repo reference |
| `Orcaflex/` | OrcaFlex models: drilling riser, Shell wellhead fatigue, Mecor S-Lay, API checks | digitalmodel, saipem, rock-oil-field |
| `ABSG/` | ABS Group engineering documents | digitalmodel, acma-projects |
| `g-drive/` | Google Drive export: AceEngineer admin, financials, invoices, project docs | assethold, acma-projects |
| `o-drive/` | Office/OneDrive export: APC, financial analysis, offshore, PE, Rio, ODA, FFS | worldenergydata, acma-projects |
| `dropbox_contents/` | Legacy Dropbox backup | TBD — needs Phase B triage |
| `Temp - Oil&Gas/` | Temporary O&G engineering files | TBD |
| `Personal/`, `Information_Important/` | Personal documents | Exclude from indexing |
| `TECH Animation Fundaes/`, `TECH Writing/` | Technical communication resources | Reference only |

### ace-linux-2: `/mnt/local-analysis` — 932 GB WDC, NTFS, 441 GB used

| Directory | Contents | Domain Relevance |
|-----------|----------|
------------------|
| `workspace-hub/` | Stale local copy of workspace-hub (not canonical — SSHFS mount is primary) | Backup only |

### Access Paths (from either machine)

| Drive | From ace-linux-1 | From ace-linux-2 |
|-------|-------------------|
-------------------|
| ace-linux-1 `/mnt/ace` | Local | `/mnt/remote/ace-linux-1/ace` (SSHFS) |
| ace-linux-1 `/mnt/local-analysis` | Local | `/mnt/remote/ace-linux-1/local-analysis` (SSHFS) |
| ace-linux-2 `/mnt/dde` | `/mnt/remote/ace-linux-2/dde` (SSHFS) | Local |
| ace-linux-2 `/mnt/local-analysis` | `/mnt/remote/ace-linux-2/local-analysis` (SSHFS) | Local |

### Phase A Indexing Notes

- **Largest scan target**: `/mnt/ace` (4.5 TB) — run overnight
- **Richest standards source**: `/mnt/ace/O&G-Standards/` — already has inventory DB + search scripts
- **Overlap expected**: `docs/` on ace and `documents/` on dde likely share project folders — deduplicate by hash in Phase A
- **Exclude from indexing**: `$RECYCLE.BIN`, `System Volume Information`, `Personal/`, `Information_Important/`, `.git`, `node_modules`, `__pycache__`, `lost+found`
- **Google/Office exports** (`.gsheet`, `.gdoc`): not directly readable — flag for manual review or skip

## Acceptance Criteria

- [ ] Phase A: `data/document-index/index.jsonl` committed, all drives covered
- [ ] Phase B: summaries generated for ≥80% of indexed PDFs; legal gate passing
- [ ] Phase C: enhancement-plan.yaml reviewed and approved by user
- [ ] Phase D: `specs/data-sources/` YAML files for all active repos; reconcile script written
- [ ] Phase E: registry.yaml queryable via CLI; quarterly cron installed
- [ ] Phase F: backlog WRK items created from Phase C gaps; ready to execute
- [ ] Phase G: all repo-mission WRK items created in pending queue; prioritised
- [ ] Phase H: standards-to-module capability map built (WRK-383); doc→repo→module linkage complete
- [ ] Phase H: module registry written for digitalmodel (WRK-384)
- [ ] Phase H: agent architecture blueprint committed (WRK-385)
- [ ] Phase H: gap-to-WRK generator run; 50+ targeted WRK items created (WRK-386)

## Constraints

- **Legal gate is mandatory** at every phase — no client identifiers in committed content
- **Resume-safe** — all batch processing must be restartable without re-processing
- **Drive availability** — Phase A requires SSHFS mounts live (blocked_by WRK-310)
- **No full-text commit** — summaries only, never raw document content in git
- **Quota-aware** — LLM summarisation uses Haiku for bulk; Sonnet only for complex docs
- **Phase G items are pre-seeded** — they can be created immediately, do not wait for Phase E

## Notes

- Windows documents (`.docx`, `.xlsx`) on NTFS drives are accessible via SSHFS
- `/mnt/ace` is the largest store (4.5TB, ext4) — Phase A will take time; run overnight
- `/mnt/dde` is on ace-linux-2 (NTFS, 2TB) — accessible via `/mnt/remote/ace-linux-2/dde`
- `pdf-large-reader` is the right tool for large standards PDFs in Phase B
- Phase G items represent ~30 concrete WRK items ready to execute as agent capability grows
