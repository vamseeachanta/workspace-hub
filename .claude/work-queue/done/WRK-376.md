---
id: WRK-376
title: "Casing/tubing triaxial stress design envelope check (von Mises, API DF, anisotropic grades)"
status: done
priority: medium
complexity: medium
compound: false
created_at: 2026-02-24T12:00:00Z
target_repos:
  - digitalmodel
commit: 212eb8f368f96bbeab70615729aadc5d740a54a7
spec_ref:
related: []
blocked_by: []
synced_to: []
plan_ensemble: false
ensemble_consensus_score: null
plan_reviewed: false
plan_approved: false
percent_complete: 100
brochure_status: pending
computer: ace-linux-1
---

# Casing/Tubing Triaxial Stress Design Envelope Check

## What

Implement a triaxial stress design envelope check for casing and tubing strings in
`digitalmodel`, following the approach used by commercial well design tools such as
StimGnosis 4.2 (reference image: LinkedIn post showing Design Envelope tab for a 7"
Production Tubing string in 25Cr anisotropic grade).

The check produces a **von Mises design envelope plot** (Real Axial Force [klbf] vs
Differential Pressure [psi]) with:

1. **API limits ellipse** — burst/collapse/tension/compression limits corrected for the
   applicable Design Factor at rated conditions (e.g. 100% RBW)
2. **VME ellipse (isotropic)** — Von Mises Equivalent stress envelope with DF applied
3. **Anisotropic VME ellipse** — for CRA/chrome grades where hoop and axial yield differ
   (e.g. 25Cr: max yield 95,000 psi, min yield 80,000 psi, sigma hoop ≠ sigma tension)
4. **Load case points** plotted on the same axes for:
   - Initial condition (as-run)
   - Pressure test (% of MHP, e.g. 70%)
   - Shut-in tubing leak HOT
   - Full evacuation
   - Tubing shut-in HOT
   - Any additional user-defined load cases

Output: pass/fail per load case with margin-to-envelope, plus a Plotly interactive plot.

## Why

The triaxial check (API TR 5C3 / ISO 10400) is the industry-standard method for casing
and tubing string design verification. Current digitalmodel coverage handles individual
burst/collapse/tension checks but lacks:
- The combined triaxial (von Mises) envelope
- Multi-load-case overlay on a single design space
- Support for anisotropic (CRA/chrome) grade yield asymmetry
- The interactive design envelope plot as a deliverable

This gap means casing design reviews require external tools (StimGnosis, WellCat, Landmark
StressCheck). Implementing the check in digitalmodel makes it scriptable, automatable, and
integrated with the wider asset lifecycle analysis pipeline.

## Acceptance Criteria

- [ ] `digitalmodel` module created: `src/digitalmodel/well/casing/triaxial_check.py`
- [ ] `TriaxialEnvelope` class: computes API limit ellipse and VME ellipse from tubular
  section properties (OD, wall thickness, grade, yield strength, design factor)
- [ ] Anisotropic yield support: separate hoop / axial yield strengths (for CRA grades)
- [ ] `LoadCase` dataclass: holds (axial force [klbf], differential pressure [psi], label)
- [ ] Pass/fail evaluation: each load case checked against all three envelopes; margin
  reported as % remaining to nearest envelope
- [ ] Plotly interactive output: overlaid ellipses + load case scatter, matching the
  StimGnosis layout (x = Real Axial Force klbf, y = Differential Pressure psi)
- [ ] Unit tests: at least one isotropic grade case and one anisotropic (25Cr) case with
  known expected margins
- [ ] CLI entry point or example notebook demonstrating the 7" 25Cr case from the reference

## Reference

- StimGnosis 4.2 screenshot (Design Envelope tab): LinkedIn post image
- Standard: API TR 5C3 / ISO 10400 — Equations and Calculations for the Properties of Casing, Tubing, Line Pipe, and Drillpipe
- String in reference: 7 in. Production Tubing, 25CrI80 Generic, 20.00 ppf
  - Wall Thickness: 0.361 in, ID: 4.778 in, Wall Tolerance: 12.5%
  - Max Yield: 95,000 psi, Min Yield: 80,000 psi
  - Sigma Radial/Hoop: 72,000 psi, Sigma Tension: 80,000 psi, Sigma Compression: 64,000 psi

## Agentic AI Horizon

- Once implemented, this check can be triggered autonomously by an agent whenever a
  casing string design changes — no human intervention needed to verify triaxial compliance
- Integrates directly with the Sense-Plan-Act loop (WRK-373): a change in well parameters
  → agent reruns triaxial check → flags load cases near the envelope boundary
- Enables automated design space exploration: surrogate model trained on the envelope
  surface could rapidly screen thousands of string options

---
*Source: add a casing check relevant to: https://media.licdn.com/dms/image/v2/D5622AQHM1vKy4ipELg/feedshare-shrink_2048_1536/B56Zxx6p4yGwAo-/0/1771437727538?e=1773273600&v=beta&t=yShb3IKr13Ps1RcqMU3F0XGcSfQphY-5rwd5UNHdqgg*
