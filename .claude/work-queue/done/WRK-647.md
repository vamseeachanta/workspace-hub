---
id: WRK-647
title: "validate(review): test patched Claude wrapper against WRK-624 plan spec"
status: done
priority: high
complexity: medium
route: B
compound: false
created_at: 2026-02-28T00:00:00Z
target_repos:
  - workspace-hub
commit:
spec_ref:
related:
  - WRK-624
  - WRK-644
  - WRK-646
blocked_by: []
parent:
synced_to: []
plan_reviewed: true
plan_approved: true
percent_complete: 100
brochure_status: n/a
computer: ace-linux-1
execution_workstations: [ace-linux-1]
plan_workstations: [ace-linux-1]
provider: codex
provider_alt: claude
cross_review: strong
html_output_ref: assets/WRK-647/review.html
claim_routing_ref: .claude/work-queue/assets/WRK-647/claim-evidence.yaml
plan_html_review_draft_ref: .claude/work-queue/assets/WRK-647/plan-html-review-draft.md
plan_html_review_final_ref: .claude/work-queue/assets/WRK-647/plan-html-review-final.md
html_verification_ref: .claude/work-queue/assets/WRK-647/html-verification.md
---

# validate(review): Test Patched Claude Wrapper Against WRK-624 Plan Spec

## Problem

`scripts/review/submit-to-claude.sh` has been patched to stop piping large review
content through stdin. Instead, it writes review content to a temp file and asks
Claude to read it via the `Read` tool. This is the first meaningful wrapper-level
change that directly targets the suspected stdin transport failure mode.

It now needs a clean validation run against the correct source target:
`specs/wrk/WRK-624/plan.md`.

## What

Validate whether the patched wrapper returns a schema-valid Claude review for the
`WRK-624` plan spec when invoked with `--compact-plan`.

## Scope

1. run the patched wrapper against `specs/wrk/WRK-624/plan.md`
2. capture stdout/stderr/exit code and rendered review artifact
3. classify result as valid review, `NO_OUTPUT`, or other failure
4. compare result against earlier pre-patch experiments
5. produce HTML review artifact for user inspection

## Plan

### Phase 1 - Execute patched wrapper
- run `submit-to-claude.sh --compact-plan` on `specs/wrk/WRK-624/plan.md`
- use bounded timeout and single retry for clean evidence

### Phase 2 - Validate output
- inspect rendered review result
- run review validator if applicable
- record exit behavior and error path

### Phase 3 - Assess outcome
- determine whether the patched wrapper resolves the prior Claude review failure
- document whether the patch should be kept as the default transport path
- produce HTML review artifact

## Acceptance Criteria

- [x] Patched Claude wrapper is tested on `specs/wrk/WRK-624/plan.md`
- [x] Result is captured and classified
- [x] Comparison against earlier experiments is documented
- [x] HTML review artifact exists for user inspection

## Evidence

- Review artifact: `/mnt/local-analysis/workspace-hub/.claude/work-queue/assets/WRK-647/raw/claude-review.md`
- Results: `/mnt/local-analysis/workspace-hub/.claude/work-queue/assets/WRK-647/results.md`
- HTML review artifact: `/mnt/local-analysis/workspace-hub/.claude/work-queue/assets/WRK-647/review.html`

## Outcome

The patched `submit-to-claude.sh` wrapper successfully returned a schema-valid
Claude review on the real `WRK-624` plan target. This validates the patched
temp-file `Read` transport as an effective improvement for this review path.
