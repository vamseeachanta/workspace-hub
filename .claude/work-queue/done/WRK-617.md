---
id: WRK-617
title: "feat(digitalmodel/ansys): catalog and port APDL scripts from /mnt/ace to digitalmodel.ansys domain"
status: done
priority: medium
complexity: medium
compound: false
created_at: 2026-02-25T00:00:00Z
completed_at: 2026-02-26T00:00:00Z
target_repos:
  - digitalmodel
commit: e1d308f
spec_ref:
related:
  - WRK-615
  - WRK-616
blocked_by: []
synced_to: []
plan_reviewed: true
plan_approved: true
percent_complete: 100
brochure_status: n/a
computer: ace-linux-1
execution_workstations: [ace-linux-1]
plan_workstations: [ace-linux-1]
---

# feat(digitalmodel/ansys): Catalog and Port APDL Scripts to digitalmodel.ansys Domain

## What

1. **Catalog** all APDL scripts and ANSYS Workbench projects found in `/mnt/ace` into
   `specs/data-sources/digitalmodel.yaml` under a new `ansys_assets:` section
2. **Create** `src/digitalmodel/ansys/` domain with:
   - Python helpers to read/parse APDL `.inp` files (extract material properties, element types,
     load steps)
   - ANSYS Workbench journal (`.wbjn`) reader (IronPython → Python AST analysis)
   - Parametric study reader (parse `DesignPointLog.csv` → typed dataclass)
3. **Register** transferable ANSYS WB projects as starting points for future FEA automation

## Why

Significant APDL/ANSYS Workbench FEA work exists in the archive but is inaccessible
programmatically. Porting the parametric logic into Python enables:
- AI agents to drive parametric FEA sweeps without ANSYS Workbench GUI
- Integration with `digitalmodel.pipeline.thin_wall` (WRK-615)
- Reuse of verified material models and mesh configurations across projects

## APDL Assets Identified (from /mnt/ace scan)

### Pipeline FEA (production domain)
- **0116 Thinwall Pipe FEA** (14 `.wbjn` journals + `ds.dat` APDL):
  - `/mnt/ace/docs/disciplines/production/projects/0116_thinwall_pipe_fea/...`
  - Parametric: `DesignPointLog.csv`, `Parametric values.xlsx`, `Ansys Results*.xlsx`
  - Type: local FEA of thin-wall pipe cross-section, moment–strain limit curves

- **611 Mecor Pipeline** (15+ `.wbjn` journals, 4 sensitivity models):
  - `Loading Matrix_1_Rev_12_DT67_YieldPoint_NoTension_files/` — tension sensitivity
  - `Loading Matrix_1_Rev_12_DT67_WDSensitivity_files/` — weld defect sensitivity
  - `Loading Matrix_1_Rev_12_DT67_OvalSensitivity_6mm_files/` — ovality sensitivity
  - `Loading Matrix_1_Rev_12_DT67_TensionSensitivity_files/` — tension load sensitivity

### Drilling / Riser FEA
- **Woodfibre LNG QRH** (Quick Release Hook structural analysis):
  - APDL script: `QRH_Workbench/APDL/workbench_main.inp` + `SYS-53_ds.dat` + `write_verify_update.inp`
  - Domain: drilling, structural check of hook under load
  - Path: `/mnt/ace/docs/disciplines/drilling/projects/woodfibre/...`

- **614 Sewol Global** (ferry global structural model):
  - APDL: `sewol_global/sewol_global.inp` — full APDL FEM with material props + BCs
  - Material data: EX=206000 MPa, NUXY=0.3, DENS=7.85e-09 kg/mm³ (confirmed in file)
  - Path: `/mnt/ace/docs/disciplines/misc/projects/614_sewol/.../`

- **BP Macondo containment riser** (modal/strength analysis):
  - `common.inp` APDL files across multiple analysis cases (Single Pipe FSR, PIP FSR)
  - Multiple load cases: VIV modal, installation lowering, transit analysis
  - Path: `/mnt/ace/data/va-hdd-2/2HDD 3824 - BP Macondo Containment Riser Analysis/...`

- **BLK31 SLOR installation VIV** (riser installation modal analysis):
  - `common.inp` APDL across 12-inch PR and 8-inch GL riser models (Empty + Water Filled)
  - Multiple natural frequency load combinations (LRA 0.25–1.00 RP, URA)
  - Path: `/mnt/ace/data/va-hdd-2/2HDD 2100 BLK31 SLOR Design/...`

- **0145 FDAS Tensioner Cart FE**:
  - Path: `/mnt/ace/docs/disciplines/drilling/projects/0145_fdas_tensioner_cart_design_fe/...`

- **0159 WCOT Downhole Tool FEA** (Mandrel + Ratchet thread analysis):
  - ANSYS WB projects for mandrel and ratchet structural analysis
  - Path: `/mnt/ace/docs/disciplines/misc/projects/0159_wcot_downholetool_fea/...`

### ANSYS Tutorial / Reference (simulation project)
- `simulation/ANSYS/Ref Examples/` — Flange FEA examples (F_FullFlange, F_HalfFlange)
- `simulation/ANSYS/Scripting_Tools_All_Products_15.0_v1/` — ANSYS v15 scripting workshops
  (WB Python, Advanced ExternalConnection, Fluids, Mechanical)
- Path: `/mnt/ace/docs/disciplines/drilling/projects/simulation/...`

## Module Layout

```
src/digitalmodel/ansys/
    __init__.py
    apdl_reader.py       # parse .inp APDL files → materials, elements, loads dict
    wbjn_reader.py       # parse .wbjn IronPython journals → parametric step list
    design_points.py     # read DesignPointLog.csv → list[DesignPoint] dataclass
    models.py            # APDLMaterial, DesignPoint, ParametricStudy dataclasses

tests/ansys/
    test_apdl_reader.py
    test_design_points.py
    fixtures/
        sewol_global_excerpt.inp    # first 50 lines (material section)
        design_point_log_sample.csv # 5-row sample from 0116 project
```

## Steps

1. Create `src/digitalmodel/ansys/` package skeleton + `tests/ansys/`
2. Implement `APDLReader` — parse material properties (`MP,EX`, `MP,NUXY`, `MP,DENS`) from `.inp`
3. Implement `DesignPointReader` — read `DesignPointLog.csv` → `list[DesignPoint]`
4. Implement `WBJNReader` — extract parametric step list from `.wbjn` IronPython source
5. Add `ansys_assets:` section to `specs/data-sources/digitalmodel.yaml` cataloguing all
   APDL/WB projects found above
6. Write unit tests using fixture excerpts (no dependency on /mnt/ace at test time)
7. Cross-review via `scripts/review/cross-review.sh`

## Acceptance Criteria

- [x] `src/digitalmodel/ansys/` created as proper Python package
- [x] `APDLReader.parse_materials(filepath)` extracts E, nu, density from `.inp` file
- [x] `DesignPointReader.read(filepath)` returns typed `list[DesignPoint]` from CSV
- [x] `WBJNReader.read_metadata(filepath)` extracts version, systems, DP ops, param exprs
- [x] 54 unit tests pass using fixture excerpts (sewol_excerpt.inp, design_point_log.csv, journal_simple.wbjn)
- [x] `specs/data-sources/digitalmodel.yaml` has `ansys_assets:` section — 7 projects catalogued
- [x] Legal scan passes (no client project names in code)
- [x] Cross-review passed — Codex P2 (blank-field SECDATA positional shift) + 2×P3 fixed (dc8d252)
