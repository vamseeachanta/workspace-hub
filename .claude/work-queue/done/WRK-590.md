---
id: WRK-590
title: "Split activity_taxonomy.py into 2 focused modules"
status: done
priority: P1
complexity: medium
route: B
computer: [ace-linux-1]
created: 2026-02-25
tags: [refactor, worldenergydata, god-object, clean-code]
---
## Goal

Split `worldenergydata/src/worldenergydata/safety_analysis/taxonomy/activity_taxonomy.py`
(1,550 lines) into 2 focused modules per the God Object Splits plan.

## Deliverables

1. `activity_definitions.py` (~1,200L) — `Subactivity`, `Activity` dataclasses + all 19 `_build_*_activity()` functions
2. `activity_registry.py` (~330L) — `ActivityTaxonomy` class (registry + index + query API merged)
3. `activity_taxonomy.py` → DeprecationWarning shim (~15L)
4. Updated `__init__.py` — imports from new paths

## Callers to Update

- `incident_classifier.py` — update imports to use new paths directly
- `cli.py` — update imports to use new paths directly
- `__init__.py` — re-export from new modules

## Acceptance Criteria

- Baseline test count: `python3 -m pytest worldenergydata/tests/safety_analysis/taxonomy/ -q`
- All 3 callers smoke-test green
- Backward-compat shim works: `from .activity_taxonomy import ActivityTaxonomy, Activity, Subactivity`
- Post-split test count matches baseline

## Notes

- `activity_queries.py` MERGED into `activity_registry.py` (50L, not worth separate module)
- Commit: normal git with hook bypass (`git -c core.hooksPath=/dev/null commit`)
- See full plan for safety protocol details
