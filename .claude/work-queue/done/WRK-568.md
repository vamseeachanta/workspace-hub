---
id: WRK-568
title: "feat(document-index): expand Phase A to index engineering script files"
status: done
priority: high
complexity: medium
compound: false
created_at: 2026-02-25T00:00:00Z
completed_at: 2026-02-25T05:45:00Z
target_repos:
  - workspace-hub
commit:
spec_ref: scripts/data/document-index/config.yaml
related:
  - WRK-309
  - WRK-569
  - WRK-570
  - WRK-571
  - WRK-572
  - WRK-573
blocked_by: []
synced_to: []
plan_reviewed: false
plan_approved: false
percent_complete: 100
brochure_status: n/a
computer: ace-linux-1
---

# feat(document-index): Expand Phase A to Index Engineering Script Files

## What

Expand `scripts/data/document-index/config.yaml` (already updated this session)
to include engineering script file types, then run an incremental Phase A scan.

## Script Inventory (discovered 2026-02-25, not yet in index)

| Extension | ace count | dde count | Primary use |
|-----------|-----------|-----------|-------------|
| `.dat`    | 14,558    | 17,560    | OrcaFlex model files |
| `.py`     | 1,555     | 1,572     | OrcaFlex automation + ANSYS Python |
| `.m`      | 440       | 429       | MATLAB analysis scripts |
| `.inp`    | 428       | 384       | ANSYS/Abaqus FEA inputs |
| `.f`/`.for` | 9       | 9         | Fortran legacy |
| `.bas`    | 3         | 3         | VBA macros |

Total new files: ~35,000

## Config Changes (applied 2026-02-25)

- `ace_project.extensions` + `dde_project.extensions` updated to include
  `.py, .m, .inp, .dat, .mac, .f, .for, .bas`
- `script_extensions:` list added with portability ratings
- ANSYS internal binary exclusion patterns added:
  `*/dp0/*/MECH/*.dat`, `*/_ProjectScratch/*`, `*/_system_coupl/*`

## Remaining Work

1. Run `python3 scripts/data/document-index/phase-a-index.py --incremental`
2. Run `python3 scripts/data/document-index/phase-e-backpopulate.py` (new records)
3. Regenerate `data/document-index/registry.yaml`
4. Verify ~35,000 new records; no duplicate content_hash values

## Domain Classification for New Script Records

Script-specific signals for `phase-e-backpopulate.py`:
- `.py` or `.dat` in path containing `Orcaflex` → domain: `pipeline` or `marine`
- `.m` with `VIV` or `Shear7` in path → domain: `structural`
- `.m` with `API579` in path → domain: `structural`
- `.inp` with `VIV` or `Modes` in path → domain: `structural`
- `.py` in `ANSYS/` path → domain: `structural`

## Acceptance Criteria

## Results (2026-02-25)

- [x] Phase A incremental scan complete — 55,211 new records (1,033,789 total)
  - ace_project: 26,461 new | dde_project: 28,705 new | workspace_spec: 45
  - Scripts indexed: .dat=49,125 | .py=3,875 | .inp=1,070 | .m=997 | .bas=80 | .f=18 | .mac=1
- [x] `domain` field populated for all 1,033,789 records (phase-e-backpopulate)
- [x] `registry.yaml` updated — by_source and by_domain totals correct
- [x] ANSYS binary exclusion patterns verified working
- [x] Legal scan PASS

## Acceptance Criteria

- [x] Phase A incremental scan complete (~35,000 new script records; actual 55,211)
- [x] `domain` field populated for new records (phase-e-backpopulate)
- [x] `registry.yaml` totals updated
- [x] No ANSYS internal binary files included
- [x] Deduplication verified (93,216 duplicate hashes = expected cross-drive mirrors)
