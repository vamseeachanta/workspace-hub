---
id: WRK-602
title: "chore(digitalmodel): migrate specialized/gis submodules → digitalmodel.gis"
status: done
priority: low
complexity: medium
compound: false
created_at: 2026-02-25T00:00:00Z
completed_at: 2026-02-25
target_repos:
  - digitalmodel
commit: 0fa555a
spec_ref:
related:
  - WRK-601
  - WRK-599
blocked_by: []
synced_to: []
plan_reviewed: true
plan_approved: true
percent_complete: 100
computer: [ace-linux-1]
execution_workstations: [ace-linux-1]
plan_workstations: [ace-linux-1]
---

# chore(digitalmodel): Migrate specialized/gis Submodules → digitalmodel.gis

## Context

WRK-601 moved non-Python files and assessed the duplication. Findings:
- `src/digitalmodel/specialized/gis/__init__.py` already delegates to `digitalmodel.gis`
- `src/digitalmodel/specialized/gis/core/`, `io/`, `layers/`, `integrations/` are OLD copies
- Tests in `tests/specialized/gis/` import directly from `digitalmodel.specialized.gis.*` submodules
- 7 pre-existing failures in `test_feature_layer.py` caused by cross-module `CRSType` identity
  (specialized feature_layer.py imports CRSType from digitalmodel.gis.core.crs but tests
  import from digitalmodel.specialized.gis.core.crs — two different enum classes)

## API Differences to Reconcile

`digitalmodel.gis` (canonical) has extra validation not in `specialized/gis`:
- coordinate_transformer.py: validates UTM zone (1-60) and hemisphere (N/S)
- layers/feature_layer.py: different docstring, imports CRSDefinition from digitalmodel.gis

## Migration Steps

1. Replace each submodule copy (core/, io/, layers/, integrations/) with shims
   re-exporting from canonical digitalmodel.gis.*
2. Fix 7 pre-existing test_feature_layer.py failures (CRSType identity issue resolves
   automatically once shims point to single enum class)
3. Delete dead code: gis.py, outputlatlongs_wells.py, Readme.txt (no callers)
4. Assess scripts/blender/blender_gis.py + scripts/qgis/qgis_processing.py
   (move to digitalmodel.gis.integrations or delete if no callers)

## Acceptance Criteria

- [x] All specialized/gis/ submodule .py files are shims re-exporting from digitalmodel.gis
      (layers/ kept as originals; FeatureLayer API diverged — crs kwarg + from_geojson sig)
- [x] Pre-existing failures fixed: well_layer.py + temporal_layer.py import local .feature_layer
      (canonical dropped crs kwarg); geotiff_handler shim exports HAS_RASTERIO
- [x] gis/layers/ now has raster_layer.py + temporal_layer.py (were only in specialized/)
- [x] gis/integrations/ has blender_script_generator.py + qgis_script_generator.py
- [x] python3 -m pytest tests/specialized/gis/ — 394 passed, 35 skipped (0 failures)
- [x] Dead code removed (gis.py, outputlatlongs_wells.py, Readme.txt)
