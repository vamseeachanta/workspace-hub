---
id: WRK-326
title: Unified CLI — single ace command routing to all repo tools
status: done
priority: medium
complexity: high
compound: false
created_at: 2026-02-22T00:00:00Z
target_repos:
  - workspace-hub
commit:
spec_ref:
related: [WRK-309]
blocked_by: []
synced_to: []
plan_reviewed: true
plan_approved: true
percent_complete: 100
brochure_status: n/a
computer: ace-linux-1
---

# Unified CLI — single ace command routing to all repo tools

## What

Create a unified `ace` CLI entry point at the workspace-hub level that routes to tools in all
repos. Example: `ace dm fatigue`, `ace wed bsee`, `ace ah portfolio`. Thin wrapper using
subprocess routing based on subcommand prefix. Add shell completion.

## Why

Each repo currently has its own CLI entry point, requiring the user to know which repo
provides which tool. A unified `ace` command simplifies discoverability and provides a single
interface to the entire workspace-hub toolset. Shell completion makes it practical for daily
use.

## Acceptance Criteria

- [x] `ace` CLI entry point installed at workspace-hub level (pyproject.toml console_scripts)
- [x] Subcommand routing: prefix maps to repo (dm=digitalmodel, wed=worldenergydata,
      ah=assethold, etc.)
- [x] Subprocess delegation: `ace dm fatigue ...` invokes digitalmodel's fatigue CLI
- [x] `ace --list` shows all available subcommands across all repos
- [x] Bash/Zsh completion script generation
- [x] Graceful error handling: unknown subcommand, repo not installed, missing dependencies
- [x] Pytest coverage for routing logic and error paths

## Implementation

- `src/ace/__init__.py` — package declaration, version
- `src/ace/router.py` — ROUTES table, resolve_repo_python, resolve_command_argv, route()
- `src/ace/completion.py` — bash_completion(), zsh_completion(), generate()
- `src/ace/cli.py` — main() entry point with --help/--version/--list/--completion flags
- `pyproject.toml` — console_scripts: ace = "src.ace.cli:main"
- `tests/unit/test_ace_router.py` — 43 tests covering routing and error paths
- `tests/unit/test_ace_cli.py` — 20 tests covering CLI flag handling
- `tests/unit/test_ace_completion.py` — 15 tests covering completion scripts
- 78 tests, all passing; legal scan PASS; cross-review APPROVE (gemini)

---
*Source: Phase G workspace-hub expansion — WRK-309 Document Intelligence.*
