---
id: WRK-379
title: "Drilling dysfunction detector — stick-slip, washout, bit balling, kick logic"
status: done
priority: medium
complexity: simple
compound: false
created_at: 2026-02-24T13:00:00Z
target_repos:
  - digitalmodel
commit: b2df39b0f
spec_ref:
related: [WRK-375, WRK-377, WRK-378]
blocked_by: []
synced_to: []
plan_ensemble: false
ensemble_consensus_score: null
plan_reviewed: false
plan_approved: false
percent_complete: 100
brochure_status: n/a
computer: ace-linux-1
execution_workstations: [ace-linux-1]
plan_workstations: [ace-linux-1]
---

# Drilling Dysfunction Detector

## What

Implement real-time drilling dysfunction detection at
`src/digitalmodel/well/drilling/dysfunction_detector.py`. Accepts a time-series of
drilling surface parameters (WOB, RPM, torque, ROP, flow-in, flow-out, pit volume)
and flags active dysfunctions with severity and recommended mitigation.

| Dysfunction | Primary indicator | Threshold |
|-------------|------------------|-----------|
| Stick-slip | Torque std_dev / mean torque | > 20% sustained over 30s |
| Washout | ROP increase with constant WOB/RPM | > 30% unexplained ROP gain |
| Bit balling | MSE > 2× baseline at constant WOB/RPM | Increasing torque, declining ROP |
| Wellbore instability | Torque spike + string weight increase (combo) | Joint flag |
| Kick (gas influx) | Flow-out − flow-in > threshold; pit gain | > 5% flow differential sustained |

Each detection returns: `DysfunctionEvent(type, severity, confidence, mitigation_hint)`.

## Why

Drilling NPT (non-productive time) from undetected dysfunctions is the biggest
controllable cost in well operations. In the Drillbotics virtual track (WRK-375),
NPT is explicitly scored — early detection prevents point penalties. For client
projects, a dysfunction detector integrated with the drilling data pipeline provides
real-time safety and efficiency value.

Blocked by WRK-377 (needs ROP baseline for washout/bit-balling detection) and
WRK-378 (needs ECD for wellbore instability context).

## Acceptance Criteria

- [x] `DysfunctionDetector` class: accepts rolling time-series window (configurable
  lookback, default 60s)
- [x] All five dysfunction types implemented with configurable thresholds
- [x] `detect(df: DataFrame) -> list[DysfunctionEvent]` method
- [x] `DysfunctionEvent` dataclass: type, severity (low/med/high), confidence (0–1),
  recommendation (string)
- [x] Unit tests: each dysfunction type triggered and not-triggered with synthetic data
- [x] False-positive rate tested: normal drilling variation should not trigger alerts

## Agentic AI Horizon

- Dysfunction detection closes the feedback loop: sense anomaly → plan mitigation →
  act (reduce WOB, increase flow, pull back) → only escalate kicks to human
- Enables Level 4 autonomous drilling: agent handles routine dysfunctions without
  human initiation; kicks are the exception boundary (escalate to HMI)

---
*Source: WRK-375 Drillbotics gap analysis — NPT avoidance is scored; H1 foundation*
