---
id: WRK-645
title: "investigate(review): test Claude CLI file-write review artifact path"
status: done
priority: high
complexity: medium
route: B
compound: false
created_at: 2026-02-28T00:00:00Z
target_repos:
  - workspace-hub
commit:
spec_ref:
related:
  - WRK-624
  - WRK-642
  - WRK-644
blocked_by: []
parent:
synced_to: []
plan_reviewed: true
plan_approved: true
percent_complete: 100
brochure_status: n/a
computer: ace-linux-1
provider: codex
provider_alt: claude
cross_review: strong
---

# investigate(review): Test Claude CLI File-Write Review Artifact Path

## Problem

Claude non-interactive review transport can classify `NO_OUTPUT` correctly, but it
still fails to return substantive review content for real plan-review workloads.
One possible alternate path is to instruct Claude to write its review directly to a
markdown file on disk, then have the workflow pick up that file instead of relying
on stdout transport.

## What

Test whether Claude CLI can reliably produce a markdown review artifact by writing
it to disk during execution, and whether that path is more reliable than stdout
capture for real review workloads.

## Scope

1. define a controlled file-write review experiment
2. test Claude on a real plan-review target using explicit save-to-file instructions
3. verify whether the written markdown conforms to the shared review schema
4. compare reliability against current stdout-based transport
5. produce HTML review output for user inspection

## Plan

### Phase 1 - Define file-write experiment
- choose target review input
- choose output file path under WRK assets
- define prompt that instructs Claude to save review markdown directly

### Phase 2 - Execute and verify
- run Claude CLI with the file-write instruction path
- inspect whether the file is created and complete
- validate output schema and compare against stdout path

### Phase 3 - Assess workflow value
- determine whether file-write is viable as a primary or fallback transport mode
- document constraints and risks
- produce review HTML artifact

## Acceptance Criteria

- [x] Claude file-write experiment is executed on a real target
- [x] Resulting markdown file path is captured
- [x] Output is validated against review schema or clearly classified
- [x] Comparison against stdout-based transport is documented
- [x] HTML review artifact exists for user inspection

## Evidence

- Results: `/mnt/local-analysis/workspace-hub/.claude/work-queue/assets/WRK-645/results.md`
- HTML review artifact: `/mnt/local-analysis/workspace-hub/.claude/work-queue/assets/WRK-645/review.html`

## Outcome

Claude CLI does not currently support a native review output file path, and the
prompt-driven file-write strategy did not create the requested markdown artifact
on either the real `WRK-624` target or a trivial control case. This path is not
viable as a replacement for stdout/schema capture.
