---
id: WRK-646
title: "investigate(review): test Claude temp-file Read-tool review path"
status: done
priority: high
complexity: medium
route: B
compound: false
created_at: 2026-02-28T00:00:00Z
target_repos:
  - workspace-hub
commit:
spec_ref:
related:
  - WRK-624
  - WRK-642
  - WRK-644
  - WRK-645
blocked_by: []
parent:
synced_to: []
plan_reviewed: true
plan_approved: true
percent_complete: 100
brochure_status: n/a
computer: ace-linux-1
execution_workstations: [ace-linux-1]
plan_workstations: [ace-linux-1]
provider: codex
provider_alt: claude
cross_review: strong
html_output_ref: assets/WRK-646/review.html
claim_routing_ref: .claude/work-queue/assets/WRK-646/claim-evidence.yaml
plan_html_review_draft_ref: .claude/work-queue/assets/WRK-646/plan-html-review-draft.md
plan_html_review_final_ref: .claude/work-queue/assets/WRK-646/plan-html-review-final.md
html_verification_ref: .claude/work-queue/assets/WRK-646/html-verification.md
---

# investigate(review): Test Claude Temp-File Read-Tool Review Path

## Problem

The current Claude review path pipes review content through stdin. External guidance
and local evidence suggest that large stdin payloads may be a dominant cause of the
observed `NO_OUTPUT` behavior. The next clean test is to avoid large stdin entirely
and instead provide Claude a short prompt that instructs it to read the review
bundle from a temp file via the `Read` tool.

## What

Run a controlled experiment using:
- generated compact plan bundle written to a temp file
- short prompt only on stdin/CLI
- `Read` tool enabled
- stdout review capture only

## Scope

1. generate a temp-file review bundle for `WRK-624`
2. run Claude with a short file-read prompt and `Read` tool only
3. validate returned review output
4. compare result against prior stdin-heavy experiments
5. produce HTML review artifact for user inspection

## Plan

### Phase 1 - Prepare file-read experiment
- generate compact bundle to temp file or WRK asset path
- define short prompt that points Claude to the file
- keep stdin payload minimal

### Phase 2 - Execute and validate
- run Claude in non-interactive mode with `Read` tool enabled
- capture stdout/stderr/exit code
- validate output against review schema where possible

### Phase 3 - Assess outcome
- determine whether temp-file input resolves the no-output behavior
- document whether this should replace stdin piping in `submit-to-claude.sh`
- produce HTML review artifact

## Acceptance Criteria

- [x] Temp-file bundle experiment is executed on a real target
- [x] CLI invocation uses short prompt + `Read` tool only
- [x] Output is validated or clearly classified
- [x] Comparison against prior stdin-heavy runs is documented
- [x] HTML review artifact exists for user inspection

## Evidence

- Results: `/mnt/local-analysis/workspace-hub/.claude/work-queue/assets/WRK-646/results.md`
- HTML review artifact: `/mnt/local-analysis/workspace-hub/.claude/work-queue/assets/WRK-646/review.html`

## Outcome

The temp-file `Read`-tool variant did not produce a usable Claude review on the
real `WRK-624` target within the bounded execution window. This removes enough of
the stdin-size confounding to show that moving content out of stdin is not, by
itself, a sufficient fix in this environment.
