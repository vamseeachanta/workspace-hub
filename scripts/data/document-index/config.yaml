# Document Index Pipeline Configuration (WRK-309)
# Controls source paths, exclusions, batch sizes, and API budget

sources:
  og_standards:
    enabled: true
    db_path: /mnt/ace/O&G-Standards/_inventory.db
    host: ace-linux-1
    source_type: og_standards

  ace_standards:
    enabled: true
    paths:
      - /mnt/ace/docs/_standards
    host: ace-linux-1
    source_type: ace_standards
    extensions: [.pdf, .docx, .xlsx, .pptx, .txt]

  ace_project:
    enabled: true
    paths:
      - /mnt/ace/docs
      - /mnt/ace/data
      - /mnt/ace/_ss_repo
      - /mnt/ace/Production
      - /mnt/ace/umbilical
    host: ace-linux-1
    source_type: ace_project
    extensions: [.pdf, .docx, .xlsx, .pptx, .txt, .csv, .dwg, .dxf]

  dde_project:
    enabled: true
    paths:
      - /mnt/remote/ace-linux-2/dde/documents
      - /mnt/remote/ace-linux-2/dde/0000 O&G
      - /mnt/remote/ace-linux-2/dde/Literature
      - /mnt/remote/ace-linux-2/dde/Orcaflex
      - /mnt/remote/ace-linux-2/dde/ABSG
      - /mnt/remote/ace-linux-2/dde/g-drive
      - /mnt/remote/ace-linux-2/dde/o-drive
      - /mnt/remote/ace-linux-2/dde/dropbox_contents
      - "/mnt/remote/ace-linux-2/dde/Temp - Oil&Gas"
    host: ace-linux-2
    source_type: dde_project
    extensions: [.pdf, .docx, .xlsx, .pptx, .txt, .csv, .dwg, .dxf, .doc, .xls]

  workspace_spec:
    enabled: true
    paths:
      - /mnt/local-analysis/workspace-hub/specs
    host: ace-linux-1
    source_type: workspace_spec
    extensions: [.md, .yaml, .yml]

  api_metadata:
    enabled: true
    source_type: api_metadata
    apis:
      - {repo: worldenergydata, api: BSEE, auth: public, url_pattern: "https://www.data.bsee.gov/"}
      - {repo: worldenergydata, api: EIA, auth: api_key, url_pattern: "https://api.eia.gov/"}
      - {repo: worldenergydata, api: SODIR, auth: public, url_pattern: "https://fact.no/"}
      - {repo: worldenergydata, api: IMO_GISIS, auth: optional, url_pattern: "https://gisis.imo.org/"}
      - {repo: worldenergydata, api: ERA5, auth: key, url_pattern: "https://cds.climate.copernicus.eu/"}
      - {repo: worldenergydata, api: NOAA_NDBC, auth: public, url_pattern: "https://www.ndbc.noaa.gov/"}
      - {repo: assethold, api: yfinance, auth: public, url_pattern: "pypi:yfinance"}
      - {repo: assethold, api: insider_trading, auth: tbd, url_pattern: "tbd"}

exclude_patterns:
  - "*/$RECYCLE.BIN/*"
  - "*/.git/*"
  - "*/__pycache__/*"
  - "*/System Volume Information/*"
  - "*/node_modules/*"
  - "*/Personal/*"
  - "*/Information_Important/*"
  - "*/lost+found/*"
  - "*/TECH Animation Fundaes/*"
  - "*/TECH Writing/*"
  - "*.pyc"
  - "*.tmp"

cad_extensions:
  - .dwg
  - .dxf
  - .3dm
  - .sat
  - .iges
  - .igs
  - .step
  - .stp

output:
  index_path: data/document-index/index.jsonl
  summaries_dir: data/document-index/summaries
  enhancement_plan: data/document-index/enhancement-plan.yaml
  registry_path: data/document-index/registry.yaml

extraction:
  large_pdf_threshold_mb: 100
  large_pdf_cli: pdf-large-reader/src/cli.py
  max_text_chars: 50000
  xlsx_max_rows: 5
  md_max_chars: 2000

llm:
  model: claude-haiku-4-5-20251001
  batch_size: 50
  daily_budget_usd: 20.0
  total_budget_usd: 200.0
  skip_below_words: 100

deduplication:
  primary_key: content_hash
  source_priority:
    - og_standards
    - ace_standards
    - ace_project
    - dde_project
    - workspace_spec
    - api_metadata

domains:
  - structural
  - cathodic-protection
  - pipeline
  - marine
  - installation
  - energy-economics
  - portfolio
  - materials
  - regulatory
  - cad
  - workspace-spec
  - other

repo_domain_map:
  digitalmodel: [structural, cathodic-protection, pipeline, marine, installation, materials]
  worldenergydata: [energy-economics, regulatory]
  assethold: [portfolio]
  doris: [pipeline, structural]
  OGManufacturing: [structural, regulatory]
  saipem: [installation, marine]
  rock-oil-field: [installation, marine]
  acma-projects: [structural, materials]
  pdf-large-reader: []
  assetutilities: []

cron:
  refresh_schedule: "0 2 1 */3 *"  # quarterly at 2am on 1st of month
  refresh_script: scripts/cron/document-index-refresh.sh
